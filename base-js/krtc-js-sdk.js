!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.KRTC=t():e.KRTC=t()}(self,(function(){return(()=>{var e={3730:(e,t,i)=>{"use strict";function r(){}function n(){n.init.call(this)}function s(e){return void 0===e._maxListeners?n.defaultMaxListeners:e._maxListeners}function a(e,t,i){if(t)e.call(i);else for(var r=e.length,n=f(e,r),s=0;s<r;++s)n[s].call(i)}function o(e,t,i,r){if(t)e.call(i,r);else for(var n=e.length,s=f(e,n),a=0;a<n;++a)s[a].call(i,r)}function c(e,t,i,r,n){if(t)e.call(i,r,n);else for(var s=e.length,a=f(e,s),o=0;o<s;++o)a[o].call(i,r,n)}function u(e,t,i,r,n,s){if(t)e.call(i,r,n,s);else for(var a=e.length,o=f(e,a),c=0;c<a;++c)o[c].call(i,r,n,s)}function d(e,t,i,r){if(t)e.apply(i,r);else for(var n=e.length,s=f(e,n),a=0;a<n;++a)s[a].apply(i,r)}function l(e,t,i,n){var a,o,c,u;if("function"!=typeof i)throw new TypeError('"listener" argument must be a function');if((o=e._events)?(o.newListener&&(e.emit("newListener",t,i.listener?i.listener:i),o=e._events),c=o[t]):(o=e._events=new r,e._eventsCount=0),c){if("function"==typeof c?c=o[t]=n?[i,c]:[c,i]:n?c.unshift(i):c.push(i),!c.warned&&(a=s(e))&&a>0&&c.length>a){c.warned=!0;var d=new Error("Possible EventEmitter memory leak detected. "+c.length+" "+t+" listeners added. Use emitter.setMaxListeners() to increase limit");d.name="MaxListenersExceededWarning",d.emitter=e,d.type=t,d.count=c.length,u=d,"function"==typeof console.warn?console.warn(u):console.log(u)}}else c=o[t]=i,++e._eventsCount;return e}function h(e,t,i){var r=!1;function n(){e.removeListener(t,n),r||(r=!0,i.apply(e,arguments))}return n.listener=i,n}function p(e){var t=this._events;if(t){var i=t[e];if("function"==typeof i)return 1;if(i)return i.length}return 0}function f(e,t){for(var i=new Array(t);t--;)i[t]=e[t];return i}i.r(t),i.d(t,{Processor:()=>Ae,USM:()=>Me,alpha:()=>Ne,beauty:()=>Be,beauty2:()=>Ue,blueBlindCurrect:()=>De,crayon:()=>Se,dot:()=>Ce,earlybird:()=>_e,grayscale:()=>Te,greenBlindCurrect:()=>ke,hudson:()=>Ie,kelvin:()=>Re,kuwahara:()=>xe,lomo:()=>be,mix:()=>me,n1977:()=>ye,pixellate:()=>ve,redBlindCurrect:()=>Pe,sepia:()=>ge,sketch:()=>Ee,sketchInteractive:()=>Oe,valencia:()=>we}),r.prototype=Object.create(null),n.EventEmitter=n,n.usingDomains=!1,n.prototype.domain=void 0,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.init=function(){this.domain=null,n.usingDomains&&undefined.active,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new r,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},n.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},n.prototype.getMaxListeners=function(){return s(this)},n.prototype.emit=function(e){var t,i,r,n,s,l,h,p="error"===e;if(l=this._events)p=p&&null==l.error;else if(!p)return!1;if(h=this.domain,p){if(t=arguments[1],!h){if(t instanceof Error)throw t;var f=new Error('Uncaught, unspecified "error" event. ('+t+")");throw f.context=t,f}return t||(t=new Error('Uncaught, unspecified "error" event')),t.domainEmitter=this,t.domain=h,t.domainThrown=!1,h.emit("error",t),!1}if(!(i=l[e]))return!1;var A="function"==typeof i;switch(r=arguments.length){case 1:a(i,A,this);break;case 2:o(i,A,this,arguments[1]);break;case 3:c(i,A,this,arguments[1],arguments[2]);break;case 4:u(i,A,this,arguments[1],arguments[2],arguments[3]);break;default:for(n=new Array(r-1),s=1;s<r;s++)n[s-1]=arguments[s];d(i,A,this,n)}return!0},n.prototype.addListener=function(e,t){return l(this,e,t,!1)},n.prototype.on=n.prototype.addListener,n.prototype.prependListener=function(e,t){return l(this,e,t,!0)},n.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,h(this,e,t)),this},n.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,h(this,e,t)),this},n.prototype.removeListener=function(e,t){var i,n,s,a,o;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(n=this._events))return this;if(!(i=n[e]))return this;if(i===t||i.listener&&i.listener===t)0==--this._eventsCount?this._events=new r:(delete n[e],n.removeListener&&this.emit("removeListener",e,i.listener||t));else if("function"!=typeof i){for(s=-1,a=i.length;a-- >0;)if(i[a]===t||i[a].listener&&i[a].listener===t){o=i[a].listener,s=a;break}if(s<0)return this;if(1===i.length){if(i[0]=void 0,0==--this._eventsCount)return this._events=new r,this;delete n[e]}else!function(e,t){for(var i=t,r=i+1,n=e.length;r<n;i+=1,r+=1)e[i]=e[r];e.pop()}(i,s);n.removeListener&&this.emit("removeListener",e,o||t)}return this},n.prototype.removeAllListeners=function(e){var t,i;if(!(i=this._events))return this;if(!i.removeListener)return 0===arguments.length?(this._events=new r,this._eventsCount=0):i[e]&&(0==--this._eventsCount?this._events=new r:delete i[e]),this;if(0===arguments.length){for(var n,s=Object.keys(i),a=0;a<s.length;++a)"removeListener"!==(n=s[a])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events=new r,this._eventsCount=0,this}if("function"==typeof(t=i[e]))this.removeListener(e,t);else if(t)do{this.removeListener(e,t[t.length-1])}while(t[0]);return this},n.prototype.listeners=function(e){var t,i=this._events;return i&&(t=i[e])?"function"==typeof t?[t.listener||t]:function(e){for(var t=new Array(e.length),i=0;i<t.length;++i)t[i]=e[i].listener||e[i];return t}(t):[]},n.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},n.prototype.listenerCount=p,n.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};class A{static getPixelRatio(){return A.pixelRatioByDevice?window.devicePixelRatio:1}static setPixelRatioByDevice(e){A.pixelRatioByDevice=e}}A.pixelRatioByDevice=!0;const m={keepAlive:!1,pixelRatioByDevice:!0};var g;!function(e){e.ERROR="error"}(g||(g={}));var T,v=g;function C(e,t,i,r,n){const s=n||x,a=e.createProgram();if(!a)return null;t.forEach((function(t){e.attachShader(a,t)})),i&&i.forEach((function(t,i){e.bindAttribLocation(a,r?r[i]:i,t)})),e.linkProgram(a);if(!e.getProgramParameter(a,e.LINK_STATUS)){return s("Error in program linking:"+e.getProgramInfoLog(a)),e.deleteProgram(a),null}return a}function E(e,t,i,r){const n=r||x,s=e.createShader(i);if(!s)return null;e.shaderSource(s,t),e.compileShader(s);if(!e.getShaderParameter(s,e.COMPILE_STATUS)){return n("*** Error compiling shader '"+s+"':"+e.getShaderInfoLog(s)),e.deleteShader(s),null}return s}function S(e,t,i,r=[],n=[],s){const a=[];let o=E(e,t,e.VERTEX_SHADER,s),c=E(e,i,e.FRAGMENT_SHADER,s);return o&&a.push(o),c&&a.push(c),{program:C(e,a,r,n,s),vertexShader:o,fragmentShader:c}}function x(e){console&&(console.error?console.error(e):console.log&&console.log(e))}function b(e){let t={preferLowPowerToHighPerformance:!0,powerPreference:"default",antialias:!0,failIfMajorPerformanceCaveat:!0,preserveDrawingBuffer:!0};return e.getContext("webgl",t)||e.getContext("experimental-webgl",t)}!function(e){e[e.texture=0]="texture",e[e.texImageSource=1]="texImageSource",e[e.texImageSourceStatic=2]="texImageSourceStatic"}(T||(T={}));const y="\nattribute vec4 position;\nattribute vec4 inputTextureCoordinate;\n\nvarying vec2 textureCoordinate;\n\nvoid main() {\n    gl_Position = position;\n    textureCoordinate = inputTextureCoordinate.xy;\n}\n",_="\nvarying highp vec2 textureCoordinate;\nuniform sampler2D inputImageTexture;\n\nvoid main() {\n    gl_FragColor = texture2D(inputImageTexture, textureCoordinate);\n}\n";class I{constructor(e){this._vertexShader=y,this._fragmentShader=_,this._vShader=null,this._fShader=null,this._gl=null,this._program=null,this._positionBuffer=null,this._texcoordBuffer=null,this._texture=null,this._inputType=T.texImageSource,this._inputWidth=0,this._inputHeight=0,this._outputFBO=null,this._output=null,this._inputTextureUniform=null,this._positionAttrib=0,this._inputTextureCoordinateAttrib=0,this._hasOverriddenImageSizeFactor=!1,this._viewport={x:0,y:0,w:1,h:1},this._gl=e}init(e){e&&(this._vertexShader=e.vertex||this._vertexShader,this._fragmentShader=e.fragment||this._fragmentShader);let t=this._gl;if(!t)return;let i=S(t,this._vertexShader,this._fragmentShader);this._vShader=i.vertexShader,this._fShader=i.fragmentShader,(this._program=i.program)&&(!function(e,t){t=t||1;const i=e.clientWidth*t|0,r=e.clientHeight*t|0;!i||!r||e.width===i&&e.height===r||(e.width=i,e.height=r)}(t.canvas,A.getPixelRatio()),this._positionBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this._positionBuffer),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,1,1,1,-1,-1,1,-1]),t.STATIC_DRAW),this._texcoordBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this._texcoordBuffer),t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,1,1,1,0,0,1,0]),t.STATIC_DRAW))}active(){let e=this._gl,t=this._program;e&&t&&(e.useProgram(t),this._positionAttrib=e.getAttribLocation(t,"position"),this._inputTextureCoordinateAttrib=e.getAttribLocation(t,"inputTextureCoordinate"),e.enableVertexAttribArray(this._positionAttrib),e.bindBuffer(e.ARRAY_BUFFER,this._positionBuffer),e.vertexAttribPointer(this._positionAttrib,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(this._inputTextureCoordinateAttrib),e.bindBuffer(e.ARRAY_BUFFER,this._texcoordBuffer),e.vertexAttribPointer(this._inputTextureCoordinateAttrib,2,e.FLOAT,!1,0,0),this._inputTextureUniform=e.getUniformLocation(t,"inputImageTexture"))}setInput(e,t=0,i=!1){this._input=e,this._inputType=this._getInputType(e);let r=this._gl;if(r)if(this._inputType===T.texture){let e=this._input;this._texture=e.texture,r.bindFramebuffer(r.FRAMEBUFFER,e.framebuffer),r.bindTexture(r.TEXTURE_2D,e.texture),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,e.texture,0)}else this._texture=this._createAndSetupTexture(r),i&&(this._inputType=T.texImageSourceStatic,r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,1),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,this._input))}setInputSize(e,t=0){this._inputWidth===e.width&&this._inputHeight===e.height||(this._inputWidth=e.width,this._inputHeight=e.height)}draw(){let e=this._gl;e&&this._input&&(this._updateSize(),e.bindTexture(e.TEXTURE_2D,this._texture),this._inputType===T.texImageSource?(e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,1),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,this._input)):this._inputType===T.texture&&e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,0),e.bindFramebuffer(e.FRAMEBUFFER,this._outputFBO),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT),e.drawArrays(e.TRIANGLE_STRIP,0,4),this._output&&(e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null)),e.finish())}drawToFBO(){let e=this._gl;e&&(this._output=this._createAndSetupTexture(e),this._outputFBO=e.createFramebuffer(),e.bindFramebuffer(e.FRAMEBUFFER,this._outputFBO),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.canvas.width,e.canvas.height,0,e.RGBA,e.UNSIGNED_BYTE,null),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this._output,0))}destroy(e=!1){if(this._gl&&(this._gl.disableVertexAttribArray(this._positionAttrib),this._gl.disableVertexAttribArray(this._inputTextureCoordinateAttrib),this._outputFBO&&this._gl.deleteFramebuffer(this._outputFBO),this._positionBuffer&&this._gl.deleteBuffer(this._positionBuffer),this._texcoordBuffer&&this._gl.deleteBuffer(this._texcoordBuffer),this._texture&&this._inputType!==T.texture&&this._gl.deleteTexture(this._texture),this._output&&this._gl.deleteTexture(this._output),this._program&&this._gl.deleteProgram(this._program),this._vShader&&this._gl.deleteShader(this._vShader),this._fShader&&this._gl.deleteShader(this._fShader),e)){let e=this._gl.getExtension("WEBGL_lose_context");e&&e.loseContext()}this._input=void 0}get outputResource(){return{texture:this._output,framebuffer:this._outputFBO}}_createAndSetupTexture(e){var t=e.createTexture();return e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),t}_getInputType(e){return e.hasOwnProperty("texture")?T.texture:T.texImageSource}_updateSize(){let e=this._gl;if(e){let t=this._inputWidth/this._inputHeight,i=e.canvas.width,r=e.canvas.height,n=i/r;this._viewport.x=0,this._viewport.y=0,this._viewport.w=i,this._viewport.h=r,t>n?(this._viewport.h=i/t,this._viewport.y=(r-this._viewport.h)/2):(this._viewport.w=r*t,this._viewport.x=(i-this._viewport.w)/2),e.viewport(this._viewport.x,this._viewport.y,this._viewport.w,this._viewport.h)}}get _isActivated(){return!(!this._gl||this._gl.getParameter(this._gl.CURRENT_PROGRAM)!==this._program)}}const R={base:{id:"base",filter:I}};class w{constructor(){this._frameDuration=.016666666666666666,this._tick=()=>{if(this._ctx||this._init(),this._ctx&&this._gain&&this._cb){const e=this._ctx.createOscillator();e.onended=this._tick,e.connect(this._gain),e.start(0),e.stop(this._ctx.currentTime+this._frameDuration),this._cb()}}}setFPS(e){this._frameDuration=1/e}start(e){this._cb=e,this._tick()}stop(){this._cb=void 0}destroy(){this.stop(),this._ctx&&(this._ctx.close(),this._ctx=void 0)}_init(){this._ctx||(this._ctx=new AudioContext,this._gain||(this._gain=this._ctx.createGain()),this._gain.gain.value=0,this._gain.connect(this._ctx.destination))}}function P(e,t){return t&&0!==t.length||(t=[e],e=""),e="kwai-vpp"+(e?"::"+e:""),t.unshift("["+e+"] > "),t}var D,k;!function(e){e.LEVEL_ERROR="e",e.LEVEL_WARN="w",e.LEVEL_INFO="i",e.LEVEL_DEBUG="d",e.LEVEL_VERBOSE="v"}(D||(D={}));class O{static level(e){switch(O.ENABLE_ERROR=O.ENABLE_WARN=O.ENABLE_INFO=O.ENABLE_DEBUG=O.ENABLE_VERBOSE=!1,e){case D.LEVEL_ERROR:O.ENABLE_ERROR=!0;break;case D.LEVEL_WARN:O.ENABLE_ERROR=O.ENABLE_WARN=!0;break;case D.LEVEL_INFO:O.ENABLE_ERROR=O.ENABLE_WARN=O.ENABLE_INFO=!0;break;case D.LEVEL_DEBUG:O.ENABLE_ERROR=O.ENABLE_WARN=O.ENABLE_INFO=O.ENABLE_DEBUG=!0;break;case D.LEVEL_VERBOSE:O.ENABLE_ERROR=O.ENABLE_WARN=O.ENABLE_INFO=O.ENABLE_DEBUG=O.ENABLE_VERBOSE=!0}}static e(e,...t){if(!O.ENABLE_ERROR)return;const i=P(e,t);(console.error||console.warn||console.log).apply(console,i)}static w(e,...t){if(!O.ENABLE_WARN)return;const i=P(e,t);(console.warn||console.log).apply(console,i)}static i(e,...t){if(!O.ENABLE_INFO)return;const i=P(e,t);(console.info||console.log).apply(console,i)}static d(e,...t){if(!O.ENABLE_DEBUG)return;const i=P(e,t);(console.debug||console.log).apply(console,i)}static v(e,...t){if(!O.ENABLE_VERBOSE)return;const i=P(e,t);console.log.apply(console,i)}}O.ENABLE_ERROR=!0,O.ENABLE_WARN=!1,O.ENABLE_INFO=!1,O.ENABLE_DEBUG=!1,O.ENABLE_VERBOSE=!1,function(e){e[e.WEBGL_INIT_ERROR=102]="WEBGL_INIT_ERROR"}(k||(k={}));class M{constructor(e){this._filterName="base",this._gl=null,this._width=0,this._height=0,this._externalGL=!1,this._eventEmiter=e}select(e){let t=R[e];if(t&&(this._filter&&this._filter.destroy(),this._filterName=e,t&&this._gl&&this._source)){let e=new t.filter(this._gl);e.init(),e.active(),e.setInputSize({width:this._width,height:this._height}),t.paramsInfo&&Object.keys(t.paramsInfo).forEach((e=>{t.paramsInfo&&t.paramsInfo[e]&&t.paramsInfo[e].default&&(t.params||(t.params={}),t.params[e]=t.paramsInfo[e].default)})),t.params&&this.setParams(e,t.params),e.setInput(this._source),this._filter=e}}setInputSize(e,t){this._width=e,this._height=t,this._filter&&this._filter.setInputSize({width:e,height:t})}attachSource(e){this._source=e}detachSource(){this._source=void 0}attachOutputCanvas(e,t){this._gl&&this.destroyCurrentFilter(),this._externalGL=!!t,this._gl=t||b(e),this._gl||this._eventEmiter.emit(v.ERROR,{code:k.WEBGL_INIT_ERROR,reason:"init webgl error"})}detachOutputCanvas(){this._gl&&(this.clear(),this.destroyCurrentFilter()),this._gl=null}setParams(e,t){let i=R[this._filterName];i&&(i.params=t),t&&Object.keys(t).forEach((i=>{t&&e&&(e[i]=t[i])}))}clear(){this._gl&&(this._gl.clearColor(0,0,0,0),this._gl.clear(this._gl.COLOR_BUFFER_BIT))}destroyCurrentFilter(e=!1){this._filter&&(this._filter.destroy(e),this._filter=void 0)}destroy(){Object.keys(R).forEach((e=>{R[e].params=void 0})),this.destroyCurrentFilter(this._externalGL)}get filters(){let e=[];return Object.keys(R).forEach((t=>{e.push({name:t,paramsInfo:R[t].paramsInfo,extra:R[t].extra})})),e}get currentFilterName(){return this._filterName}get currentFilter(){return this._filter}}class B{constructor(){this._video=null,this._isVideoPlaybackQualityAvailable=!1,this._sourceFPS=0,this._lastCalculateFPSFrames=0,this._lastCalculateFPSTime=0,this._lastRenderTime=0,this._frameDuration=Math.floor(40),this._hasOverriddenFPS=!1,this._skip=0,this._seeked=()=>{this._lastCalculateFPSTime=0,this._lastCalculateFPSFrames=0}}destroy(){this.detachMedia()}attachMedia(e){this.destroy();const t=this._video=e instanceof window.HTMLVideoElement?e:null;t&&(this._isVideoPlaybackQualityAvailable="function"==typeof t.getVideoPlaybackQuality,t.addEventListener("seeked",this._seeked))}detachMedia(){this._video&&this._video.removeEventListener("seeked",this._seeked),this._video=null}setFPS(e){e>0&&(this._hasOverriddenFPS=!0,this._frameDuration=Math.floor(1e3/e))}update(e){const t=this._video;if(t){let i=performance.now();if(!this._hasOverriddenFPS){let e=0;if(this._isVideoPlaybackQualityAvailable){const i=t.getVideoPlaybackQuality();e=i.totalVideoFrames+i.droppedVideoFrames}else e=t.webkitDecodedFrameCount||0+t.webkitDroppedFrameCount||0;if(this._lastCalculateFPSTime){if(i-this._lastCalculateFPSTime>=2e3){let t=(e-this._lastCalculateFPSFrames)/(i-this._lastCalculateFPSTime)*1e3;this._frameDuration=Math.floor(1e3/Math.max(25,this._sourceFPS,t)),this._sourceFPS=t,this._lastCalculateFPSFrames=e,this._lastCalculateFPSTime=i}}else this._lastCalculateFPSTime=i,this._lastCalculateFPSFrames=e}if(!this._lastRenderTime||i-this._lastRenderTime>=this._frameDuration-1&&this._skip<=0){this._lastRenderTime=i;let t=performance.now();e();let r=performance.now()-t;return this._skip=Math.ceil(r/this._frameDuration),!0}return this._skip--,!1}return this._sourceFPS=0,!1}}const U="render";class N{constructor(e,t){this._animation=!1,this._canvasWidth=0,this._canvasHeight=0,this._keepAliveFrame=new w,this.active=()=>{this._filterM.currentFilter&&this._filterM.currentFilter.active()},this.draw=()=>{let e=!1;const t=A.getPixelRatio();this._canvas&&this._isCanvasResized(this._canvas,t)&&(O.i(U,"refresh filter"),this._recordCanvasSize(t),this._refreshFilter(),this._filterM.clear(),e=!0),this._animation&&e?this._filterM.clear():(!this._filterM.currentFilter&&this._filterName&&this.select(this._filterName,!0),this._filterM.currentFilter&&this._filterM.currentFilter.draw())},this._loop=()=>{this._animation&&(this._fps.update(this.draw),requestAnimationFrame(this._loop))},this._onVisibilitychange=()=>{document.hidden?this._keepAliveFrame.start((()=>{this._animation&&this._fps.update(this.draw)})):this._keepAliveFrame.stop()},this._eventEmiter=e,this._config=t,this._filterM=new M(this._eventEmiter),this._filterName=this._filterM.currentFilterName,this._fps=new B}attachSource(e){this._filterM.attachSource(e),e instanceof HTMLVideoElement&&this._fps.attachMedia(e)}detachSource(){this._filterM.detachSource(),this._fps.detachMedia()}attachOutputCanvas(e,t){this._canvasWidth=0,this._canvasHeight=0,this._canvas=e,this._filterM.attachOutputCanvas(e,t),this._recordCanvasSize(),this._filterM.setInputSize(this._canvasWidth,this._canvasHeight)}detachOutputCanvas(){this._canvas=void 0,this._filterM.detachOutputCanvas()}select(e,t){O.i(U,"select",e,t),R[e]&&(this._filterName=e,t&&this._selectFilter(e))}setFPS(e){O.i(U,"setFPS",e),this._fps.setFPS(e)}setInputSize(e,t){O.i(U,"setInputSize",e,t),this._filterM.setInputSize(e,t)}start(){O.i(U,"start",this._animation),this._filterM.currentFilter||this._selectFilter(this._filterName),this._animation||(this._setAnimation(!0),requestAnimationFrame(this._loop))}end(e=!0){O.i(U,`end updateBeforeEnd:${e}`),this._setAnimation(!1),this._filterM.currentFilter&&(e&&this.draw(),this._filterM.destroyCurrentFilter())}pause(){O.i(U,"pause"),this._setAnimation(!1)}destroy(){O.i(U,"destroy"),this.end(),this._fps.destroy(),this._filterM.destroy(),this._keepAliveFrame.destroy(),document.removeEventListener("visibilitychange",this._onVisibilitychange)}setParams(e){O.i(U,"setParams"),this._filterM.currentFilter?this._filterM.setParams(this._filterM.currentFilter,e):this._filterParams=e}get isAnimation(){return this._animation}get currentFilter(){return this._filterM.currentFilter}get currentFilterName(){return this._animation?this._filterM.currentFilterName:this._filterName}get filters(){return this._filterM.filters}_isCanvasResized(e,t=1){t=t||1;const i=e.clientWidth*t|0,r=e.clientHeight*t|0;return!!(i&&r&&this._canvasWidth!==i||this._canvasHeight!==r)}_recordCanvasSize(e=1){this._canvas&&(this._canvasWidth=this._canvas.clientWidth*e|0,this._canvasHeight=this._canvas.clientHeight*e|0)}_refreshFilter(){this._filterM.currentFilter&&(this._filterM.destroyCurrentFilter(),this._selectFilter(this._filterM.currentFilterName))}_selectFilter(e){O.i(U,"_select",e,this._filterParams),this._filterM.select(e),this._filterParams&&this._filterM.currentFilter&&(this._filterM.setParams(this._filterM.currentFilter,this._filterParams),this._filterParams=void 0)}_setAnimation(e){this._animation=e,this._config.keepAlive&&(this._animation?document.addEventListener("visibilitychange",this._onVisibilitychange):(this._keepAliveFrame.stop(),document.removeEventListener("visibilitychange",this._onVisibilitychange)))}}class L{constructor(){this._queue=[],this._index=0,this._ready=!1,this._loaded=()=>{this._queue[this._index].img.onload=null,this._index++,this._loadNext()}}setQueue(e){this._queue=e}start(){this._loadNext()}destroy(){let e=this._queue[this._index];e&&(e.img.src="",e.img.removeEventListener("loadend",this._loaded)),this._queue=[],this._ready=!1}get ready(){return this._ready}_loadNext(){let e=this._queue[this._index];e?(e.img.onload=this._loaded,e.img.src=e.src):this._ready=!0}}class F{constructor(e){this._gl=null,this._filters=[],this._inputWidth=0,this._inputHeight=0,this._gl=e}addFilter(e){this._filters.length||(this._first=e),this._last=e,this._filters.push(e)}init(){}active(){}setInput(e){let t=e;for(let e=0;e<this._filters.length-1;e++){let i=this._filters[e];i.active(),t&&i.setInput(t),i.drawToFBO(),t=i.outputResource}this._last&&(this._last.active(),t&&this._last.setInput(t))}setInputSize(e){this._inputWidth=e.width,this._inputHeight=e.height,this._filters.forEach(((t,i)=>{0===i?t.setInputSize(e):this._gl&&t.setInputSize({width:this._gl.canvas.width,height:this._gl.canvas.height})}))}draw(){this._filters.forEach((e=>{e.active(),e.draw()}))}drawToFBO(){this._last&&this._last.drawToFBO()}get outputResource(){return this._last?this._last.outputResource:null}destroy(e=!1){this._filters.forEach((t=>{t.destroy(e)}))}}class V extends F{constructor(e){super(e),this._res=new L,this._resReady=!1}setInput(e){this._input=e,!this._resReady&&this._input&&this._res.ready&&this._setInput()}draw(){!this._resReady&&this._input&&this._res.ready&&this._setInput(),this._resReady&&super.draw()}destroy(e=!1){this._res.destroy(),super.destroy(e)}_setInput(){this._resReady=!0}}class H extends I{constructor(e){super(e),this._secondTexture=null,this._secondInputFramebuffer=null,this._inputTextureUniform2=null,this._secondInputType=T.texture,this._texcoordBuffer2=null,this._inputTextureCoordinateAttrib2=0,this._vertexShader="\nattribute vec4 position;\nattribute vec4 inputTextureCoordinate;\nattribute vec4 inputTextureCoordinate2;\n\nvarying vec2 textureCoordinate;\nvarying vec2 textureCoordinate2;\n\nvoid main()\n{\n    gl_Position = position;\n    textureCoordinate = inputTextureCoordinate.xy;\n    textureCoordinate2 = inputTextureCoordinate2.xy;\n}\n"}init(e){super.init(e);let t=this._gl;t&&(this._texcoordBuffer2=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this._texcoordBuffer2),t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,1,1,1,0,0,1,0]),t.STATIC_DRAW))}active(){super.active();let e=this._gl,t=this._program;e&&t&&(this._inputTextureCoordinateAttrib2=e.getAttribLocation(t,"inputTextureCoordinate2"),e.enableVertexAttribArray(this._inputTextureCoordinateAttrib2),e.bindBuffer(e.ARRAY_BUFFER,this._texcoordBuffer2),e.vertexAttribPointer(this._inputTextureCoordinateAttrib2,2,e.FLOAT,!1,0,0),this._inputTextureUniform2=e.getUniformLocation(t,"inputImageTexture2"))}setInput(e,t=0,i=!1){let r=this._gl;if(r)if(0===t)if(this._input=e,this._inputType=this._getInputType(e),this._inputType===T.texture){let e=this._input;this._texture=e.texture,r.bindFramebuffer(r.FRAMEBUFFER,e.framebuffer),r.bindTexture(r.TEXTURE_2D,e.texture),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,e.texture,0)}else this._texture=this._createAndSetupTexture(r),i&&(this._inputType=T.texImageSourceStatic,r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,1),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,this._input));else if(1===t)if(this._secondInput=e,this._secondInputType=this._getInputType(e),this._secondInputType===T.texture){let e=this._secondInput;this._secondTexture=e.texture,r.bindFramebuffer(r.FRAMEBUFFER,e.framebuffer),r.bindTexture(r.TEXTURE_2D,e.texture),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,e.texture,0)}else this._secondTexture=this._createAndSetupTexture(r),i&&(this._secondInputType=T.texImageSourceStatic,r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,0),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,this._secondInput))}draw(){let e=this._gl;e&&this._input&&this._secondInput&&(this._updateSize(),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,this._secondTexture),this._secondInputType===T.texImageSource?(e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,0),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,this._secondInput)):this._secondInputType===T.texture&&(e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,0),e.bindFramebuffer(e.FRAMEBUFFER,this._secondInput.framebuffer),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this._secondInput.texture,0)),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,this._texture),this._inputType===T.texImageSource?(e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,1),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,this._input)):this._inputType===T.texture&&(e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,0),e.bindFramebuffer(e.FRAMEBUFFER,this._input.framebuffer),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this._input.texture,0)),e.bindFramebuffer(e.FRAMEBUFFER,this._outputFBO),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT),e.uniform1i(this._inputTextureUniform,0),e.uniform1i(this._inputTextureUniform2,1),e.drawArrays(e.TRIANGLE_STRIP,0,4),this._outputFBO||(e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null)))}destroy(e=!1){this._gl&&(this._gl.disableVertexAttribArray(this._inputTextureCoordinateAttrib2),this._program&&this._gl.deleteProgram(this._program),this._texture&&this._inputType!==T.texture&&this._gl.deleteTexture(this._texture),this._secondTexture&&this._gl.deleteTexture(this._secondTexture),this._secondInputFramebuffer&&this._gl.deleteFramebuffer(this._secondInputFramebuffer),this._texcoordBuffer2&&this._gl.deleteBuffer(this._texcoordBuffer2)),super.destroy(e)}}class j extends H{constructor(e){super(e),this._thirdTexture=null,this._thirdInputFramebuffer=null,this._inputTextureUniform3=null,this._thirdInputType=T.texture,this._texcoordBuffer3=null,this._inputTextureCoordinateAttrib3=0,this._vertexShader="\nattribute vec4 position;\nattribute vec4 inputTextureCoordinate;\nattribute vec4 inputTextureCoordinate2;\nattribute vec4 inputTextureCoordinate3;\n\nvarying vec2 textureCoordinate;\nvarying vec2 textureCoordinate2;\nvarying vec2 textureCoordinate3;\n\nvoid main()\n{\n    gl_Position = position;\n    textureCoordinate = inputTextureCoordinate.xy;\n    textureCoordinate2 = inputTextureCoordinate2.xy;\n    textureCoordinate3 = inputTextureCoordinate3.xy;\n}\n"}init(e){super.init(e);let t=this._gl;t&&(this._texcoordBuffer3=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this._texcoordBuffer3),t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,1,1,1,0,0,1,0]),t.STATIC_DRAW))}active(){super.active();let e=this._gl,t=this._program;e&&t&&(this._inputTextureCoordinateAttrib3=e.getAttribLocation(t,"inputTextureCoordinate3"),e.enableVertexAttribArray(this._inputTextureCoordinateAttrib3),e.bindBuffer(e.ARRAY_BUFFER,this._texcoordBuffer3),e.vertexAttribPointer(this._inputTextureCoordinateAttrib3,2,e.FLOAT,!1,0,0),this._inputTextureUniform3=e.getUniformLocation(t,"inputImageTexture3"))}setInput(e,t=0,i=!1){super.setInput(e,t);let r=this._gl;if(r&&2===t)if(this._thirdInput=e,this._thirdInputType=this._getInputType(e),this._thirdInputType===T.texture){let e=this._thirdInput;this._thirdTexture=e.texture,r.bindFramebuffer(r.FRAMEBUFFER,e.framebuffer),r.bindTexture(r.TEXTURE_2D,e.texture),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,e.texture,0)}else this._thirdTexture=this._createAndSetupTexture(r),i&&(this._thirdInputType=T.texImageSourceStatic,r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,0),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,this._thirdInput))}draw(){let e=this._gl;e&&this._input&&this._thirdInput&&(this._updateSize(),e.activeTexture(e.TEXTURE2),e.bindTexture(e.TEXTURE_2D,this._thirdTexture),this._thirdInputType===T.texImageSource?(e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,0),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,this._thirdInput)):this._thirdInputType===T.texture&&(e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,0),e.bindFramebuffer(e.FRAMEBUFFER,this._thirdInput.framebuffer),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this._thirdInput.texture,0)),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,this._secondTexture),this._secondInputType===T.texImageSource?(e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,0),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,this._secondInput)):this._secondInputType===T.texture&&(e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,0),e.bindFramebuffer(e.FRAMEBUFFER,this._secondInput.framebuffer),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this._secondInput.texture,0)),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,this._texture),this._inputType===T.texImageSource?(e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,1),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,this._input)):this._inputType===T.texture&&(e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,0),e.bindFramebuffer(e.FRAMEBUFFER,this._input.framebuffer),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this._input.texture,0)),e.bindFramebuffer(e.FRAMEBUFFER,this._outputFBO),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT),e.uniform1i(this._inputTextureUniform,0),e.uniform1i(this._inputTextureUniform2,1),e.uniform1i(this._inputTextureUniform3,2),e.drawArrays(e.TRIANGLE_STRIP,0,4),this._outputFBO||(e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null)))}destroy(e=!1){this._gl&&(this._gl.disableVertexAttribArray(this._inputTextureCoordinateAttrib3),this._thirdTexture&&this._gl.deleteTexture(this._thirdTexture),this._thirdInputFramebuffer&&this._gl.deleteFramebuffer(this._thirdInputFramebuffer),this._texcoordBuffer3&&this._gl.deleteBuffer(this._texcoordBuffer3)),super.destroy(e)}}class G extends I{constructor(e){super(e),this._secondProgram=null,this._secondPositionBuffer=null,this._secondTexcoordBuffer=null,this._secondTexture=null,this._secondInputFramebuffer=null,this._secondInputTextureUniform=null,this._secondInputTextureUniform2=null,this._secondVertexShader="",this._secondFragmentShader="",this._secondVShader=null,this._secondFShader=null,this._secondPositionAttrib=0,this._secondInputTextureCoordinateAttrib=0}init(e){super.init(e),e&&(this._secondVertexShader=e.secondVertex||this._secondVertexShader,this._secondFragmentShader=e.secondFragment||this._secondFragmentShader),this._gl&&this._initSecond()}active(){super.active();let e=this._gl;e&&this._program&&this._secondProgram&&(this._secondInputTextureUniform=e.getUniformLocation(this._program,"inputImageTexture"),this._secondInputTextureUniform2=e.getUniformLocation(this._program,"inputImageTexture2"),this._secondPositionAttrib=e.getAttribLocation(this._secondProgram,"position"),this._secondInputTextureCoordinateAttrib=e.getAttribLocation(this._secondProgram,"inputTextureCoordinate"),e.enableVertexAttribArray(this._secondPositionAttrib),e.bindBuffer(e.ARRAY_BUFFER,this._positionBuffer),e.vertexAttribPointer(this._secondPositionAttrib,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(this._secondInputTextureCoordinateAttrib),e.bindBuffer(e.ARRAY_BUFFER,this._texcoordBuffer),e.vertexAttribPointer(this._secondInputTextureCoordinateAttrib,2,e.FLOAT,!1,0,0))}setInput(e,t=0,i=!1){let r=this._gl;r&&(super.setInput(e,t,i),r.bindTexture(r.TEXTURE_2D,this._secondTexture),this._secondInputFramebuffer=r.createFramebuffer(),r.bindFramebuffer(r.FRAMEBUFFER,this._secondInputFramebuffer),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.canvas.width,r.canvas.height,0,r.RGBA,r.UNSIGNED_BYTE,null),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,this._secondTexture,0),r.bindFramebuffer(r.FRAMEBUFFER,null))}draw(){let e=this._gl;e&&this._program&&this._secondProgram&&(this._updateSize(),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT),e.useProgram(this._program),this._setUniformsForProgramAtIndex(0),e.bindTexture(e.TEXTURE_2D,this._texture),this._inputType===T.texImageSource?(e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,1),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,this._input)):this._inputType===T.texture&&e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,0),e.bindFramebuffer(e.FRAMEBUFFER,this._secondInputFramebuffer),e.drawArrays(e.TRIANGLE_STRIP,0,4),e.useProgram(this._secondProgram),this._setUniformsForProgramAtIndex(1),e.bindTexture(e.TEXTURE_2D,this._secondTexture),e.bindFramebuffer(e.FRAMEBUFFER,this._outputFBO),e.drawArrays(e.TRIANGLE_STRIP,0,4),this._output&&(e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null)))}destroy(e=!1){this._gl&&(this._gl.disableVertexAttribArray(this._secondPositionAttrib),this._gl.disableVertexAttribArray(this._secondInputTextureCoordinateAttrib),this._secondProgram&&this._gl.deleteProgram(this._secondProgram),this._secondPositionBuffer&&this._gl.deleteBuffer(this._secondPositionBuffer),this._secondTexcoordBuffer&&this._gl.deleteBuffer(this._secondTexcoordBuffer),this._secondTexture&&this._gl.deleteTexture(this._secondTexture),this._secondInputFramebuffer&&this._gl.deleteFramebuffer(this._secondInputFramebuffer),this._secondVShader&&this._gl.deleteShader(this._secondVShader),this._secondFShader&&this._gl.deleteShader(this._secondFShader)),super.destroy(e)}_initSecond(){let e=this._gl;if(!e)return;let t=S(e,this._secondVertexShader||this._vertexShader,this._secondFragmentShader||this._fragmentShader);this._secondVShader=t.vertexShader,this._secondFShader=t.fragmentShader,this._secondProgram=t.program,this._secondProgram&&(this._secondTexture=this._createAndSetupTexture(e))}_setUniformsForProgramAtIndex(e){}}class z extends G{constructor(e){super(e),this._verticalPassTexelWidthOffsetUniform=null,this._verticalPassTexelHeightOffsetUniform=null,this._horizontalPassTexelWidthOffsetUniform=null,this._horizontalPassTexelHeightOffsetUniform=null,this._verticalPassTexelWidthOffset=0,this._verticalPassTexelHeightOffset=0,this._horizontalPassTexelWidthOffset=0,this._horizontalPassTexelHeightOffset=0,this._verticalTexelSpacing=0,this._horizontalTexelSpacing=0,this._verticalTexelSpacing=0,this._horizontalTexelSpacing=0}active(){super.active(),this._gl&&this._program&&this._secondProgram&&(this._verticalPassTexelWidthOffsetUniform=this._gl.getUniformLocation(this._program,"texelWidthOffset"),this._verticalPassTexelHeightOffsetUniform=this._gl.getUniformLocation(this._program,"texelHeightOffset"),this._horizontalPassTexelWidthOffsetUniform=this._gl.getUniformLocation(this._secondProgram,"texelWidthOffset"),this._horizontalPassTexelHeightOffsetUniform=this._gl.getUniformLocation(this._secondProgram,"texelHeightOffset"),this.verticalTexelSpacing=1,this.horizontalTexelSpacing=1)}setInputSize(e){this._inputWidth=e.width,this._inputHeight=e.height,this._verticalPassTexelWidthOffset=0,this._verticalPassTexelHeightOffset=this._verticalTexelSpacing/this._inputHeight,this._horizontalPassTexelWidthOffset=this._horizontalTexelSpacing/this._inputWidth,this._horizontalPassTexelHeightOffset=0}set verticalTexelSpacing(e){this._verticalTexelSpacing=e,this._inputWidth&&this._inputHeight&&this.setInputSize({width:this._inputWidth,height:this._inputHeight})}set horizontalTexelSpacing(e){this._horizontalTexelSpacing=e,this._inputWidth&&this._inputHeight&&this.setInputSize({width:this._inputWidth,height:this._inputHeight})}_setUniformsForProgramAtIndex(e){this._gl&&(0===e?(this._gl.uniform1f(this._verticalPassTexelWidthOffsetUniform,this._verticalPassTexelWidthOffset),this._gl.uniform1f(this._verticalPassTexelHeightOffsetUniform,this._verticalPassTexelHeightOffset),this._gl.viewport(0,0,this._gl.canvas.width,this._gl.canvas.height)):(this._gl.uniform1f(this._horizontalPassTexelWidthOffsetUniform,this._horizontalPassTexelWidthOffset),this._gl.uniform1f(this._horizontalPassTexelHeightOffsetUniform,this._horizontalPassTexelHeightOffset),this._updateSize()))}}class q extends z{constructor(e){super(e),this._texelSpacingMultiplier=1,this._blurRadiusInPixels=2,this._vertexShader=this._secondVertexShader=this._vertexShaderForOptimizedBlurOfRadius(4,2),this._fragmentShader=this._secondFragmentShader=this._fragmentShaderForOptimizedBlurOfRadius(4,2)}_vertexShaderForOptimizedBlurOfRadius(e,t){if(e<1)return y;let i=[],r=0;for(let n=0;n<e+1;n++)i[n]=1/Math.sqrt(2*Math.PI*Math.pow(t,2))*Math.exp(-Math.pow(n,2)/(2*Math.pow(t,2))),r+=0==n?i[n]:2*i[n];for(let t=0;t<e+1;t++)i[t]=i[t]/r;let n=Math.min(e/2+e%2,7),s=[];for(let e=0;e<n;e++){let t=i[2*e+1],r=i[2*e+2],n=t+r;s[e]=(t*(2*e+1)+r*(2*e+2))/n}let a=`\n        attribute vec4 position;\n        attribute vec4 inputTextureCoordinate;\n\n        uniform float texelWidthOffset;\n        uniform float texelHeightOffset;\n\n        varying vec2 blurCoordinates[${1+2*n}];\n\n        void main() {\n            gl_Position = position;\n            vec2 singleStepOffset = vec2(texelWidthOffset, texelHeightOffset);\n            blurCoordinates[0] = inputTextureCoordinate.xy;\n        `;for(let e=0;e<n;e++)a+=`\n            blurCoordinates[${2*e+1}] = inputTextureCoordinate.xy + singleStepOffset * ${s[e]};\n            blurCoordinates[${2*e+2}] = inputTextureCoordinate.xy - singleStepOffset * ${s[e]};\n            `;return a+="}",a}_fragmentShaderForOptimizedBlurOfRadius(e,t){if(e<1)return _;let i=[],r=0;for(let n=0;n<e+1;n++)i[n]=1/Math.sqrt(2*Math.PI*Math.pow(t,2))*Math.exp(-Math.pow(n,2)/(2*Math.pow(t,2))),r+=0==n?i[n]:2*i[n];for(let t=0;t<e+1;t++)i[t]=i[t]/r;let n=Math.min(e/2+e%2,7),s=e/2+e%2,a=`\n    uniform sampler2D inputImageTexture;\n    uniform highp float texelWidthOffset;\n    uniform highp float texelHeightOffset;\n\n    varying highp vec2 blurCoordinates[${1+2*n}];\n\n    void main() {\n        lowp vec4 sum = vec4(0.0);\n    `;a+=`\n        sum += texture2D(inputImageTexture, blurCoordinates[0]) * ${i[0]};`;for(let e=0;e<n;e++){let t=i[2*e+1]+i[2*e+2];a+=`\n        sum += texture2D(inputImageTexture, blurCoordinates[${2*e+1}]) * ${t};`,a+=`\n        sum += texture2D(inputImageTexture, blurCoordinates[${2*e+2}]) * ${t};`}if(s>n){a+="highp vec2 singleStepOffset = vec2(texelWidthOffset, texelHeightOffset);\n";for(let e=n;e<s;e++){let t=i[2*e+1],r=i[2*e+2],n=t+r,s=(t*(2*e+1)+r*(2*e+2))/n;a+=`\n        sum += texture2D(inputImageTexture, blurCoordinates[0] + singleStepOffset * ${s}) * ${n};\n        sum += texture2D(inputImageTexture, blurCoordinates[0] - singleStepOffset * ${s}) * ${n};\n                `}}return a+="\n        gl_FragColor = sum;\n    }",a}set texelSpacingMultiplier(e){this._texelSpacingMultiplier=e,this.horizontalTexelSpacing=this._texelSpacingMultiplier,this.verticalTexelSpacing=this._texelSpacingMultiplier}get texelSpacingMultiplier(){return this._texelSpacingMultiplier}set blurRadiusInPixels(e){if(Math.round(e)!==this._blurRadiusInPixels){this._blurRadiusInPixels=Math.round(e);let t=0;if(this._blurRadiusInPixels>=1){let e=1/256;t=Math.floor(Math.sqrt(-2*Math.pow(this._blurRadiusInPixels,2)*Math.log(e*Math.sqrt(2*Math.PI*Math.pow(this._blurRadiusInPixels,2))))),t+=t%2}let i=this._vertexShaderForOptimizedBlurOfRadius(t,this._blurRadiusInPixels),r=this._fragmentShaderForOptimizedBlurOfRadius(t,this._blurRadiusInPixels);this._switchToVertexShader(i,r)}}get blurRadiusInPixels(){return this._blurRadiusInPixels}_switchToVertexShader(e,t){this._vertexShader=this._secondVertexShader=e,this._fragmentShader=this._secondFragmentShader=t,this.init(),this.active()}}class Y extends q{constructor(e){super(e),this._distanceNormalizationFactor=8,this._firstDistanceNormalizationFactorUniform=null,this._secondDistanceNormalizationFactorUniform=null,this._vertexShader=this._secondVertexShader="\nattribute vec4 position;\nattribute vec4 inputTextureCoordinate;\n\nconst int GAUSSIAN_SAMPLES = 9;\n\nuniform float texelWidthOffset;\nuniform float texelHeightOffset;\n\nvarying vec2 textureCoordinate;\nvarying vec2 blurCoordinates[GAUSSIAN_SAMPLES];\n\nvoid main()\n{\n    gl_Position = position;\n    textureCoordinate = inputTextureCoordinate.xy;\n    \n    // Calculate the positions for the blur\n    int multiplier = 0;\n    vec2 blurStep;\n    vec2 singleStepOffset = vec2(texelWidthOffset, texelHeightOffset);\n    \n    for (int i = 0; i < GAUSSIAN_SAMPLES; i++)\n    {\n        multiplier = (i - ((GAUSSIAN_SAMPLES - 1) / 2));\n        // Blur in x (horizontal)\n        blurStep = float(multiplier) * singleStepOffset;\n        blurCoordinates[i] = inputTextureCoordinate.xy + blurStep;\n    }\n}\n",this._fragmentShader=this._secondFragmentShader="\nuniform sampler2D inputImageTexture;\n \nconst lowp int GAUSSIAN_SAMPLES = 9;\n\nvarying highp vec2 textureCoordinate;\nvarying highp vec2 blurCoordinates[GAUSSIAN_SAMPLES];\n\nuniform mediump float distanceNormalizationFactor;\n\nvoid main()\n{\n    lowp vec4 centralColor;\n    lowp float gaussianWeightTotal;\n    lowp vec4 sum;\n    lowp vec4 sampleColor;\n    lowp float distanceFromCentralColor;\n    lowp float gaussianWeight;\n    \n    centralColor = texture2D(inputImageTexture, blurCoordinates[4]);\n    gaussianWeightTotal = 0.18;\n    sum = centralColor * 0.18;\n    \n    sampleColor = texture2D(inputImageTexture, blurCoordinates[0]);\n    distanceFromCentralColor = min(distance(centralColor, sampleColor) * distanceNormalizationFactor, 1.0);\n    gaussianWeight = 0.05 * (1.0 - distanceFromCentralColor);\n    gaussianWeightTotal += gaussianWeight;\n    sum += sampleColor * gaussianWeight;\n\n    sampleColor = texture2D(inputImageTexture, blurCoordinates[1]);\n    distanceFromCentralColor = min(distance(centralColor, sampleColor) * distanceNormalizationFactor, 1.0);\n    gaussianWeight = 0.09 * (1.0 - distanceFromCentralColor);\n    gaussianWeightTotal += gaussianWeight;\n    sum += sampleColor * gaussianWeight;\n\n    sampleColor = texture2D(inputImageTexture, blurCoordinates[2]);\n    distanceFromCentralColor = min(distance(centralColor, sampleColor) * distanceNormalizationFactor, 1.0);\n    gaussianWeight = 0.12 * (1.0 - distanceFromCentralColor);\n    gaussianWeightTotal += gaussianWeight;\n    sum += sampleColor * gaussianWeight;\n\n    sampleColor = texture2D(inputImageTexture, blurCoordinates[3]);\n    distanceFromCentralColor = min(distance(centralColor, sampleColor) * distanceNormalizationFactor, 1.0);\n    gaussianWeight = 0.15 * (1.0 - distanceFromCentralColor);\n    gaussianWeightTotal += gaussianWeight;\n    sum += sampleColor * gaussianWeight;\n\n    sampleColor = texture2D(inputImageTexture, blurCoordinates[5]);\n    distanceFromCentralColor = min(distance(centralColor, sampleColor) * distanceNormalizationFactor, 1.0);\n    gaussianWeight = 0.15 * (1.0 - distanceFromCentralColor);\n    gaussianWeightTotal += gaussianWeight;\n    sum += sampleColor * gaussianWeight;\n\n    sampleColor = texture2D(inputImageTexture, blurCoordinates[6]);\n    distanceFromCentralColor = min(distance(centralColor, sampleColor) * distanceNormalizationFactor, 1.0);\n    gaussianWeight = 0.12 * (1.0 - distanceFromCentralColor);\n    gaussianWeightTotal += gaussianWeight;\n    sum += sampleColor * gaussianWeight;\n\n    sampleColor = texture2D(inputImageTexture, blurCoordinates[7]);\n    distanceFromCentralColor = min(distance(centralColor, sampleColor) * distanceNormalizationFactor, 1.0);\n    gaussianWeight = 0.09 * (1.0 - distanceFromCentralColor);\n    gaussianWeightTotal += gaussianWeight;\n    sum += sampleColor * gaussianWeight;\n\n    sampleColor = texture2D(inputImageTexture, blurCoordinates[8]);\n    distanceFromCentralColor = min(distance(centralColor, sampleColor) * distanceNormalizationFactor, 1.0);\n    gaussianWeight = 0.05 * (1.0 - distanceFromCentralColor);\n    gaussianWeightTotal += gaussianWeight;\n    sum += sampleColor * gaussianWeight;\n    \n    gl_FragColor = sum / gaussianWeightTotal;\n}\n"}active(){super.active(),this._program&&this._gl&&(this._firstDistanceNormalizationFactorUniform=this._gl.getUniformLocation(this._program,"distanceNormalizationFactor"),this._secondDistanceNormalizationFactorUniform=this._gl.getUniformLocation(this._program,"distanceNormalizationFactor"),this.distanceNormalizationFactor=this._distanceNormalizationFactor,this.texelSpacingMultiplier=4)}set distanceNormalizationFactor(e){this._distanceNormalizationFactor=e}_setUniformsForProgramAtIndex(e){super._setUniformsForProgramAtIndex(e),this._gl&&this._isActivated&&(0===e?this._gl.uniform1f(this._firstDistanceNormalizationFactorUniform,this._distanceNormalizationFactor):this._gl.uniform1f(this._secondDistanceNormalizationFactorUniform,this._distanceNormalizationFactor))}}class K extends I{constructor(e){super(e),this._texelWidthUniform=null,this._texelHeightUniform=null,this._upperThresholdUniform=null,this._lowerThresholdUniform=null,this._texelWidth=0,this._texelHeight=0,this._upperThreshold=.5,this._lowerThreshold=.1,this._hasOverriddenImageSizeFactor=!1,this._fragmentShader="\nprecision mediump float;\n \nvarying highp vec2 textureCoordinate;\n\nuniform sampler2D inputImageTexture;\nuniform highp float texelWidth; \nuniform highp float texelHeight; \nuniform mediump float upperThreshold; \nuniform mediump float lowerThreshold; \n\nvoid main()\n{\n    vec3 currentGradientAndDirection = texture2D(inputImageTexture, textureCoordinate).rgb;\n    vec2 gradientDirection = ((currentGradientAndDirection.gb * 2.0) - 1.0) * vec2(texelWidth, texelHeight);\n    \n    float firstSampledGradientMagnitude = texture2D(inputImageTexture, textureCoordinate + gradientDirection).r;\n    float secondSampledGradientMagnitude = texture2D(inputImageTexture, textureCoordinate - gradientDirection).r;\n    \n    float multiplier = step(firstSampledGradientMagnitude, currentGradientAndDirection.r);\n    multiplier = multiplier * step(secondSampledGradientMagnitude, currentGradientAndDirection.r);\n    \n    float thresholdCompliance = smoothstep(lowerThreshold, upperThreshold, currentGradientAndDirection.r);\n    multiplier = multiplier * thresholdCompliance;\n    \n    gl_FragColor = vec4(multiplier, multiplier, multiplier, 1.0);\n}\n"}active(){super.active(),this._program&&this._gl&&(this._texelWidthUniform=this._gl.getUniformLocation(this._program,"texelWidth"),this._texelHeightUniform=this._gl.getUniformLocation(this._program,"texelHeight"),this._upperThresholdUniform=this._gl.getUniformLocation(this._program,"upperThreshold"),this._lowerThresholdUniform=this._gl.getUniformLocation(this._program,"lowerThreshold"),this.upperThreshold=this._upperThreshold,this.lowerThreshold=this._lowerThreshold)}setInputSize(e){super.setInputSize(e),this._hasOverriddenImageSizeFactor||(this._texelWidth=.5/this._inputWidth,this._texelHeight=.5/this._inputHeight,this._gl&&this._isActivated&&(this._gl.uniform1f(this._texelWidthUniform,this._texelWidth),this._gl.uniform1f(this._texelHeightUniform,this._texelHeight)))}set texelWidth(e){this._texelWidth=e,this._hasOverriddenImageSizeFactor=!0,this._gl&&this._isActivated&&this._gl.uniform1f(this._texelWidthUniform,e)}set texelHeight(e){this._texelHeight=e,this._hasOverriddenImageSizeFactor=!0,this._gl&&this._isActivated&&this._gl.uniform1f(this._texelHeightUniform,e)}set lowerThreshold(e){this._lowerThreshold=e,this._gl&&this._isActivated&&this._gl.uniform1f(this._lowerThresholdUniform,e)}get lowerThreshold(){return this._lowerThreshold}set upperThreshold(e){this._upperThreshold=e,this._gl&&this._isActivated&&this._gl.uniform1f(this._upperThresholdUniform,e)}get upperThreshold(){return this._upperThreshold}}class W extends I{constructor(e){super(e),this._texelWidthUniform=null,this._texelHeightUniform=null,this._texelWidth=0,this._texelHeight=0,this._hasOverriddenImageSizeFactor=!1,this._vertexShader="\nattribute vec4 position;\nattribute vec4 inputTextureCoordinate;\n\nuniform float texelWidth;\nuniform float texelHeight; \n\nvarying vec2 textureCoordinate;\nvarying vec2 leftTextureCoordinate;\nvarying vec2 rightTextureCoordinate;\n\nvarying vec2 topTextureCoordinate;\nvarying vec2 topLeftTextureCoordinate;\nvarying vec2 topRightTextureCoordinate;\n\nvarying vec2 bottomTextureCoordinate;\nvarying vec2 bottomLeftTextureCoordinate;\nvarying vec2 bottomRightTextureCoordinate;\n\nvoid main() {\n    gl_Position = position;\n    vec2 widthStep = vec2(texelWidth, 0.0);\n    vec2 heightStep = vec2(0.0, texelHeight);\n    vec2 widthHeightStep = vec2(texelWidth, texelHeight);\n    vec2 widthNegativeHeightStep = vec2(texelWidth, -texelHeight);\n\n    textureCoordinate = inputTextureCoordinate.xy;\n    leftTextureCoordinate = inputTextureCoordinate.xy - widthStep;\n    rightTextureCoordinate = inputTextureCoordinate.xy + widthStep;\n\n    topTextureCoordinate = inputTextureCoordinate.xy - heightStep;\n    topLeftTextureCoordinate = inputTextureCoordinate.xy - widthHeightStep;\n    topRightTextureCoordinate = inputTextureCoordinate.xy + widthNegativeHeightStep;\n\n    bottomTextureCoordinate = inputTextureCoordinate.xy + heightStep;\n    bottomLeftTextureCoordinate = inputTextureCoordinate.xy - widthNegativeHeightStep;\n    bottomRightTextureCoordinate = inputTextureCoordinate.xy + widthHeightStep;\n}\n"}active(){super.active(),this._program&&this._gl&&(this._texelWidthUniform=this._gl.getUniformLocation(this._program,"texelWidth"),this._texelHeightUniform=this._gl.getUniformLocation(this._program,"texelHeight"),this._gl.uniform1f(this._texelWidthUniform,this._texelWidth),this._gl.uniform1f(this._texelHeightUniform,this._texelHeight))}setInputSize(e){super.setInputSize(e),this._hasOverriddenImageSizeFactor||(this._texelWidth=1/this._inputWidth,this._texelHeight=1/this._inputHeight,this._gl&&this._isActivated&&(this._gl.uniform1f(this._texelWidthUniform,this._texelWidth),this._gl.uniform1f(this._texelHeightUniform,this._texelHeight)))}set texelWidth(e){this._texelWidth=e,this._hasOverriddenImageSizeFactor=!0,this._gl&&this._isActivated&&this._gl.uniform1f(this._texelWidthUniform,e)}get texelWidth(){return this._texelWidth}set texelHeight(e){this._texelHeight=e,this._hasOverriddenImageSizeFactor=!0,this._gl&&this._isActivated&&this._gl.uniform1f(this._texelHeightUniform,e)}get texelHeight(){return this._texelHeight}}class Q extends W{constructor(e){super(e),this._fragmentShader="\nprecision mediump float;\n \nvarying vec2 textureCoordinate;\nvarying vec2 leftTextureCoordinate;\nvarying vec2 rightTextureCoordinate;\n\nvarying vec2 topTextureCoordinate;\nvarying vec2 topLeftTextureCoordinate;\nvarying vec2 topRightTextureCoordinate;\n\nvarying vec2 bottomTextureCoordinate;\nvarying vec2 bottomLeftTextureCoordinate;\nvarying vec2 bottomRightTextureCoordinate;\n\nuniform sampler2D inputImageTexture;\n\nvoid main()\n{\n    float bottomLeftIntensity = texture2D(inputImageTexture, bottomLeftTextureCoordinate).r;\n    float topRightIntensity = texture2D(inputImageTexture, topRightTextureCoordinate).r;\n    float topLeftIntensity = texture2D(inputImageTexture, topLeftTextureCoordinate).r;\n    float bottomRightIntensity = texture2D(inputImageTexture, bottomRightTextureCoordinate).r;\n    float leftIntensity = texture2D(inputImageTexture, leftTextureCoordinate).r;\n    float rightIntensity = texture2D(inputImageTexture, rightTextureCoordinate).r;\n    float bottomIntensity = texture2D(inputImageTexture, bottomTextureCoordinate).r;\n    float topIntensity = texture2D(inputImageTexture, topTextureCoordinate).r;\n    \n    vec2 gradientDirection;\n    gradientDirection.x = -bottomLeftIntensity - 2.0 * leftIntensity - topLeftIntensity + bottomRightIntensity + 2.0 * rightIntensity + topRightIntensity;\n    gradientDirection.y = -topLeftIntensity - 2.0 * topIntensity - topRightIntensity + bottomLeftIntensity + 2.0 * bottomIntensity + bottomRightIntensity;\n    \n    float gradientMagnitude = length(gradientDirection);\n    vec2 normalizedDirection = normalize(gradientDirection);\n    normalizedDirection = sign(normalizedDirection) * floor(abs(normalizedDirection) + 0.617316); // Offset by 1-sin(pi/8) to set to 0 if near axis, 1 if away\n    normalizedDirection = (normalizedDirection + 1.0) * 0.5; // Place -1.0 - 1.0 within 0 - 1.0\n    \n    gl_FragColor = vec4(gradientMagnitude, normalizedDirection.x, normalizedDirection.y, 1.0);\n}\n"}}class J extends I{constructor(e){super(e),this._fragmentShader="\nprecision highp float;\n\nvarying vec2 textureCoordinate;\n\nuniform sampler2D inputImageTexture;\n\nconst highp vec3 W = vec3(0.2125, 0.7154, 0.0721);\n\nvoid main() {\n    lowp vec4 textureColor = texture2D(inputImageTexture, textureCoordinate);\n    float luminance = dot(textureColor.rgb, W);\n    \n    gl_FragColor = vec4(vec3(luminance), textureColor.a);\n}\n"}}class X extends q{_vertexShaderForOptimizedBlurOfRadius(e,t){if(e<1)return y;let i=[],r=0;for(let n=0;n<e+1;n++)i[n]=1/Math.sqrt(2*Math.PI*Math.pow(t,2))*Math.exp(-Math.pow(n,2)/(2*Math.pow(t,2))),r+=0==n?i[n]:2*i[n];for(let t=0;t<e+1;t++)i[t]=i[t]/r;let n=Math.min(e/2+e%2,7),s=[];for(let e=0;e<n;e++){let t=i[2*e+1],r=i[2*e+2],n=t+r;s[e]=(t*(2*e+1)+r*(2*e+2))/n}let a=`\n        attribute vec4 position;\n        attribute vec4 inputTextureCoordinate;\n\n        uniform float texelWidthOffset;\n        uniform float texelHeightOffset;\n\n        varying vec2 blurCoordinates[${1+2*n}];\n\n        void main() {\n            gl_Position = position;\n            vec2 singleStepOffset = vec2(texelWidthOffset, texelHeightOffset);\n            blurCoordinates[0] = inputTextureCoordinate.xy;\n        `;for(let e=0;e<n;e++)a+=`\n                blurCoordinates[${2*e+1}] = inputTextureCoordinate.xy + singleStepOffset * ${s[e]};\n                blurCoordinates[${2*e+2}] = inputTextureCoordinate.xy - singleStepOffset * ${s[e]};\n                `;return a+="}",a}_fragmentShaderForOptimizedBlurOfRadius(e,t){if(e<1)return _;let i=[],r=0;for(let n=0;n<e+1;n++)i[n]=1/Math.sqrt(2*Math.PI*Math.pow(t,2))*Math.exp(-Math.pow(n,2)/(2*Math.pow(t,2))),r+=0==n?i[n]:2*i[n];for(let t=0;t<e+1;t++)i[t]=i[t]/r;let n=Math.min(e/2+e%2,7),s=e/2+e%2,a=`\n        uniform sampler2D inputImageTexture;\n        uniform highp float texelWidthOffset;\n        uniform highp float texelHeightOffset;\n\n        varying highp vec2 blurCoordinates[${1+2*n}];\n\n        void main() {\n            lowp float sum = 0.0;\n            sum += texture2D(inputImageTexture, blurCoordinates[0]).r * ${i[0]};\n        `;for(let e=0;e<n;e++){let t=i[2*e+1]+i[2*e+2];a+=`\n            sum += texture2D(inputImageTexture, blurCoordinates[${2*e+1}]).r * ${t};\n            sum += texture2D(inputImageTexture, blurCoordinates[${2*e+2}]).r * ${t};\n            `}if(s>n){a+="\n            highp vec2 singleStepOffset = vec2(texelWidthOffset, texelHeightOffset);\n            ";for(let e=n;e<s;e++){let t=i[2*e+1],r=i[2*e+2],n=t+r,s=(t*(2*e+1)+r*(2*e+2))/n;a+=`\n            sum += texture2D(inputImageTexture, blurCoordinates[0] + singleStepOffset * ${s}).r * ${n};\n            sum += texture2D(inputImageTexture, blurCoordinates[0] - singleStepOffset * ${s}).r * ${n};\n                `}}return a+="\n            gl_FragColor = vec4(sum, sum, sum, 1.0);\n        }",a}}class Z extends W{constructor(e){super(e),this._fragmentShader="\nprecision lowp float;\n \nvarying vec2 textureCoordinate;\nvarying vec2 leftTextureCoordinate;\nvarying vec2 rightTextureCoordinate;\n\nvarying vec2 topTextureCoordinate;\nvarying vec2 topLeftTextureCoordinate;\nvarying vec2 topRightTextureCoordinate;\n\nvarying vec2 bottomTextureCoordinate;\nvarying vec2 bottomLeftTextureCoordinate;\nvarying vec2 bottomRightTextureCoordinate;\n\nuniform sampler2D inputImageTexture;\n\nvoid main()\n{\n    float bottomLeftIntensity = texture2D(inputImageTexture, bottomLeftTextureCoordinate).r;\n    float topRightIntensity = texture2D(inputImageTexture, topRightTextureCoordinate).r;\n    float topLeftIntensity = texture2D(inputImageTexture, topLeftTextureCoordinate).r;\n    float bottomRightIntensity = texture2D(inputImageTexture, bottomRightTextureCoordinate).r;\n    float leftIntensity = texture2D(inputImageTexture, leftTextureCoordinate).r;\n    float rightIntensity = texture2D(inputImageTexture, rightTextureCoordinate).r;\n    float bottomIntensity = texture2D(inputImageTexture, bottomTextureCoordinate).r;\n    float topIntensity = texture2D(inputImageTexture, topTextureCoordinate).r;\n    float centerIntensity = texture2D(inputImageTexture, textureCoordinate).r;\n    \n    float pixelIntensitySum = bottomLeftIntensity + topRightIntensity + topLeftIntensity + bottomRightIntensity + leftIntensity + rightIntensity + bottomIntensity + topIntensity + centerIntensity;\n    float sumTest = step(1.5, pixelIntensitySum);\n    float pixelTest = step(0.01, centerIntensity);\n         \n    gl_FragColor = vec4(vec3(sumTest * pixelTest), 1.0);\n}\n"}}class $ extends F{constructor(e){super(e),this._blurRadiusInPixels=2,this._blurTexelSpacingMultiplier=1,this._upperThreshold=.4,this._lowerThreshold=.1,this._texelWidth=0,this._texelHeight=0,this._luminanceFilter=new J(e),this._blurFilter=new X(e),this._edgeDetectionFilter=new Q(e),this._nonMaximumSuppressionFilter=new K(e),this._weakPixelInclusionFilter=new Z(e)}init(){super.init(),this._gl&&(this._luminanceFilter.init(),this._blurFilter.init(),this._edgeDetectionFilter.init(),this._nonMaximumSuppressionFilter.init(),this._weakPixelInclusionFilter.init(),this.addFilter(this._luminanceFilter),this.addFilter(this._blurFilter),this.addFilter(this._edgeDetectionFilter),this.addFilter(this._nonMaximumSuppressionFilter),this.addFilter(this._weakPixelInclusionFilter))}active(){this._luminanceFilter.active(),this._blurFilter.active(),this.blurRadiusInPixels=this._blurRadiusInPixels,this.blurTexelSpacingMultiplier=this.blurTexelSpacingMultiplier,this._edgeDetectionFilter.active(),this._texelWidth=this._edgeDetectionFilter.texelWidth,this._texelHeight=this._edgeDetectionFilter.texelHeight,this._nonMaximumSuppressionFilter.active(),this.upperThreshold=this._upperThreshold,this.lowerThreshold=this._lowerThreshold,this._weakPixelInclusionFilter.active()}set blurRadiusInPixels(e){this._blurRadiusInPixels=e,this._blurFilter.blurRadiusInPixels=e}get blurRadiusInPixels(){return this._blurFilter.blurRadiusInPixels}set blurTexelSpacingMultiplier(e){this._blurTexelSpacingMultiplier=e,this._blurFilter.texelSpacingMultiplier=e}get blurTexelSpacingMultiplier(){return this._blurFilter.texelSpacingMultiplier}set texelWidth(e){this._texelWidth=e,this._edgeDetectionFilter.texelWidth=e}get texelWidth(){return this._edgeDetectionFilter.texelWidth}set texelHeight(e){this._texelHeight=e,this._edgeDetectionFilter.texelHeight=e}get texelHeight(){return this._edgeDetectionFilter.texelHeight}set upperThreshold(e){this._upperThreshold=e,this._nonMaximumSuppressionFilter.upperThreshold=e}get upperThreshold(){return this._nonMaximumSuppressionFilter.upperThreshold}set lowerThreshold(e){this._lowerThreshold=e,this._nonMaximumSuppressionFilter.lowerThreshold=e}get lowerThreshold(){return this._nonMaximumSuppressionFilter.lowerThreshold}}class ee extends I{constructor(e){super(e),this._intensityUniform=null,this._colorMatrixUniform=null,this._intensity=0,this._colorMatrix=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],this._fragmentShader="\nvarying highp vec2 textureCoordinate;\n \nuniform sampler2D inputImageTexture;\n\nuniform lowp mat4 colorMatrix;\nuniform lowp float intensity;\n\nvoid main()\n{\n    lowp vec4 textureColor = texture2D(inputImageTexture, textureCoordinate);\n    lowp vec4 outputColor = textureColor * colorMatrix;\n    \n    gl_FragColor = (intensity * outputColor) + ((1.0 - intensity) * textureColor);\n}\n"}active(){super.active(),this._program&&this._gl&&(this._intensityUniform=this._gl.getUniformLocation(this._program,"intensity"),this._colorMatrixUniform=this._gl.getUniformLocation(this._program,"colorMatrix"),this.intensity=this._intensity,this.colorMatrix=this._colorMatrix)}set intensity(e){this._intensity=e,this._gl&&this._isActivated&&this._gl.uniform1f(this._intensityUniform,e)}set colorMatrix(e){this._colorMatrix=e,this._gl&&this._isActivated&&this._gl.uniformMatrix4fv(this._colorMatrixUniform,!1,e)}}class te extends ee{constructor(){super(...arguments),this._matrix=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]]}set adjustBrightness(e){te.cscalemat(this._matrix,e,e,e),this._updateColorMatrix()}set adjustSaturation(e){te.saturatemat(this._matrix,e),this._updateColorMatrix()}reset(){te.identmat(this._matrix),this._updateColorMatrix()}_updateColorMatrix(){this.colorMatrix=this._matrix[0].concat(this._matrix[1],this._matrix[2],this._matrix[3])}static identmat(e){e[0][0]=1,e[0][1]=0,e[0][2]=0,e[0][3]=0,e[1][0]=0,e[1][1]=1,e[1][2]=0,e[1][3]=0,e[2][0]=0,e[2][1]=0,e[2][2]=1,e[2][3]=0,e[3][0]=0,e[3][1]=0,e[3][2]=0,e[3][3]=1}static cscalemat(e,t,i,r){let n=[[],[],[],[]];n[0][0]=t,n[0][1]=0,n[0][2]=0,n[0][3]=0,n[1][0]=0,n[1][1]=i,n[1][2]=0,n[1][3]=0,n[2][0]=0,n[2][1]=0,n[2][2]=r,n[2][3]=0,n[3][0]=0,n[3][1]=0,n[3][2]=0,n[3][3]=1,te.matrixmult(n,e,e)}static saturatemat(e,t){let i,r,n,s,a,o,c,u,d,l,h,p,f=[[],[],[],[]];l=.3,h=.59,p=.11,i=.3*(1-t)+t,r=.3*(1-t),n=.3*(1-t),s=(1-t)*h,a=(1-t)*h+t,o=(1-t)*h,c=(1-t)*p,u=(1-t)*p,d=(1-t)*p+t,f[0][0]=i,f[0][1]=r,f[0][2]=n,f[0][3]=0,f[1][0]=s,f[1][1]=a,f[1][2]=o,f[1][3]=0,f[2][0]=c,f[2][1]=u,f[2][2]=d,f[2][3]=0,f[3][0]=0,f[3][1]=0,f[3][2]=0,f[3][3]=1,te.matrixmult(f,e,e)}static matrixmult(e,t,i){let r,n,s=[[],[],[],[]];for(n=0;n<4;n++)for(r=0;r<4;r++)s[n][r]=t[n][0]*e[0][r]+t[n][1]*e[1][r]+t[n][2]*e[2][r]+t[n][3]*e[3][r];for(n=0;n<4;n++)for(r=0;r<4;r++)i[n][r]=s[n][r]}}class ie extends j{constructor(e){super(e),this._smoothDegreeUniform=null,this._intensity=.5,this._fragmentShader="\nvarying highp vec2 textureCoordinate;\nvarying highp vec2 textureCoordinate2;\nvarying highp vec2 textureCoordinate3;\n\nuniform sampler2D inputImageTexture;\nuniform sampler2D inputImageTexture2;\nuniform sampler2D inputImageTexture3;\nuniform mediump float smoothDegree;\n\nvoid main()\n{\n    highp vec4 bilateral = texture2D(inputImageTexture, textureCoordinate);\n    highp vec4 canny = texture2D(inputImageTexture2, textureCoordinate2);\n    highp vec4 origin = texture2D(inputImageTexture3,textureCoordinate3);\n    highp vec4 smooth;\n    lowp float r = origin.r;\n    lowp float g = origin.g;\n    lowp float b = origin.b;\n    if (canny.r < 0.2 && r > 0.3725 && g > 0.1568 && b > 0.0784 && r > b && (max(max(r, g), b) - min(min(r, g), b)) > 0.0588 && abs(r-g) > 0.0588) {\n        smooth = (1.0 - smoothDegree) * (origin - bilateral) + bilateral;\n    }\n    else {\n        smooth = origin;\n    }\n    smooth.r = log(1.0 + 0.2 * smooth.r)/log(1.2);\n    smooth.g = log(1.0 + 0.2 * smooth.g)/log(1.2);\n    smooth.b = log(1.0 + 0.2 * smooth.b)/log(1.2);\n    gl_FragColor = smooth;\n}\n"}active(){super.active(),this._program&&this._gl&&(this._smoothDegreeUniform=this._gl.getUniformLocation(this._program,"smoothDegree"),this.intensity=this._intensity)}set intensity(e){this._intensity=e,this._gl&&this._isActivated&&this._gl.uniform1f(this._smoothDegreeUniform,this._intensity)}}class re extends I{constructor(e){super(e),this._intensityUniform=null,this._colorMatrixUniform=null,this._intensity=0,this._colorMatrixList=[],this._fragmentShader="\nvarying highp vec2 textureCoordinate;\n \nuniform sampler2D inputImageTexture;\n\nuniform lowp mat4 colorMatrix;\n\nvoid main()\n{\n    lowp vec4 textureColor = texture2D(inputImageTexture, textureCoordinate);\n    gl_FragColor = textureColor * colorMatrix;\n}\n"}active(){super.active(),this._program&&this._gl&&(this._colorMatrixUniform=this._gl.getUniformLocation(this._program,"colorMatrix"),this.intensity=this._intensity)}set intensity(e){if((e=Math.round(e))>=0&&e<this._colorMatrixList.length&&(this._intensity=e,this._gl&&this._isActivated)){let e=this._colorMatrixList[this._intensity];this._gl.uniformMatrix4fv(this._colorMatrixUniform,!1,e)}}set colorMatrixList(e){this._colorMatrixList=e}}const ne="data:image/png;base64,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";class se extends j{constructor(e){super(e),this._fourTexture=null,this._fourInputFramebuffer=null,this._inputTextureUniform4=null,this._fourInputType=T.texture,this._texcoordBuffer4=null,this._inputTextureCoordinateAttrib4=0,this._vertexShader="\nattribute vec4 position;\nattribute vec4 inputTextureCoordinate;\nattribute vec4 inputTextureCoordinate2;\nattribute vec4 inputTextureCoordinate3;\nattribute vec4 inputTextureCoordinate4;\n\nvarying vec2 textureCoordinate;\nvarying vec2 textureCoordinate2;\nvarying vec2 textureCoordinate3;\nvarying vec2 textureCoordinate4;\n\nvoid main()\n{\n    gl_Position = position;\n    textureCoordinate = inputTextureCoordinate.xy;\n    textureCoordinate2 = inputTextureCoordinate2.xy;\n    textureCoordinate3 = inputTextureCoordinate3.xy;\n    textureCoordinate4 = inputTextureCoordinate4.xy;\n}\n"}init(e){super.init(e);let t=this._gl;t&&(this._texcoordBuffer4=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this._texcoordBuffer4),t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,1,1,1,0,0,1,0]),t.STATIC_DRAW))}active(){super.active();let e=this._gl,t=this._program;e&&t&&(this._inputTextureCoordinateAttrib4=e.getAttribLocation(t,"inputTextureCoordinate4"),e.enableVertexAttribArray(this._inputTextureCoordinateAttrib4),e.bindBuffer(e.ARRAY_BUFFER,this._texcoordBuffer4),e.vertexAttribPointer(this._inputTextureCoordinateAttrib4,2,e.FLOAT,!1,0,0),this._inputTextureUniform4=e.getUniformLocation(t,"inputImageTexture4"))}setInput(e,t=0,i=!1){super.setInput(e,t);let r=this._gl;if(r&&3===t)if(this._fourInput=e,this._fourInputType=this._getInputType(e),this._fourInputType===T.texture){let e=this._fourInput;this._fourTexture=e.texture,r.bindFramebuffer(r.FRAMEBUFFER,e.framebuffer),r.bindTexture(r.TEXTURE_2D,e.texture),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,e.texture,0)}else this._fourTexture=this._createAndSetupTexture(r),i&&(this._fourInputType=T.texImageSourceStatic,r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,0),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,this._fourInput))}draw(){let e=this._gl;e&&this._input&&this._fourInput&&(this._updateSize(),e.activeTexture(e.TEXTURE3),e.bindTexture(e.TEXTURE_2D,this._fourTexture),this._fourInputType===T.texImageSource?(e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,0),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,this._fourInput)):this._fourInputType===T.texture&&(e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,0),e.bindFramebuffer(e.FRAMEBUFFER,this._fourInput.framebuffer),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this._fourInput.texture,0)),e.activeTexture(e.TEXTURE2),e.bindTexture(e.TEXTURE_2D,this._thirdTexture),this._thirdInputType===T.texImageSource?(e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,0),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,this._thirdInput)):this._thirdInputType===T.texture&&(e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,0),e.bindFramebuffer(e.FRAMEBUFFER,this._thirdInput.framebuffer),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this._thirdInput.texture,0)),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,this._secondTexture),this._secondInputType===T.texImageSource?(e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,0),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,this._secondInput)):this._secondInputType===T.texture&&(e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,0),e.bindFramebuffer(e.FRAMEBUFFER,this._secondInput.framebuffer),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this._secondInput.texture,0)),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,this._texture),this._inputType===T.texImageSource?(e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,1),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,this._input)):this._inputType===T.texture&&(e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,0),e.bindFramebuffer(e.FRAMEBUFFER,this._input.framebuffer),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this._input.texture,0)),e.bindFramebuffer(e.FRAMEBUFFER,this._outputFBO),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT),e.uniform1i(this._inputTextureUniform,0),e.uniform1i(this._inputTextureUniform2,1),e.uniform1i(this._inputTextureUniform3,2),e.uniform1i(this._inputTextureUniform4,3),e.drawArrays(e.TRIANGLE_STRIP,0,4),this._outputFBO||(e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null)))}destroy(e=!1){this._gl&&(this._gl.disableVertexAttribArray(this._inputTextureCoordinateAttrib4),this._fourTexture&&this._gl.deleteTexture(this._fourTexture),this._fourInputFramebuffer&&this._gl.deleteFramebuffer(this._fourInputFramebuffer),this._texcoordBuffer4&&this._gl.deleteBuffer(this._texcoordBuffer4)),super.destroy(e)}}class ae extends se{constructor(e){super(e),this._fiveTexture=null,this._fiveInputFramebuffer=null,this._inputTextureUniform5=null,this._fiveInputType=T.texture,this._texcoordBuffer5=null,this._inputTextureCoordinateAttrib5=0,this._vertexShader="\nattribute vec4 position;\nattribute vec4 inputTextureCoordinate;\nattribute vec4 inputTextureCoordinate2;\nattribute vec4 inputTextureCoordinate3;\nattribute vec4 inputTextureCoordinate4;\nattribute vec4 inputTextureCoordinate5;\n\nvarying vec2 textureCoordinate;\nvarying vec2 textureCoordinate2;\nvarying vec2 textureCoordinate3;\nvarying vec2 textureCoordinate4;\nvarying vec2 textureCoordinate5;\n\nvoid main()\n{\n    gl_Position = position;\n    textureCoordinate = inputTextureCoordinate.xy;\n    textureCoordinate2 = inputTextureCoordinate2.xy;\n    textureCoordinate3 = inputTextureCoordinate3.xy;\n    textureCoordinate4 = inputTextureCoordinate4.xy;\n    textureCoordinate5 = inputTextureCoordinate5.xy;\n}\n"}init(e){super.init(e);let t=this._gl;t&&(this._texcoordBuffer5=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this._texcoordBuffer5),t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,1,1,1,0,0,1,0]),t.STATIC_DRAW))}active(){super.active();let e=this._gl,t=this._program;e&&t&&(this._inputTextureCoordinateAttrib5=e.getAttribLocation(t,"inputTextureCoordinate5"),e.enableVertexAttribArray(this._inputTextureCoordinateAttrib5),e.bindBuffer(e.ARRAY_BUFFER,this._texcoordBuffer5),e.vertexAttribPointer(this._inputTextureCoordinateAttrib5,2,e.FLOAT,!1,0,0),this._inputTextureUniform5=e.getUniformLocation(t,"inputImageTexture5"))}setInput(e,t=0,i=!1){super.setInput(e,t);let r=this._gl;if(r&&4===t)if(this._fiveInput=e,this._fiveInputType=this._getInputType(e),this._fiveInputType===T.texture){let e=this._fiveInput;this._fiveTexture=e.texture,r.bindFramebuffer(r.FRAMEBUFFER,e.framebuffer),r.bindTexture(r.TEXTURE_2D,e.texture),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,e.texture,0)}else this._fiveTexture=this._createAndSetupTexture(r),i&&(this._fiveInputType=T.texImageSourceStatic,r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,0),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,this._fiveInput))}draw(){let e=this._gl;e&&this._input&&this._fiveInput&&(this._updateSize(),e.activeTexture(e.TEXTURE4),e.bindTexture(e.TEXTURE_2D,this._fiveTexture),this._fiveInputType===T.texImageSource?(e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,0),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,this._fiveInput)):this._fiveInputType===T.texture&&(e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,0),e.bindFramebuffer(e.FRAMEBUFFER,this._fiveInput.framebuffer),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this._fiveInput.texture,0)),e.activeTexture(e.TEXTURE3),e.bindTexture(e.TEXTURE_2D,this._fourTexture),this._fourInputType===T.texImageSource?(e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,0),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,this._fourInput)):this._fourInputType===T.texture&&(e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,0),e.bindFramebuffer(e.FRAMEBUFFER,this._fourInput.framebuffer),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this._fourInput.texture,0)),e.activeTexture(e.TEXTURE2),e.bindTexture(e.TEXTURE_2D,this._thirdTexture),this._thirdInputType===T.texImageSource?(e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,0),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,this._thirdInput)):this._thirdInputType===T.texture&&(e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,0),e.bindFramebuffer(e.FRAMEBUFFER,this._thirdInput.framebuffer),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this._thirdInput.texture,0)),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,this._secondTexture),this._secondInputType===T.texImageSource?(e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,0),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,this._secondInput)):this._secondInputType===T.texture&&(e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,0),e.bindFramebuffer(e.FRAMEBUFFER,this._secondInput.framebuffer),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this._secondInput.texture,0)),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,this._texture),this._inputType===T.texImageSource?(e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,1),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,this._input)):this._inputType===T.texture&&(e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,0),e.bindFramebuffer(e.FRAMEBUFFER,this._input.framebuffer),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this._input.texture,0)),e.bindFramebuffer(e.FRAMEBUFFER,this._outputFBO),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT),e.uniform1i(this._inputTextureUniform,0),e.uniform1i(this._inputTextureUniform2,1),e.uniform1i(this._inputTextureUniform3,2),e.uniform1i(this._inputTextureUniform4,3),e.uniform1i(this._inputTextureUniform5,4),e.drawArrays(e.TRIANGLE_STRIP,0,4),this._outputFBO||(e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null)))}destroy(e=!1){this._gl&&(this._gl.disableVertexAttribArray(this._inputTextureCoordinateAttrib5),this._fiveTexture&&this._gl.deleteTexture(this._fiveTexture),this._fiveInputFramebuffer&&this._gl.deleteFramebuffer(this._fiveInputFramebuffer),this._texcoordBuffer5&&this._gl.deleteBuffer(this._texcoordBuffer5)),super.destroy(e)}}class oe extends ae{constructor(e){super(e),this._sixTexture=null,this._sixInputFramebuffer=null,this._inputTextureUniform6=null,this._sixInputType=T.texture,this._texcoordBuffer6=null,this._inputTextureCoordinateAttrib6=0,this._vertexShader="\nattribute vec4 position;\nattribute vec4 inputTextureCoordinate;\nattribute vec4 inputTextureCoordinate2;\nattribute vec4 inputTextureCoordinate3;\nattribute vec4 inputTextureCoordinate4;\nattribute vec4 inputTextureCoordinate5;\nattribute vec4 inputTextureCoordinate6;\n\nvarying vec2 textureCoordinate;\nvarying vec2 textureCoordinate2;\nvarying vec2 textureCoordinate3;\nvarying vec2 textureCoordinate4;\nvarying vec2 textureCoordinate5;\nvarying vec2 textureCoordinate6;\n\nvoid main()\n{\n    gl_Position = position;\n    textureCoordinate = inputTextureCoordinate.xy;\n    textureCoordinate2 = inputTextureCoordinate2.xy;\n    textureCoordinate3 = inputTextureCoordinate3.xy;\n    textureCoordinate4 = inputTextureCoordinate4.xy;\n    textureCoordinate5 = inputTextureCoordinate5.xy;\n    textureCoordinate6 = inputTextureCoordinate6.xy;\n}\n"}init(e){super.init(e);let t=this._gl;t&&(this._texcoordBuffer6=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this._texcoordBuffer6),t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,1,1,1,0,0,1,0]),t.STATIC_DRAW))}active(){super.active();let e=this._gl,t=this._program;e&&t&&(this._inputTextureCoordinateAttrib6=e.getAttribLocation(t,"inputTextureCoordinate6"),e.enableVertexAttribArray(this._inputTextureCoordinateAttrib6),e.bindBuffer(e.ARRAY_BUFFER,this._texcoordBuffer6),e.vertexAttribPointer(this._inputTextureCoordinateAttrib6,2,e.FLOAT,!1,0,0),this._inputTextureUniform6=e.getUniformLocation(t,"inputImageTexture6"))}setInput(e,t=0,i=!1){super.setInput(e,t);let r=this._gl;if(r&&5===t)if(this._sixInput=e,this._sixInputType=this._getInputType(e),this._sixInputType===T.texture){let e=this._sixInput;this._sixTexture=e.texture,r.bindFramebuffer(r.FRAMEBUFFER,e.framebuffer),r.bindTexture(r.TEXTURE_2D,e.texture),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,e.texture,0)}else this._sixTexture=this._createAndSetupTexture(r),i&&(this._sixInputType=T.texImageSourceStatic,r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,0),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,this._sixInput))}draw(){let e=this._gl;e&&this._input&&this._sixInput&&(this._updateSize(),e.activeTexture(e.TEXTURE5),e.bindTexture(e.TEXTURE_2D,this._sixTexture),this._sixInputType===T.texImageSource?(e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,0),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,this._sixInput)):this._sixInputType===T.texture&&(e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,0),e.bindFramebuffer(e.FRAMEBUFFER,this._sixInput.framebuffer),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this._sixInput.texture,0)),e.activeTexture(e.TEXTURE4),e.bindTexture(e.TEXTURE_2D,this._fiveTexture),this._fiveInputType===T.texImageSource?(e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,0),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,this._fiveInput)):this._fiveInputType===T.texture&&(e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,0),e.bindFramebuffer(e.FRAMEBUFFER,this._fiveInput.framebuffer),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this._fiveInput.texture,0)),e.activeTexture(e.TEXTURE3),e.bindTexture(e.TEXTURE_2D,this._fourTexture),this._fourInputType===T.texImageSource?(e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,0),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,this._fourInput)):this._fourInputType===T.texture&&(e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,0),e.bindFramebuffer(e.FRAMEBUFFER,this._fourInput.framebuffer),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this._fourInput.texture,0)),e.activeTexture(e.TEXTURE2),e.bindTexture(e.TEXTURE_2D,this._thirdTexture),this._thirdInputType===T.texImageSource?(e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,0),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,this._thirdInput)):this._thirdInputType===T.texture&&(e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,0),e.bindFramebuffer(e.FRAMEBUFFER,this._thirdInput.framebuffer),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this._thirdInput.texture,0)),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,this._secondTexture),this._secondInputType===T.texImageSource?(e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,0),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,this._secondInput)):this._secondInputType===T.texture&&(e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,0),e.bindFramebuffer(e.FRAMEBUFFER,this._secondInput.framebuffer),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this._secondInput.texture,0)),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,this._texture),this._inputType===T.texImageSource?(e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,1),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,this._input)):this._inputType===T.texture&&(e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,0),e.bindFramebuffer(e.FRAMEBUFFER,this._input.framebuffer),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this._input.texture,0)),e.bindFramebuffer(e.FRAMEBUFFER,this._outputFBO),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT),e.uniform1i(this._inputTextureUniform,0),e.uniform1i(this._inputTextureUniform2,1),e.uniform1i(this._inputTextureUniform3,2),e.uniform1i(this._inputTextureUniform4,3),e.uniform1i(this._inputTextureUniform5,4),e.uniform1i(this._inputTextureUniform6,5),e.drawArrays(e.TRIANGLE_STRIP,0,4),this._outputFBO||(e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null)))}destroy(e=!1){this._gl&&(this._gl.disableVertexAttribArray(this._inputTextureCoordinateAttrib6),this._sixTexture&&this._gl.deleteTexture(this._sixTexture),this._sixInputFramebuffer&&this._gl.deleteFramebuffer(this._sixInputFramebuffer),this._texcoordBuffer6&&this._gl.deleteBuffer(this._texcoordBuffer6)),super.destroy(e)}}class ce extends H{constructor(e){super(e),this._viewportUniform=null,this._singleStepOffsetUniform=null,this._singleStepOffset=0,this._texelWidth=0,this._texelHeight=0,this._fragmentShader="\nprecision mediump float;\n\nvarying highp vec2 textureCoordinate;\n\nuniform sampler2D inputImageTexture;\nuniform sampler2D inputImageTexture2;\n\nuniform vec2 singleStepOffset;\nuniform vec4 viewport;\n\nconst highp vec3 W = vec3(0.299, 0.587, 0.114);\n\nvec3 greyscale(){\n    return vec3(dot(\n        W,\n        texture2D(inputImageTexture, textureCoordinate).rgb\n        ));\n}\n\nvec3 sepia(){\n    return texture2D(inputImageTexture, textureCoordinate).rgb * mat3(\n        0.3588, 0.7044, 0.1368,\n        0.2990, 0.5870, 0.1140,\n        0.2392, 0.4696, 0.0912\n        );\n}\n\nvec3 base(){\n    return texture2D(inputImageTexture, textureCoordinate).rgb;\n}\n\nvec3 binary() {\n    vec3 color = texture2D(inputImageTexture, textureCoordinate).rgb;\n    if (color.r + color.g + color.b > 1.5) {\n        return vec3(1, 1, 1);\n    } else {\n        return vec3(0, 0, 0);\n    }\n}\n\nvec3 sketch(){\n    float threshold = 0.;\n\n    vec4 oralColor = texture2D(inputImageTexture, textureCoordinate);\n\n    vec3 maxValue = vec3(0.);\n\n    for (int i = -2; i<=2; i++) {\n\t\tfor(int j = -2; j<=2; j++) {\n            vec4 tempColor = texture2D(inputImageTexture, textureCoordinate +singleStepOffset*vec2(i,j));\n\t\t\tmaxValue = max(maxValue, tempColor.rgb);\n\t\t\tthreshold += dot(tempColor.rgb, W);\n\t\t}\n    }\n    float gray1 = dot(oralColor.rgb, W);\n\t\n\t//pic4\n\tfloat gray2 = dot(maxValue, W);\n\t\n\t//pic5\n\tfloat contour = gray1 / gray2;\n\n\tthreshold = threshold / 25.;\n\tfloat alpha = max(1.0,gray1>threshold?1.0:(gray1/threshold));\n\tfloat result = contour * alpha + (1.0-alpha)*gray1;\n\treturn vec3(result,result,result);\n}\n\nvoid main(){\n    vec2 canvasCoord = vec2(textureCoordinate.x * viewport[2] + viewport[0], (1. - textureCoordinate.y) * viewport[3] + viewport[1]);\n\n    float filterIdx = 255. * texture2D(inputImageTexture2, canvasCoord).r;\n\n    vec3 color = base();\n    if (filterIdx < 10.) {\n        color = base();\n    } else if(filterIdx < 20.) {\n        color = sepia();\n    } else if(filterIdx < 30.) {\n        color = greyscale();\n    } else if(filterIdx < 40.) {\n        color = sketch();\n    } else if (filterIdx < 50.) {\n        color = binary();\n    } else {\n        color = base();\n    }\n\n    gl_FragColor = vec4(color, 1.);\n}\n"}active(){super.active(),this._gl&&this._program&&(this._viewportUniform=this._gl.getUniformLocation(this._program,"viewport"),this._singleStepOffsetUniform=this._gl.getUniformLocation(this._program,"singleStepOffset"),this._gl.uniform2fv(this._singleStepOffsetUniform,[this._texelWidth,this._texelHeight]))}setInputSize(e){super.setInputSize(e),this._texelWidth=1/this._inputWidth,this._texelHeight=1/this._inputHeight,this._gl&&this._isActivated&&this._gl.uniform2fv(this._singleStepOffsetUniform,[this._texelWidth,this._texelHeight])}_updateSize(){if(super._updateSize(),this._gl&&this._isActivated){let e=this._viewport;e.x?this._gl.uniform4fv(this._viewportUniform,[e.x/(e.w+2*e.x),0,e.w/(e.w+2*e.x),1]):this._gl.uniform4fv(this._viewportUniform,[0,e.y/(e.h+2*e.y),1,e.h/(e.h+2*e.y)])}}}class ue extends I{constructor(e){super(e),this._fractionalWidthOfAPixelUniform=null,this._aspectRatioUniform=null,this._fractionalWidthOfAPixel=.008,this._aspectRatio=1,this._fragmentShader="\nvarying highp vec2 textureCoordinate;\n \nuniform sampler2D inputImageTexture;\n\nuniform highp float fractionalWidthOfPixel;\nuniform highp float aspectRatio;\n\nvoid main()\n{\n    highp vec2 sampleDivisor = vec2(fractionalWidthOfPixel, fractionalWidthOfPixel / aspectRatio);\n    \n    highp vec2 samplePos = textureCoordinate - mod(textureCoordinate, sampleDivisor) + 0.5 * sampleDivisor;\n    gl_FragColor = texture2D(inputImageTexture, samplePos );\n}\n"}active(){super.active(),this._program&&this._gl&&(this._fractionalWidthOfAPixelUniform=this._gl.getUniformLocation(this._program,"fractionalWidthOfPixel"),this._aspectRatioUniform=this._gl.getUniformLocation(this._program,"aspectRatio"),this.fractionalWidthOfAPixel=this._fractionalWidthOfAPixel,this.aspectRatio=this._aspectRatio)}setInputSize(e,t=0){super.setInputSize(e,t),this._aspectRatio=this._inputHeight/this._inputWidth,this.aspectRatio=this._aspectRatio}set fractionalWidthOfAPixel(e){if(this._gl&&this._isActivated){let t=0;t=this._inputWidth?1/this._inputWidth:1/2048,this._fractionalWidthOfAPixel=e<t?t:e,this._gl.uniform1f(this._fractionalWidthOfAPixelUniform,this._fractionalWidthOfAPixel)}}set aspectRatio(e){this._aspectRatio=e,this._gl&&this._isActivated&&this._gl.uniform1f(this._aspectRatioUniform,e)}}class de extends H{constructor(e){super(e),this._intensity=1,this._intensityUniform=null,this._fragmentShader="\nvarying highp vec2 textureCoordinate;\nvarying highp vec2 textureCoordinate2;\n\nuniform sampler2D inputImageTexture;\nuniform sampler2D inputImageTexture2; \n\nuniform highp float intensity;\n\nvoid main()\n{\n    lowp vec4 sharpImageColor = texture2D(inputImageTexture, textureCoordinate);\n    lowp vec3 blurredImageColor = texture2D(inputImageTexture2, textureCoordinate2).rgb;\n    \n    gl_FragColor = vec4(sharpImageColor.rgb * intensity + blurredImageColor * (1.0 - intensity), sharpImageColor.a);\n//     gl_FragColor = mix(blurredImageColor, sharpImageColor, intensity);\n//     gl_FragColor = vec4(sharpImageColor.rgb - (blurredImageColor.rgb * intensity), 1.0);\n}\n"}active(){super.active(),this._gl&&this._program&&(this._intensityUniform=this._gl.getUniformLocation(this._program,"intensity"),this.intensity=this._intensity)}set intensity(e){this._intensity=e,this._gl&&this._isActivated&&this._gl.uniform1f(this._intensityUniform,e)}}var le={};!function(){const e=self.navigator.userAgent.toLowerCase(),t=/(edge)\/([\w.]+)/.exec(e)||/(opr)[\/]([\w.]+)/.exec(e)||/(chrome)[ \/]([\w.]+)/.exec(e)||/(iemobile)[\/]([\w.]+)/.exec(e)||/(version)(applewebkit)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+).*(version)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("trident")>=0&&/(rv)(?::| )([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(firefox)[ \/]([\w.]+)/.exec(e)||[],i=/(ipad)/.exec(e)||/(ipod)/.exec(e)||/(windows phone)/.exec(e)||/(iphone)/.exec(e)||/(kindle)/.exec(e)||/(android)/.exec(e)||/(windows)/.exec(e)||/(mac)/.exec(e)||/(linux)/.exec(e)||/(cros)/.exec(e)||[],r={browser:t[5]||t[3]||t[1]||"",version:t[2]||t[4]||"0",majorVersion:t[4]||t[2]||"0",platform:i[0]||""},n={x5:/ tbs\//.test(e)};if(r.browser){n[r.browser]=!0;const e=r.majorVersion.split(".");n.version={major:parseInt(r.majorVersion,10),string:r.version},e.length>1&&(n.version.minor=parseInt(e[1],10)),e.length>2&&(n.version.build=parseInt(e[2],10))}if(r.platform&&(n[r.platform]=!0),(n.chrome||n.opr||n.safari)&&(n.webkit=!0),n.rv||n.iemobile){n.rv&&delete n.rv;const e="msie";r.browser=e,n[e]=!0}if(n.edge){delete n.edge;const e="msedge";r.browser=e,n[e]=!0}if(n.opr){const e="opera";r.browser=e,n[e]=!0}if(n.safari&&n.android){const e="android";r.browser=e,n[e]=!0}n.name=r.browser,n.platform=r.platform;for(const e in le)le.hasOwnProperty(e)&&delete le[e];le=n}();var he=le;class pe{constructor(){this.timeout=6048e5}write(e,t){pe.available&&localStorage.setItem(e,JSON.stringify({value:t,time:Date.now()}))}read(e){if(pe.available)try{const t=localStorage.getItem(e);if(t){const{value:e,time:i=0}=JSON.parse(t);if(Date.now()-i<this.timeout)return e}}catch(e){}}static get available(){if(void 0===pe._available)try{localStorage.setItem("kwai-h5","test"),pe._available=!0}catch(e){pe._available=!1}return pe._available}}const fe="kwai-vpp";class Ae extends n{constructor(e){super(),this._onVideoStateChange=()=>{this._source instanceof HTMLVideoElement&&(this._isSourceReady()?(this._render.isAnimation||(this._updateInputSize(),this._render.start(),this._source.removeEventListener("timeupdate",this._onVideoStateChange)),this._source.ended&&this._render.pause()):(this._source.addEventListener("timeupdate",this._onVideoStateChange),this._render.pause()))},this._onVideoEmptied=()=>{this._render.end(!1)},this._updateInputSize=()=>{this._source&&(this._source instanceof HTMLVideoElement?this._render.setInputSize(this._source.videoWidth,this._source.videoHeight):this._source.width&&this._source.height&&this._render.setInputSize(this._source.width,this._source.height))},this._onError=e=>{O.i(fe,"error",JSON.stringify(e)),this.emit(v.ERROR,e)},this._config=class{static processConfig(e){const t=Object.assign({},m);return Object.assign(t,e),A.setPixelRatioByDevice(t.pixelRatioByDevice),t}}.processConfig(e),this._eventEmiter=new n,this._eventEmiter.on(v.ERROR,this._onError),this._render=new N(this._eventEmiter,this._config),this._storage=new pe,this._storage.read("kwai-vpp-log")&&O.level(D.LEVEL_VERBOSE),O.i(fe,Ae.version)}static get version(){return"1.1.6-alpha-6"}static isSupported(){return!he.msie&&function(){var e,t=document.createElement("canvas");t.width=1,t.height=1;try{e=b(t)}catch(e){return!1}if(e){var i=e.createTexture(),r=new Uint8Array(16);return e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,i),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texImage2D(e.TEXTURE_2D,0,e.LUMINANCE,4,4,0,e.LUMINANCE,e.UNSIGNED_BYTE,r),!e.getError()}return!1}()}setFilters(e){e.forEach((e=>{R[e.id]||(R[e.id]=e)}))}setMediaInfo(e){O.i(fe,"setMediaInfo",e),e.fps&&this._render.setFPS(e.fps)}attachSource(e){O.i(fe,"attachSource"),this._source=e,this._render.attachSource(e),this._isSourceReady()&&(this._updateInputSize(),e instanceof HTMLVideoElement?this._render.start():this._render.draw()),e instanceof HTMLVideoElement&&(e.addEventListener("canplay",this._onVideoStateChange),e.addEventListener("playing",this._onVideoStateChange),e.addEventListener("play",this._onVideoStateChange),e.addEventListener("ended",this._onVideoStateChange),e.addEventListener("error",this._onVideoStateChange),e.addEventListener("resize",this._updateInputSize),e.addEventListener("emptied",this._onVideoEmptied))}detachSource(){this._render.pause(),this._render.detachSource(),this._removeSourceListener()}draw(){this._render.active(),this._render.draw()}attachOutputCanvas(e,t){O.i(fe,"attachOutputCanvas"),this._render.attachOutputCanvas(e,t)}detachOutputCanvas(){O.i(fe,"detachOutputCanvas"),this._render.detachOutputCanvas()}select(e){O.i(fe,"select",e);let t=this._isSourceReady();this._render.select(e,t),t&&this._render.draw()}setParams(e){this._render.setParams(e)}destroy(){O.i(fe,"destroy"),this._removeSourceListener(),this._render.destroy(),this._eventEmiter.removeAllListeners(),this.removeAllListeners()}get currentFilterName(){return this._render.currentFilterName}get filters(){return this._render.filters}_isSourceReady(){let e=this._source;return e instanceof HTMLVideoElement?e.readyState>1:!(e instanceof HTMLImageElement)||e.complete}_removeSourceListener(){this._source instanceof HTMLVideoElement&&(this._source.removeEventListener("canplay",this._onVideoStateChange),this._source.removeEventListener("playing",this._onVideoStateChange),this._source.removeEventListener("play",this._onVideoStateChange),this._source.removeEventListener("ended",this._onVideoStateChange),this._source.removeEventListener("error",this._onVideoStateChange),this._source.removeEventListener("resize",this._updateInputSize),this._source.removeEventListener("emptied",this._onVideoEmptied),this._source.removeEventListener("timeupdate",this._onVideoStateChange))}}const me={id:"mix",filter:class extends F{constructor(e){super(e)}active(){super.active(),this._two&&this._two.active()}setInput(e){this._input=e,this._two||this._tryInitFilter()}setInputSize(e){super.setInputSize(e)}destroy(e=!1){this._mixCanvas=void 0,super.destroy(e),this._two=void 0}set mixCanvas(e){this._mixCanvas!==e&&(this._mixCanvas=e,this._tryInitFilter())}_tryInitFilter(){this._gl&&this._input&&this._mixCanvas&&(this._two&&(this._two.destroy(),this._two=void 0,this._filters=[]),this._two=new ce(this._gl),this._two.init(),this._two.active(),this._two.setInputSize({width:this._inputWidth,height:this._inputHeight}),this._two.setInput(this._input,0),this._two.setInput(this._mixCanvas,1),this.addFilter(this._two))}},paramsInfo:{mixCanvas:{}},extra:{filterColorMap:{base:[1,0,0],sepia:[15,0,0],grayscale:[25,0,0],sketch:[35,0,0],binary:[45,0,0]}}},ge={id:"sepia",filter:class extends ee{active(){super.active(),this.intensity=1,this.colorMatrix=[.3588,.7044,.1368,0,.299,.587,.114,0,.2392,.4696,.0912,0,0,0,0,1]}}},Te={id:"grayscale",filter:J},ve={id:"pixellate",filter:ue},Ce={id:"dot",filter:class extends ue{constructor(e){super(e),this._dotScaling=.9,this._dotScalingUniform=null,this._fragmentShader="\nvarying highp vec2 textureCoordinate;\n \nuniform sampler2D inputImageTexture;\n\nuniform highp float fractionalWidthOfPixel;\nuniform highp float aspectRatio;\nuniform highp float dotScaling;\n\nvoid main()\n{\n    highp vec2 sampleDivisor = vec2(fractionalWidthOfPixel, fractionalWidthOfPixel / aspectRatio);\n    \n    highp vec2 samplePos = textureCoordinate - mod(textureCoordinate, sampleDivisor) + 0.5 * sampleDivisor;\n    highp vec2 textureCoordinateToUse = vec2(textureCoordinate.x, (textureCoordinate.y * aspectRatio + 0.5 - 0.5 * aspectRatio));\n    highp vec2 adjustedSamplePos = vec2(samplePos.x, (samplePos.y * aspectRatio + 0.5 - 0.5 * aspectRatio));\n    highp float distanceFromSamplePoint = distance(adjustedSamplePos, textureCoordinateToUse);\n    lowp float checkForPresenceWithinDot = step(distanceFromSamplePoint, (fractionalWidthOfPixel * 0.5) * dotScaling);\n\n    lowp vec4 inputColor = texture2D(inputImageTexture, samplePos);\n    \n    gl_FragColor = vec4(inputColor.rgb * checkForPresenceWithinDot, inputColor.a);\n}\n"}active(){super.active(),this._program&&this._gl&&(this._dotScalingUniform=this._gl.getUniformLocation(this._program,"dotScaling"),this.dotScaling=this._dotScaling)}set dotScaling(e){this._dotScaling=e,this._gl&&this._isActivated&&this._gl.uniform1f(this._dotScalingUniform,e)}}},Ee={id:"sketch",filter:class extends I{constructor(e){super(e),this._singleStepOffsetUniform=null,this._strengthUniform=null,this._strength=.5,this._texelWidth=0,this._texelHeight=0,this._fragmentShader="\nvarying highp vec2 textureCoordinate;\nprecision mediump float;\n\nuniform sampler2D inputImageTexture;\nuniform vec2 singleStepOffset; \nuniform float strength;\n\nconst highp vec3 W = vec3(0.299,0.587,0.114);\n\n\nvoid main()\n{ \n\tfloat threshold = 0.0;\n\t//pic1\n\tvec4 oralColor = texture2D(inputImageTexture, textureCoordinate);\n\t\n\t//pic2\n\tvec3 maxValue = vec3(0.,0.,0.);\n\t\n\tfor(int i = -2; i<=2; i++)\n\t{\n\t\tfor(int j = -2; j<=2; j++)\n\t\t{\n\t\t\tvec4 tempColor = texture2D(inputImageTexture, textureCoordinate+singleStepOffset*vec2(i,j));\n\t\t\tmaxValue.r = max(maxValue.r,tempColor.r);\n\t\t\tmaxValue.g = max(maxValue.g,tempColor.g);\n\t\t\tmaxValue.b = max(maxValue.b,tempColor.b);\n\t\t\tthreshold += dot(tempColor.rgb, W);\n\t\t}\n\t}\n\t//pic3\n\tfloat gray1 = dot(oralColor.rgb, W);\n\t\n\t//pic4\n\tfloat gray2 = dot(maxValue, W);\n\t\n\t//pic5\n\tfloat contour = gray1 / gray2;\n\n\tthreshold = threshold / 25.;\n\tfloat alpha = max(1.0,gray1>threshold?1.0:(gray1/threshold));\n\t\n\tfloat result = contour * alpha + (1.0-alpha)*gray1;\n\t\n\tgl_FragColor = vec4(vec3(result,result,result), oralColor.w);\n} \n"}active(){super.active(),this._program&&this._gl&&(this._singleStepOffsetUniform=this._gl.getUniformLocation(this._program,"singleStepOffset"),this._strengthUniform=this._gl.getUniformLocation(this._program,"strength"),this.strength=this._strength,this._gl.uniform2fv(this._singleStepOffsetUniform,[this._texelWidth,this._texelHeight]))}setInputSize(e){super.setInputSize(e),this._texelWidth=1/this._inputWidth,this._texelHeight=1/this._inputHeight,this._gl&&this._isActivated&&this._gl.uniform2fv(this._singleStepOffsetUniform,[this._texelWidth,this._texelHeight])}set strength(e){this._strength=e,this._gl&&this._isActivated&&this._gl.uniform1f(this._strengthUniform,e)}}},Se={id:"crayon",filter:class extends I{constructor(e){super(e),this._singleStepOffsetUniform=null,this._strengthUniform=null,this._strength=.5,this._texelWidth=0,this._texelHeight=0,this._fragmentShader="\nvarying highp vec2 textureCoordinate;\nprecision mediump float;\n\nuniform sampler2D inputImageTexture;\nuniform vec2 singleStepOffset; \nuniform float strength;\n\nconst highp vec3 W = vec3(0.299,0.587,0.114);\n\nconst mat3 rgb2yiqMatrix = mat3(\n\t\t0.299, 0.587, 0.114,\n\t\t0.596,-0.275,-0.321,\n\t\t0.212,-0.523, 0.311);\n\nconst mat3 yiq2rgbMatrix = mat3(\n\t\t1.0, 0.956, 0.621,\n\t\t1.0,-0.272,-1.703,\n\t\t1.0,-1.106, 0.0);\n\n\nvoid main()\n{ \n\tvec4 oralColor = texture2D(inputImageTexture, textureCoordinate);\n\n\tvec3 maxValue = vec3(0.,0.,0.);\n\t\n\tfor(int i = -2; i<=2; i++)\n\t{\n\t\tfor(int j = -2; j<=2; j++)\n\t\t{\n\t\t\tvec4 tempColor = texture2D(inputImageTexture, textureCoordinate+singleStepOffset*vec2(i,j));\n\t\t\tmaxValue.r = max(maxValue.r,tempColor.r);\n\t\t\tmaxValue.g = max(maxValue.g,tempColor.g);\n\t\t\tmaxValue.b = max(maxValue.b,tempColor.b);\n\t\t}\n\t}\n\t\n\tvec3 textureColor = oralColor.rgb / maxValue;\n\t\n\tfloat gray = dot(textureColor, W);\n\tfloat k = 0.223529;\n\tfloat alpha = min(gray,k)/k;\n\t\n\ttextureColor = textureColor * alpha + (1.-alpha)*oralColor.rgb;\n\t\n\tvec3 yiqColor = textureColor * rgb2yiqMatrix;\n\n\tyiqColor.r = max(0.0,min(1.0,pow(gray,strength)));\n\n\ttextureColor = yiqColor * yiq2rgbMatrix;\n\t\n\tgl_FragColor = vec4(textureColor, oralColor.w);\n}\n"}active(){super.active(),this._program&&this._gl&&(this._singleStepOffsetUniform=this._gl.getUniformLocation(this._program,"singleStepOffset"),this._strengthUniform=this._gl.getUniformLocation(this._program,"strength"),this.strength=this._strength,this._gl.uniform2fv(this._singleStepOffsetUniform,[this._texelWidth,this._texelHeight]))}setInputSize(e){super.setInputSize(e),this._texelWidth=1/this._inputWidth,this._texelHeight=1/this._inputHeight,this._gl&&this._isActivated&&this._gl.uniform2fv(this._singleStepOffsetUniform,[this._texelWidth,this._texelHeight])}set strength(e){this._strength=e,this._gl&&this._gl.uniform1f(this._strengthUniform,e)}}},xe={id:"kuwahara",filter:class extends I{constructor(e){super(e),this._radius=3,this._radiusUniform=null,this._fragmentShader="\nvarying highp vec2 textureCoordinate;\nuniform sampler2D inputImageTexture;\nuniform int radius;\n\nprecision highp float;\n\nconst vec2 src_size = vec2 (1.0 / 768.0, 1.0 / 1024.0);\nconst int R1 = 3;\nconst int R2 = -3;\nvoid main (void) \n{\n    vec2 uv = textureCoordinate;\n    float n = float((radius + 1) * (radius + 1));\n    vec3 m0 = vec3(0.0); vec3 m1 = vec3(0.0); vec3 m2 = vec3(0.0); vec3 m3 = vec3(0.0);\n    vec3 s0 = vec3(0.0); vec3 s1 = vec3(0.0); vec3 s2 = vec3(0.0); vec3 s3 = vec3(0.0);\n    vec3 c;\n\n    for (int j = R2; j <= 0; ++j)  {\n        for (int i = R2; i <= 0; ++i)  {\n            c = texture2D(inputImageTexture, uv + vec2(i,j) * src_size).rgb;\n            m0 += c;\n            s0 += c * c;\n        }\n    }\n\n    for (int j = R2; j <= 0; ++j)  {\n        for (int i = 0; i <= R1; ++i)  {\n            c = texture2D(inputImageTexture, uv + vec2(i,j) * src_size).rgb;\n            m1 += c;\n            s1 += c * c;\n        }\n    }\n\n    for (int j = 0; j <= R1; ++j)  {\n        for (int i = 0; i <= R1; ++i)  {\n            c = texture2D(inputImageTexture, uv + vec2(i,j) * src_size).rgb;\n            m2 += c;\n            s2 += c * c;\n        }\n    }\n\n    for (int j = 0; j <= R1; ++j)  {\n        for (int i = R2; i <= 0; ++i)  {\n            c = texture2D(inputImageTexture, uv + vec2(i,j) * src_size).rgb;\n            m3 += c;\n            s3 += c * c;\n        }\n    }\n\n\n    float min_sigma2 = 1e+2;\n    m0 /= n;\n    s0 = abs(s0 / n - m0 * m0);\n\n    float sigma2 = s0.r + s0.g + s0.b;\n    if (sigma2 < min_sigma2) {\n        min_sigma2 = sigma2;\n        gl_FragColor = vec4(m0, 1.0);\n    }\n\n    m1 /= n;\n    s1 = abs(s1 / n - m1 * m1);\n\n    sigma2 = s1.r + s1.g + s1.b;\n    if (sigma2 < min_sigma2) {\n        min_sigma2 = sigma2;\n        gl_FragColor = vec4(m1, 1.0);\n    }\n\n    m2 /= n;\n    s2 = abs(s2 / n - m2 * m2);\n\n    sigma2 = s2.r + s2.g + s2.b;\n    if (sigma2 < min_sigma2) {\n        min_sigma2 = sigma2;\n        gl_FragColor = vec4(m2, 1.0);\n    }\n\n    m3 /= n;\n    s3 = abs(s3 / n - m3 * m3);\n\n    sigma2 = s3.r + s3.g + s3.b;\n    if (sigma2 < min_sigma2) {\n        min_sigma2 = sigma2;\n        gl_FragColor = vec4(m3, 1.0);\n    }\n}\n"}active(){super.active(),this._program&&this._gl&&(this._radiusUniform=this._gl.getUniformLocation(this._program,"radius"),this.radius=this._radius)}set radius(e){this._radius=e,this._gl&&this._isActivated&&this._gl.uniform1i(this._radiusUniform,e)}}},be={id:"lomo",filter:class extends V{constructor(e){super(e),this._three=new j(e),this._image=new Image,this._image2=new Image,this._res.setQueue([{img:this._image,src:"data:image/png;base64,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"},{img:this._image2,src:ne}]),this._res.start()}active(){super.active(),this._three.active()}init(){super.init(),this.addFilter(this._three),this._three.init({fragment:"\nprecision lowp float;\n \nvarying highp vec2 textureCoordinate;\n\nuniform sampler2D inputImageTexture;\nuniform sampler2D inputImageTexture2;\nuniform sampler2D inputImageTexture3;\n\nvoid main()\n{\n    \n    vec3 texel = texture2D(inputImageTexture, textureCoordinate).rgb;\n    \n    vec2 red = vec2(texel.r, 0.16666);\n    vec2 green = vec2(texel.g, 0.5);\n    vec2 blue = vec2(texel.b, 0.83333);\n    \n    texel.rgb = vec3(\n                     texture2D(inputImageTexture2, red).r,\n                     texture2D(inputImageTexture2, green).g,\n                     texture2D(inputImageTexture2, blue).b);\n    \n    vec2 tc = (2.0 * textureCoordinate) - 1.0;\n    float d = dot(tc, tc);\n    vec2 lookup = vec2(d, texel.r);\n    texel.r = texture2D(inputImageTexture3, lookup).r;\n    lookup.y = texel.g;\n    texel.g = texture2D(inputImageTexture3, lookup).g;\n    lookup.y = texel.b;\n    texel.b\t= texture2D(inputImageTexture3, lookup).b;\n    \n    gl_FragColor = vec4(texel,1.0);\n}\n"})}_setInput(){!this._resReady&&this._input&&this._res.ready&&(this._three.active(),this._three.setInput(this._input,0),this._three.setInput(this._image,1,!0),this._three.setInput(this._image2,2,!0),this._resReady=!0)}}},ye={id:"n1977",filter:class extends V{constructor(e){super(e),this._three=new j(e),this._image=new Image,this._image2=new Image,this._res.setQueue([{img:this._image,src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAABCAYAAAAxWXB3AAAAIGNIUk0AAG2YAABzjgAA2e0AAIGfAAB/mgAA2GMAADIXAAAdLVvevdMAAAAJcEhZcwAACxMAAAsTAQCanBgAAACdSURBVDjL3ZJBDgMxCAPH/lVv/UL//5j2AEkIK0U5dyUkJxhjyOrzen/5k0+AC+5nj/tMWoElZXhiRyJx3GMhItf5W9hLg8UddWRObhro6cXVi0vv0PbgevcQNfs8yqHdfAPHeSyXXZQ6GfvgvWrkTqYORWPb3a4xZ2fNT9nL4NK8ifUOVYfsuTD30X+uE29gLjg68H3owyWv8hvvB7DNA7Qc4vbAAAAAAElFTkSuQmCC"},{img:this._image2,src:"data:image/png;base64,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"}]),this._res.start()}active(){super.active(),this._three.active()}init(){super.init(),this.addFilter(this._three),this._three.init({fragment:"\nprecision lowp float;\n \nvarying highp vec2 textureCoordinate;\n\nuniform sampler2D inputImageTexture;\nuniform sampler2D inputImageTexture2;\n\nvoid main()\n{\n    \n    vec3 texel = texture2D(inputImageTexture, textureCoordinate).rgb;\n    \n    texel = vec3(\n                 texture2D(inputImageTexture2, vec2(texel.r, .16666)).r,\n                 texture2D(inputImageTexture2, vec2(texel.g, .5)).g,\n                 texture2D(inputImageTexture2, vec2(texel.b, .83333)).b);\n    \n    gl_FragColor = vec4(texel, 1.0);\n}\n"})}_setInput(){!this._resReady&&this._input&&this._res.ready&&(this._three.active(),this._three.setInput(this._input,0),this._three.setInput(this._image,1,!0),this._three.setInput(this._image2,2,!0),this._resReady=!0)}}},_e={id:"earlybird",filter:class extends V{constructor(e){super(e),this._six=new oe(e),this._image=new Image,this._image2=new Image,this._image3=new Image,this._image4=new Image,this._image5=new Image,this._res.setQueue([{img:this._image,src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAABCAYAAAAxWXB3AAAAIGNIUk0AAG2YAABzjgAA2e0AAIGfAAB/mgAA2GMAADIXAAAdLVvevdMAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAiSURBVDjLY2RgYPjPyMjIAMEMDAj2qNhIEWNgGA2HkSoGAI1oA8gFKQ7kAAAAAElFTkSuQmCC"},{img:this._image2,src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAABCAYAAAAxWXB3AAAAIGNIUk0AAG2YAABzjgAA2e0AAIGfAAB/mgAA2GMAADIXAAAdLVvevdMAAAAJcEhZcwAACxMAAAsTAQCanBgAAABBSURBVDjLY2RgYPjPyMjIwMjIwAChGRkYGdD4jDj4DATk4WYRYR7DELWP2PAixj5i3U/l+GGAu41+do7G0eBIEwA97QOgFIn10AAAAABJRU5ErkJggg=="},{img:this._image3,src:ne},{img:this._image4,src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAABCAYAAAAxWXB3AAAAIGNIUk0AAG2YAABzjgAA2e0AAIGfAAB/mgAA2GMAADIXAAAdLVvevdMAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAlSURBVDjLY2RgYPjPyMjIwMTExIBMj4qNHDEYgInD2KNiw18MACXoA/szUKleAAAAAElFTkSuQmCC"},{img:this._image5,src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAABCAYAAAAxWXB3AAAAIGNIUk0AAG2YAABzjgAA2e0AAIGfAAB/mgAA2GMAADIXAAAdLVvevdMAAAAJcEhZcwAACxMAAAsTAQCanBgAAABWSURBVDjLtZPJEQAgCMSyJViA/ZepDQByjA9+OxuIozbrSAIJuQPvjIwMiYzXQ4FjMzMcO0djX//eXE/Xsc2l0AEM3ooyb+45dv3P85//kPNHc9/Y8QVOZQP7gpOmSwAAAABJRU5ErkJggg=="}]),this._res.start()}active(){super.active(),this._six.active()}init(){super.init(),this.addFilter(this._six),this._six.init({fragment:"\nprecision lowp float;\n \nvarying highp vec2 textureCoordinate;\n\nuniform sampler2D inputImageTexture;\nuniform sampler2D inputImageTexture2; //earlyBirdCurves\nuniform sampler2D inputImageTexture3; //earlyBirdOverlay\nuniform sampler2D inputImageTexture4; //vig\nuniform sampler2D inputImageTexture5; //earlyBirdBlowout\nuniform sampler2D inputImageTexture6; //earlyBirdMap\n\nconst mat3 saturate = mat3(\n                           1.210300,\n                           -0.089700,\n                           -0.091000,\n                           -0.176100,\n                           1.123900,\n                           -0.177400,\n                           -0.034200,\n                           -0.034200,\n                           1.265800);\nconst vec3 rgbPrime = vec3(0.25098, 0.14640522, 0.0);\nconst vec3 desaturate = vec3(.3, .59, .11);\n\nvoid main()\n{\n    \n    vec3 texel = texture2D(inputImageTexture, textureCoordinate).rgb;\n    \n    \n    vec2 lookup;\n    lookup.y = 0.5;\n    \n    lookup.x = texel.r;\n    texel.r = texture2D(inputImageTexture2, lookup).r;\n    \n    lookup.x = texel.g;\n    texel.g = texture2D(inputImageTexture2, lookup).g;\n    \n    lookup.x = texel.b;\n    texel.b = texture2D(inputImageTexture2, lookup).b;\n    \n    float desaturatedColor;\n    vec3 result;\n    desaturatedColor = dot(desaturate, texel);\n    \n    \n    lookup.x = desaturatedColor;\n    result.r = texture2D(inputImageTexture3, lookup).r;\n    lookup.x = desaturatedColor;\n    result.g = texture2D(inputImageTexture3, lookup).g;\n    lookup.x = desaturatedColor;\n    result.b = texture2D(inputImageTexture3, lookup).b;\n    \n    texel = saturate * mix(texel, result, .5);\n    \n    vec2 tc = (2.0 * textureCoordinate) - 1.0;\n    float d = dot(tc, tc);\n    \n    vec3 sampled;\n    lookup.y = .5;\n    \n    /*\n     lookup.x = texel.r;\n     sampled.r = texture2D(inputImageTexture4, lookup).r;\n     \n     lookup.x = texel.g;\n     sampled.g = texture2D(inputImageTexture4, lookup).g;\n     \n     lookup.x = texel.b;\n     sampled.b = texture2D(inputImageTexture4, lookup).b;\n     \n     float value = smoothstep(0.0, 1.25, pow(d, 1.35)/1.65);\n     texel = mix(texel, sampled, value);\n     */\n    \n    //---\n    \n    lookup = vec2(d, texel.r);\n    texel.r = texture2D(inputImageTexture4, lookup).r;\n    lookup.y = texel.g;\n    texel.g = texture2D(inputImageTexture4, lookup).g;\n    lookup.y = texel.b;\n    texel.b\t= texture2D(inputImageTexture4, lookup).b;\n    float value = smoothstep(0.0, 1.25, pow(d, 1.35)/1.65);\n    \n    //---\n    \n    lookup.x = texel.r;\n    sampled.r = texture2D(inputImageTexture5, lookup).r;\n    lookup.x = texel.g;\n    sampled.g = texture2D(inputImageTexture5, lookup).g;\n    lookup.x = texel.b;\n    sampled.b = texture2D(inputImageTexture5, lookup).b;\n    texel = mix(sampled, texel, value);\n    \n    \n    lookup.x = texel.r;\n    texel.r = texture2D(inputImageTexture6, lookup).r;\n    lookup.x = texel.g;\n    texel.g = texture2D(inputImageTexture6, lookup).g;\n    lookup.x = texel.b;\n    texel.b = texture2D(inputImageTexture6, lookup).b;\n    \n    gl_FragColor = vec4(texel, 1.0);\n}\n"})}_setInput(){!this._resReady&&this._input&&this._res.ready&&(this._six.active(),this._six.setInput(this._input,0),this._six.setInput(this._image,1,!0),this._six.setInput(this._image2,2,!0),this._six.setInput(this._image3,3,!0),this._six.setInput(this._image4,4,!0),this._six.setInput(this._image5,5,!0),this._resReady=!0)}}},Ie={id:"hudson",filter:class extends V{constructor(e){super(e),this._four=new se(e),this._image=new Image,this._image2=new Image,this._image3=new Image,this._res.setQueue([{img:this._image,src:"data:image/jpg;base64,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"},{img:this._image2,src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAYAAABccqhmAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAAAAlwSFlzAAALEwAACxMBAJqcGAAADmBJREFUeNrtnX/E3mUbxu9LZmYymZlMJjOZZJLJzEySmZmZJEkyM0mSySQzk0wmM5lMMjMzM0mSycxMkklmkiRJkmSSTCZJzv56X+9b2/Pc3/t7/TjP6/g8PJ77/n6v8ziP4zjP+3ie1vMjTSYTm/DGG2+Sb0k9AFJKbIH6i0B4B5oHgPoLkADCg5b6iwVAlKFGWj64anMtwXN0ALQ2j/5J/gVE/1Q3AGoJrtEHLehR1jIoAIp8CVLImChcI3mKr/3t6tQBkIskOHDqlVNEnHkDYCwZ6mPX40Hf9cUCgDq4wtV/3ZwBMEvDwf8IUaEHWqhBSxoWACVJlRbshUtkncxUQ+foAChFWLl/a034qtP/pgGQW1CLc2jwtdTMzOe5mQPA25movD36iE86OzlTAOQgA4ZPDDzRwvhXAIwlwf3Y9/FA637WAKA2fi1+adUOCgBP9yJxjeQp/mjtapYAyE2ypiFwxw9l7lMHQE7iOWu8YkXUwmz0tBQLAK7DFa7+r/9fALQgRE8/PfFRr+fMAVBbTM9nvXDDIz3N8wbA2GbUx9GEr3r1MwWAtyG3utabFmajp6VqAPQyEBVdzKJ/XYMDwIMAD1i9ccBXzV2dMwBam1zzjDpH/NbkOCgASgkDtz0uXmjijgqAHILA8IGBJ5oYWQMg93M46S0z86r7/L8B4M0knvNC4Xn5500CoKVwepUJAHyN2TtLAFAbvxa/NGtnCoBcZ1v0RMt0AcBsNLRMFQCthdW+p8gNXzV3NWsAtDSG3v4CgJn47z04ALyfi8y9pUZmpKnxpgEwC2BJsqp8amrAV00+8wbA2Kae6tGSNwCYTXwtgwKghmH0a9MPTzX7ZQmAno1VeIwHursaKgBYLB5He9x9APRsKguDv71rmzoAvJgCht/AACMexpwBUIN0DTNU+NQKhl50w2dkAOQkDFY7LHzQxfpXAJQmq3jfO2d81b2fJQCoiV2DT7o1UwVArua1xaIl/5eTzKYvLTMHANf6uYYPutdGB0BN8tFwo/TCM10NgwKgtGi181444pvu+VsGQC2y9GnPAV91+2QPgGnueVoCtEyYjbCWeQOgNXGlHq044qXuTmUJgCFnaprXA68a3PFVl9fUAVCKIGfbn8UT3bODA2AWMmNqavdT9II56+78zAGQUygYbTHwRBcjWwCUFAl2X5/ZwPaDXTwAPJoZmUsJTnilu0tuAyD6R7jCNcLHNJlMDCMIK7wQ/dhbAKDFbwAwGwKgiYEqC1I7APC1A325A8C7KWgd8U0jeNef1rEBQG38WvwSrp01AEqTU8JvzQlfhfGHBkALwi3NUtDCbIS1TBsAXs5E4hrlDN4I7/B8AVBSbGsjwS4TAPgaiNuYAOj1nppmZq6peeYAaGlupN5RdDDD/nUMDoAcDcCIgYEnwhhDAqC1CE/XetLDjIT11AqAngbS25L1qgv+mQLAm5gecDxpwFdhnBwBUEKQx569YuKP8I7/MwBai8p5Hy11A4DZBLw/JgA8nI3A0ftZvBLe1bkCYNYm1MWqwxvhumkDIAeRWniRuHrQzqyEtc8SAK3NUuVbChtfhXe1VADwOM5jvBB+XDIAIpmhzBU/hbkOCYBoA4iA64EjvgrjzhcALYS1MLDnnjkCAE879SZXAHg/h6Y0OACYgYCmmwVAjsZgxMHAE2GMoQHAvf7u4YXwvbEBkItcrzgRuDIHYZxpAmBM01LCa51V4ISvwrs6SwCUJB0FqyfNzFZYc4kAaP0cLalYADCbzrT8JwB6G46H51E446vw85oBEHUZeueN58K8xwRAbzW965s1APCuY31DAsDbGe/8opzBD+FdHRsAUerQcuszzEZYy1wBUJqECr53TcxFGD9HAHAt9jV8EL42SwDUIkmfOn3wTrjPfAFQU2hNA+E1PADwrENeswZADsJg+MDAE2GM3AHA9Xjc8Vn4+v8GQEtCvfSIqI8ZCusbGwAeaqLy9lKDR8K7Om0A1L7nhYeCbmYurDtXAJQi28IgNS3MRljLkAAofT8qdvTe+Cq8q/8MgNbGeuEQgWOuHnglzHGWAKgltuYZZb54LMx31gDIKay2kWCVCQB8Dcj9ZgGQm1zLc2jJEwDMplMtYwOg97MKXjBr4b2/VQCUNk/xvFcN+Cp8PmcA1BxgBH5ReuGH8M7PFQBjGlIbpxa/hGvnC4CxzcHwj4EnwhjTBEAuMlHw1Lgxi/64TY03bQCUItkDdnRfmKnwrg8NgJoDUOvXSiO+CvcbEwAeBhuJj1ePmJvwbucMgGhDRYvPAGA2FbXUCgCGSwCo+RqCa6QA4J0A4D37eyIACAC8IAB4JwB4l3u/7bbb+DcAAgAvVHd1wYIF/F8A/i8As1HVsnDhQr4PgO8DwCPV3V60aBHfCch3AuKrar/FixfzswD8LAC+qO767bffzk8D8tOAzEL1pwGXLFnC7wPg9wHgiSrGHXfcwW8EEq/FL+HapUuX8jsBxXvhh/DOL1u2jN8KXOm8Vw34Knx++fLl/F0AYX38XQDxvb/zzjv5y0DiWpiNsJYVK1bwtwHFsfBCeFfvuusu/jpw4q8D47Eo35UrV1ruRvwt91gc8EqY4913321eTIiKHb03vgrv6qpVq6wGMW+4aJkuAJhN51pWr15tLU241T0vPBR0M3Nh3ffcc4+VIunBDGrKBAA1nezqmjVrRgVAruu99IiojxkK67v33nuttbE9Xo/EHZ+Fr993333mbSBg1MXAE2GMtWvXWq6GpQjDq+xZPBPmdf/991ttAvTx1QfvhPs88MADVpMQ1/xdwwfha+vWrRsdAKUJR8f3rom5COM/+OCDlpusxzq0jAsAZtOplvXr11tpwaXOeOcX5Qx+CO/qhg0brKSISDW96ysZAOxG0JqNGzdaLlNqGF8DU403ngvz3rRpU7UAUHsehTO+Cj9/6KGHrDeBaPEbAMzG2fOHH37YPBsTZWCRsZitsOZHHnnEajaOdlaBE74K7+rmzZutFmFFnAhcmYMwzpYtW6yF6dzzcw8vhO9t3bp1UADkaA6GLww8EcbYtm2blSbl4Rya8gYAM+hE0/bt2y23EbWMjMjTozfMUXjHd+zYYbUIgOuTI74K4z766KMWTRRc8+LipzDXxx57zCIZwOMYAcDjII8ff/zxIgEQzRBljvgqvKtPPPGEtTYs0nB71M6shLU/+eSTVpIgdf7r8Ea47qmnnrIcDVudjcDR+1m8Et7Vp59+2koJan0fLeUCgNl0omXnzp1WmkAL0WDWDwA8D7jju3btshJEwImjAV+FcXbv3m25wGuLaXUtOv/SAcCsAvF/5plnqgRAb0vWkx5mJKzn2WeftZoEwPCHgSfCGM8995zlaJrzfC+9o+hghv3ruOX5559/3nIS6+GemmZmrql5MplM0gsvvDBzAJQk3LpeCRtfhXd1z549NpZczTORuEY5gzfCO/ziiy9OFQC5ibXEQ8vcAcBshLTs3bt3UACUNksRvzUnfBXGf+mll2YKgDGCqPVVi1/CtS+//PKoAMgpogYmWocHAN51rHXfvn1WgmALUzz0itgTX4V3df/+/U0CoKcFia6F2QhrOXDgQFcBwEe/AcBHhx9feeUVwwjtFxVcdT+mV1991Rh0vKVTwGKXKgTAwYMHLapgsPNg448udnrttdfMC0Ew2mDgiS5GOnTokEX4rEFNuX7MWXfn0+uvv26lGnA2xlk80T2bDh8+bLkAvX5pGplXDe74qssrHTlyxEp+BqlR30uPVhzxUnen0htvvGGtvnTs4V4PWpiNrpZ09OhRK71MtZY2cp+WHPBVt0968803rUVzzvvhiG+659OxY8es9fBa9+pBw5heeKarIb311lvWiijXfFzDB91r6e2337axS1N7SSNhR9DCbHS1pOPHj1vppaLGdw0+6dakEydOjA4A7ucfXs37+Kp7P508edJqLBZYfrHwQRcrnTp1ynIvjoezinxyv+h71w2fNEmnT582j59FwGj/QsfX/jHSmTNnLNoC9tbH6wsaf/vXls6ePWssDI95rLmz6Z133rFIxrJYZTzFD81dTe+++65FE0q/+AFAPx/90nvvvWe1RHkyFS15A4DZxNSS3n//fctNoKQ4JT41NeCrJp/0wQcfWGkSNc9F5t5SIzPS1JjOnTtntYW1NJXewwOAmfTbO3344YdWipgnY3rhHSkA8NU/73T+/HnL2aSFMA9no2thNppa0oULFwYHwBhS1PqsxS/N2nTx4sXRAVBTZKTekXrhq+aupkuXLllroTxv/xwPNJ+njz76yFhKOOGNJqf08ccfG4sIBp5oYqRPPvnEWi8WuO1x8UITN12+fNlKN/f2WQqOPvuxE/U5pk8//dS8kIqE1RsHfNXc1fTZZ5+Z96Xoddm5xixa60pXrlyxmsJ6GlJvWpiNnpZ09epVq01Ivd6rJnzVq0+ff/655SKQ42ztfmjGI2XN6YsvvrCc5FoYQs88PfFRr2f68ssvrbXYnq/DFa6er6evvvrKvAzI64KoaGE2elrS119/bS3IeV9eRe74occ9ffPNNxZtqaJxjeQp/mjtavr222+thhBqY9Til1Zt+u6777IFAPfj38cDrfvp+++/N49LBEYbDDzRwkg//PCDeV6kac9E5e3RR3zS2cn0448/Wklxrc6hoXwAMLP4GtJPP/1k3pZKvX9rTfiq0z9du3bNxhIoKS4yl8g6mamGzvTzzz9bq6Wp1QMt1KDlFt8w9Msvv1juZtTBFa4x6tKvv/5qpQZCffx6POi7Pl2/ft1qLRI4cOqZU0Sc9Ntvv1mL4ZXEjMQ1kqf42t+uphs3bpinBavdBy3oUdaSfv/9d4uydPT31x8PYvdPf/zxh/W6mD3xhCtci/ynwp9//mmYj3480NSf/vrrL8N83tgBzbe/AUl9O6vTy8wXAAAAAElFTkSuQmCC"},{img:this._image3,src:"data:image/png;base64,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"}]),this._res.start()}active(){super.active(),this._four.active()}init(){super.init(),this.addFilter(this._four),this._four.init({fragment:"\nprecision lowp float;\n \nvarying highp vec2 textureCoordinate;\n\nuniform sampler2D inputImageTexture;\nuniform sampler2D inputImageTexture2; //blowout;\nuniform sampler2D inputImageTexture3; //overlay;\nuniform sampler2D inputImageTexture4; //map\n\nvoid main()\n{\n    \n    vec4 texel = texture2D(inputImageTexture, textureCoordinate);\n    \n    vec3 bbTexel = texture2D(inputImageTexture2, textureCoordinate).rgb;\n    \n    texel.r = texture2D(inputImageTexture3, vec2(bbTexel.r, texel.r)).r;\n    texel.g = texture2D(inputImageTexture3, vec2(bbTexel.g, texel.g)).g;\n    texel.b = texture2D(inputImageTexture3, vec2(bbTexel.b, texel.b)).b;\n    \n    vec4 mapped;\n    mapped.r = texture2D(inputImageTexture4, vec2(texel.r, .16666)).r;\n    mapped.g = texture2D(inputImageTexture4, vec2(texel.g, .5)).g;\n    mapped.b = texture2D(inputImageTexture4, vec2(texel.b, .83333)).b;\n    mapped.a = 1.0;\n    gl_FragColor = mapped;\n}\n"})}_setInput(){!this._resReady&&this._input&&this._res.ready&&(this._four.active(),this._four.setInput(this._input,0),this._four.setInput(this._image,1,!0),this._four.setInput(this._image2,2,!0),this._four.setInput(this._image3,3,!0),this._resReady=!0)}}},Re={id:"kelvin",filter:class extends V{constructor(e){super(e),this._two=new H(e),this._image=new Image,this._res.setQueue([{img:this._image,src:"data:image/png;base64,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"}]),this._res.start()}active(){super.active(),this._two.active()}init(){super.init(),this.addFilter(this._two),this._two.init({fragment:"\nprecision lowp float;\n \nvarying highp vec2 textureCoordinate;\n\nuniform sampler2D inputImageTexture;\nuniform sampler2D inputImageTexture2;\n\nvoid main()\n{\n    vec3 texel = texture2D(inputImageTexture, textureCoordinate).rgb;\n    \n    vec2 lookup;\n    lookup.y = .5;\n    \n    lookup.x = texel.r;\n    texel.r = texture2D(inputImageTexture2, lookup).r;\n    \n    lookup.x = texel.g;\n    texel.g = texture2D(inputImageTexture2, lookup).g;\n    \n    lookup.x = texel.b;\n    texel.b = texture2D(inputImageTexture2, lookup).b;\n    \n    gl_FragColor = vec4(texel, 1.0);\n}\n"})}_setInput(){!this._resReady&&this._input&&this._res.ready&&(this._two.active(),this._two.setInput(this._input,0),this._two.setInput(this._image,1,!0),this._resReady=!0)}}},we={id:"valencia",filter:class extends V{constructor(e){super(e),this._three=new j(e),this._image=new Image,this._image2=new Image,this._res.setQueue([{img:this._image,src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAADCAYAAAB8kdF8AAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAAAAlwSFlzAAALEwAACxMBAJqcGAAAAM9JREFUSMe9llsOhDAIRQ/MNoz736V+dJo4jn3wqCbGwC0UWuEiO9uhgAD6fYXyyEWWB+yOV7mHc5N7vmXSdoRl2rLAL5O2OPfF4LfKBM6RYFwk5DTKo4eTfH+e+8jOqYntbMdPBd67QUuuuk+jS2ing7Rkrz66VgJV/JaflfYk7MWCzhzt4kz+B7yIrWAx/H5KA/irGBrcrR1vaoh0tFYNvPik1yRuy1qrk9yREQOO88Fg6+WtGY5UI/9HzuB6NwTmLwzzgXXmUeN8ZMmjfE+f+gZMCH29JQAAAABJRU5ErkJggg=="},{img:this._image2,src:"data:image/png;base64,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"}]),this._res.start()}active(){super.active(),this._three.active()}init(){super.init(),this.addFilter(this._three),this._three.init({fragment:"\nprecision lowp float;\n \nvarying highp vec2 textureCoordinate;\n\nuniform sampler2D inputImageTexture;\nuniform sampler2D inputImageTexture2; //map\nuniform sampler2D inputImageTexture3; //gradMap\n\nmat3 saturateMatrix = mat3(\n                           1.1402,\n                           -0.0598,\n                           -0.061,\n                           -0.1174,\n                           1.0826,\n                           -0.1186,\n                           -0.0228,\n                           -0.0228,\n                           1.1772);\n\nvec3 lumaCoeffs = vec3(.3, .59, .11);\n\nvoid main()\n{\n    vec3 texel = texture2D(inputImageTexture, textureCoordinate).rgb;\n    \n    texel = vec3(\n                 texture2D(inputImageTexture2, vec2(texel.r, .1666666)).r,\n                 texture2D(inputImageTexture2, vec2(texel.g, .5)).g,\n                 texture2D(inputImageTexture2, vec2(texel.b, .8333333)).b\n                 );\n    \n    texel = saturateMatrix * texel;\n    float luma = dot(lumaCoeffs, texel);\n    texel = vec3(\n                 texture2D(inputImageTexture3, vec2(luma, texel.r)).r,\n                 texture2D(inputImageTexture3, vec2(luma, texel.g)).g,\n                 texture2D(inputImageTexture3, vec2(luma, texel.b)).b);\n    \n    gl_FragColor = vec4(texel, 1.0);\n}\n"})}_setInput(){!this._resReady&&this._input&&this._res.ready&&(this._three.active(),this._three.setInput(this._input,0),this._three.setInput(this._image,1,!0),this._three.setInput(this._image2,2,!0),this._resReady=!0)}}},Pe={id:"redBlindCurrect",filter:class extends re{constructor(e){super(e),this._matrixList=[[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],[1.0849,-.1048,.02,0,.0692,.9158,.0149,0,.1658,-.2117,1.0459,0,0,0,0,1],[1.1571,-.1933,.0361,0,.1288,.8442,.027,0,.3035,-.3869,1.0834,0,0,0,0,1],[1.2199,-.2693,.0495,0,.1812,.7819,.0369,0,.42,-.5344,1.1144,0,0,0,0,1],[1.2752,-.3358,.0606,0,.2279,.727,.0452,0,.5201,-.6605,1.1404,0,0,0,0,1],[1.2752,-.3358,.0606,0,.2279,.727,.0452,0,.5201,-.6605,1.1404,0,0,0,0,1],[1.3247,-.3947,.07,0,.2701,.6777,.0521,0,.6073,-.7698,1.1625,0,0,0,0,1],[1.3696,-.4476,.078,0,.3088,.6332,.058,0,.6839,-.8654,1.1814,0,0,0,0,1],[1.4106,-.4955,.0849,0,.3446,.5923,.0631,0,.7521,-.9499,1.1978,0,0,0,0,1],[1.4484,-.5393,.0909,0,.3779,.5546,.0675,0,.8131,-1.0252,1.212,0,0,0,0,1],[1.4836,-.5798,.0962,0,.4092,.5194,.0714,0,.8683,-1.0928,1.2245,0,0,0,0,1],[1,0,0,0,.5836,.4146,0,0,.6384,-.6384,1,0,0,0,0,1]],this.colorMatrixList=this._matrixList,this.intensity=5}},paramsInfo:{intensity:{min:0,max:10,default:8}}},De={id:"blueBlindCurrect",filter:class extends re{constructor(e){super(e),this._matrixList=[[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],[1,-.0806,.0806,0,0,.9379,.0621,0,0,.0105,.9895,0,0,0,0,1],[1,-.1611,.1611,0,0,.8758,.1242,0,0,.021,.979,0,0,0,0,1],[1,-.2417,.2417,0,0,.8137,.1863,0,0,.0314,.9686,0,0,0,0,1],[1,-.3223,.3223,0,0,.7515,.2485,0,0,.0419,.9581,0,0,0,0,1],[1,-.4029,.4029,0,0,.6894,.3106,0,0,.0524,.9476,0,0,0,0,1],[1,-.4834,.4834,0,0,.6273,.3727,0,0,.0629,.9371,0,0,0,0,1],[1,-.564,.564,0,0,.5652,.4348,0,0,.0734,.9266,0,0,0,0,1],[1,-.6446,.6446,0,0,.5031,.4969,0,0,.0839,.9161,0,0,0,0,1],[1,-.7251,.7251,0,0,.441,.559,0,0,.0943,.9057,0,0,0,0,1],[1,-.805712,.805712,0,0,.378838,.621162,0,0,.104823,.895177,0,0,0,0,1]],this.colorMatrixList=this._matrixList,this.intensity=5}},paramsInfo:{intensity:{min:0,max:10,default:8}}},ke={id:"greenBlindCurrect",filter:class extends re{constructor(e){super(e),this._matrixList=[[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],[1.0989,-.135,.0362,0,0,1,0,0,-.0312,.0354,.9958,0,0,0,0,1],[1.1759,-.2416,.0657,0,0,1,0,0,-.0574,.0642,.9932,0,0,0,0,1],[1.2369,-.3273,.0904,0,0,1,0,0,-.0798,.088,.9918,0,0,0,0,1],[1.2858,-.3972,.1114,0,0,1,0,0,-.0993,.1082,.9912,0,0,0,0,1],[1.3253,-.455,.1297,0,0,1,0,0,-.1168,.1255,.9913,0,0,0,0,1],[1.49,-.6574,.1674,0,.2526,.6514,.096,0,-.3541,.4465,.9076,0,0,0,0,1],[1.5314,-.7144,.1831,0,.2729,.6217,.1054,0,-.3851,.4843,.9008,0,0,0,0,1],[1.5669,-.7639,.197,0,.2901,.5961,.1139,0,-.4119,.5168,.8952,0,0,0,0,1],[1.5669,-.7639,.197,0,.2901,.5961,.1139,0,-.4119,.5168,.8952,0,0,0,0,1],[1.4027,-.8266,.424,0,.174,.6429,.1832,0,-.2818,.5784,.7032,0,0,0,0,1]],this.colorMatrixList=this._matrixList,this.intensity=5}},paramsInfo:{intensity:{min:0,max:10,default:8}}},Oe={id:"sketchInteractive",filter:class extends I{constructor(e){super(e),this._singleStepOffsetUniform=null,this._mouseUniform=null,this._resolutionUniform=null,this._texelWidth=0,this._texelHeight=0,this._mouse=[.5,.5],this._resolution=[1,1],this._fragmentShader="\nprecision mediump float;\n\nvarying vec2 textureCoordinate;\nuniform vec2 mouse;\nuniform vec2 resolution;\n\nuniform vec2 singleStepOffset; \nuniform sampler2D inputImageTexture;\n\n\n/* Adapted from Robert Penner easing equations */\n#define PI_TWO 1.570796326794897\n\nconst vec3 W = vec3(0.299,0.587,0.114);\n\nvoid main (){\n    float threshold = 0.;\n    vec4 oralColor = texture2D(inputImageTexture, textureCoordinate);\n    vec2 center = mouse;\n    center.x = center.x / resolution.x;\n    center.y = (resolution.y - center.y) / resolution.x;\n    // center.y = center.y* resolution.y / resolution.x;\n    vec2 poi = textureCoordinate;\n    poi.y = poi.y * resolution.y / resolution.x;\n    float len = length(center - poi);\n\n    if(len < .08){\n        gl_FragColor = oralColor;\n        return ;\n    }\n    float pre = smoothstep(.08 , .14,len);\n\n    vec3 maxValue = vec3(0.);\n\n    for(int i= -2 ; i<=2 ;i++){\n        for(int j=-2 ; j <=2 ;j++){\n            vec4 tempColor = texture2D(inputImageTexture, textureCoordinate + singleStepOffset*vec2( float(i),float(j) ));\n\n            maxValue = max(maxValue , tempColor.rgb);\n\n            threshold += dot(tempColor.rgb , W );\n        }\n    }\n\n    float gray1 = dot(oralColor.rgb , W);\n\n    float gray2 = dot(maxValue, W);\n\n    float contour = gray1 / gray2;\n\n    threshold = threshold / 25.;\n\n    // float alpha = gray1 > threshold ? 1. : 0.;\n    float alpha = (gray1/threshold);\n    // float alpha = gray1 > threshold ? 1. : (gray1/threshold);\n\n    float result = contour * alpha + (1. - alpha)* gray1;\n\n    gl_FragColor = mix(vec4(vec3(result) , oralColor.a) , oralColor, 1.-pre);\n}\n"}active(){super.active(),this._program&&this._gl&&(this._singleStepOffsetUniform=this._gl.getUniformLocation(this._program,"singleStepOffset"),this._mouseUniform=this._gl.getUniformLocation(this._program,"mouse"),this._resolutionUniform=this._gl.getUniformLocation(this._program,"resolution"),this._gl.uniform2fv(this._singleStepOffsetUniform,[this._texelWidth,this._texelHeight]),this.mouse=[this._gl.canvas.width/2,this._gl.canvas.height/2],this._gl.canvas instanceof HTMLCanvasElement?this.resolution=[this._gl.canvas.clientWidth,this._gl.canvas.clientHeight]:this.resolution=[this._gl.canvas.width,this._gl.canvas.height])}setInputSize(e){super.setInputSize(e),this._texelWidth=1/this._inputWidth,this._texelHeight=1/this._inputHeight,this._gl&&this._isActivated&&this._gl.uniform2fv(this._singleStepOffsetUniform,[this._texelWidth,this._texelHeight])}set mouse(e){const t=A.getPixelRatio();e[0]=e[0]-this._viewport.x/t,e[1]=e[1]-this._viewport.y/t,this._mouse=e,this._gl&&this._isActivated&&this._gl.uniform2fv(this._mouseUniform,e)}set resolution(e){this._resolution=e,this._gl&&this._isActivated&&this._gl.uniform2fv(this._resolutionUniform,e)}_updateSize(){super._updateSize();const e=A.getPixelRatio();this.resolution=[this._viewport.w/e,this._viewport.h/e]}},paramsInfo:{mouse:{}}},Me={id:"USM",filter:class extends F{constructor(e){super(e),this._intensity=1,this._blurRadiusInPixels=5,this._blurFilter=new q(this._gl),this._baseFilter=new I(this._gl),this._twoInputFilter=new de(this._gl)}init(){super.init(),this._gl&&(this._blurFilter.init(),this._baseFilter.init(),this._twoInputFilter.init(),this.addFilter(this._blurFilter),this.addFilter(this._baseFilter),this.addFilter(this._twoInputFilter))}setInput(e){this._blurFilter.active(),this._blurFilter.setInput(e),this._blurFilter.drawToFBO(),this._baseFilter.active(),this._baseFilter.setInput(e),this._baseFilter.drawToFBO(),this._blurFilter.outputResource&&this._baseFilter.outputResource&&(this._twoInputFilter.active(),this._twoInputFilter.setInput(this._baseFilter.outputResource,0),this._twoInputFilter.setInput(this._blurFilter.outputResource,1))}setInputSize(e){this._inputWidth=e.width,this._inputHeight=e.height,this._gl&&(this._blurFilter.setInputSize(e),this._baseFilter.setInputSize(e),this._twoInputFilter.setInputSize({width:this._gl.canvas.width,height:this._gl.canvas.height}))}active(){this._blurFilter&&this._twoInputFilter&&(this._blurFilter.active(),this._twoInputFilter.active(),this.blurRadiusInPixels=this._blurRadiusInPixels,this.intensity=this._intensity)}set blurRadiusInPixels(e){e!==this._blurRadiusInPixels&&(this._blurRadiusInPixels=e,this._blurFilter.blurRadiusInPixels=e)}set intensity(e){e!==this._intensity&&(this._intensity=e,this._twoInputFilter.intensity=e)}},paramsInfo:{intensity:{min:0,default:1.3,max:3}}},Be={id:"beauty",filter:class extends F{constructor(e){super(e),this._intensity=.5,this._base=new I(e),this._bilateral=new Y(e),this._cannyEdge=new $(e),this._combination=new ie(e),this._hsb=new te(e)}active(){super.active(),this._bilateral.active(),this._cannyEdge.active(),this._combination.active(),this._hsb.active()}init(){super.init(),this._base.init(),this._bilateral.init(),this._bilateral.distanceNormalizationFactor=4,this._cannyEdge.init(),this._combination.init(),this._hsb.init(),this._hsb.adjustBrightness=1.1,this._hsb.adjustSaturation=1.1,this.addFilter(this._base),this.addFilter(this._bilateral),this.addFilter(this._cannyEdge),this.addFilter(this._combination),this.addFilter(this._hsb)}setInput(e){this._base.active(),this._base.setInput(e),this._base.drawToFBO(),this._base.outputResource&&(this._bilateral.active(),this._bilateral.setInput(this._base.outputResource),this._bilateral.drawToFBO(),this._cannyEdge.active(),this._cannyEdge.setInput(this._base.outputResource),this._cannyEdge.drawToFBO(),this._bilateral.outputResource&&this._cannyEdge.outputResource&&(this._combination.active(),this._combination.setInput(this._bilateral.outputResource,0),this._combination.setInput(this._cannyEdge.outputResource,1),this._combination.setInput(this._base.outputResource,2),this._combination.drawToFBO()),this._combination.outputResource&&this._hsb.setInput(this._combination.outputResource))}set intensity(e){e>=0&&e<=1&&(this._combination.intensity=e)}},paramsInfo:{intensity:{min:0,max:1,default:.5}}},Ue={id:"beauty2",filter:class extends I{constructor(e){super(e),this._singleStepOffsetUniform=null,this._paramsUniform=null,this._brightnessUniform=null,this._enabledUniform=null,this._texelWidth=0,this._texelHeight=0,this._brightness=.5,this._beauty=.5,this._ruddy=.5,this._enabled=0,this._fragmentShader="\n    precision highp float;\n    uniform vec2 singleStepOffset;\n    uniform sampler2D inputImageTexture;\n    uniform vec4 params;\n    uniform float brightness;\n    uniform int enabled;\n    varying vec2 textureCoordinate;\n    const highp vec3 W = vec3(0.299,0.587,0.114);\n    const mat3 saturateMatrix = mat3(1.1102,-0.0598,-0.061,-0.0774,1.0826,-0.1186,-0.0228,-0.0228,1.1772);\n    vec2 blurCoordinates[24];\n\n    float hardLight(float color) {\n        if(color <= 0.5){\n            color = color * color * 2.0;\n        } else {\n            color = 1.0 - ((1.0 - color)*(1.0 - color) * 2.0);\n        }\n        return color;\n    }\n\n    void main(){\n        if (enabled == 0) {\n            gl_FragColor = texture2D(inputImageTexture, textureCoordinate);\n        } else {\n            vec3 centralColor = texture2D(inputImageTexture, textureCoordinate).rgb;\n            blurCoordinates[0] = textureCoordinate.xy + singleStepOffset * vec2(0.0, -10.0);\n            blurCoordinates[1] = textureCoordinate.xy + singleStepOffset * vec2(0.0, 10.0);\n            blurCoordinates[2] = textureCoordinate.xy + singleStepOffset * vec2(-10.0, 0.0);\n            blurCoordinates[3] = textureCoordinate.xy + singleStepOffset * vec2(10.0, 0.0);\n            blurCoordinates[4] = textureCoordinate.xy + singleStepOffset * vec2(5.0, -8.0);\n            blurCoordinates[5] = textureCoordinate.xy + singleStepOffset * vec2(5.0, 8.0);\n            blurCoordinates[6] = textureCoordinate.xy + singleStepOffset * vec2(-5.0, 8.0);\n            blurCoordinates[7] = textureCoordinate.xy + singleStepOffset * vec2(-5.0, -8.0);\n            blurCoordinates[8] = textureCoordinate.xy + singleStepOffset * vec2(8.0, -5.0);\n            blurCoordinates[9] = textureCoordinate.xy + singleStepOffset * vec2(8.0, 5.0);\n            blurCoordinates[10] = textureCoordinate.xy + singleStepOffset * vec2(-8.0, 5.0);\n            blurCoordinates[11] = textureCoordinate.xy + singleStepOffset * vec2(-8.0, -5.0);\n            blurCoordinates[12] = textureCoordinate.xy + singleStepOffset * vec2(0.0, -6.0);\n            blurCoordinates[13] = textureCoordinate.xy + singleStepOffset * vec2(0.0, 6.0);\n            blurCoordinates[14] = textureCoordinate.xy + singleStepOffset * vec2(6.0, 0.0);\n            blurCoordinates[15] = textureCoordinate.xy + singleStepOffset * vec2(-6.0, 0.0);\n            blurCoordinates[16] = textureCoordinate.xy + singleStepOffset * vec2(-4.0, -4.0);\n            blurCoordinates[17] = textureCoordinate.xy + singleStepOffset * vec2(-4.0, 4.0);\n            blurCoordinates[18] = textureCoordinate.xy + singleStepOffset * vec2(4.0, -4.0);\n            blurCoordinates[19] = textureCoordinate.xy + singleStepOffset * vec2(4.0, 4.0);\n            blurCoordinates[20] = textureCoordinate.xy + singleStepOffset * vec2(-2.0, -2.0);\n            blurCoordinates[21] = textureCoordinate.xy + singleStepOffset * vec2(-2.0, 2.0);\n            blurCoordinates[22] = textureCoordinate.xy + singleStepOffset * vec2(2.0, -2.0);\n            blurCoordinates[23] = textureCoordinate.xy + singleStepOffset * vec2(2.0, 2.0);\n    \n            float sampleColor = centralColor.g * 22.0;\n            sampleColor += texture2D(inputImageTexture, blurCoordinates[0]).g;\n            sampleColor += texture2D(inputImageTexture, blurCoordinates[1]).g;\n            sampleColor += texture2D(inputImageTexture, blurCoordinates[2]).g;\n            sampleColor += texture2D(inputImageTexture, blurCoordinates[3]).g;\n            sampleColor += texture2D(inputImageTexture, blurCoordinates[4]).g;\n            sampleColor += texture2D(inputImageTexture, blurCoordinates[5]).g;\n            sampleColor += texture2D(inputImageTexture, blurCoordinates[6]).g;\n            sampleColor += texture2D(inputImageTexture, blurCoordinates[7]).g;\n            sampleColor += texture2D(inputImageTexture, blurCoordinates[8]).g;\n            sampleColor += texture2D(inputImageTexture, blurCoordinates[9]).g;\n            sampleColor += texture2D(inputImageTexture, blurCoordinates[10]).g;\n            sampleColor += texture2D(inputImageTexture, blurCoordinates[11]).g;\n            sampleColor += texture2D(inputImageTexture, blurCoordinates[12]).g * 2.0;\n            sampleColor += texture2D(inputImageTexture, blurCoordinates[13]).g * 2.0;\n            sampleColor += texture2D(inputImageTexture, blurCoordinates[14]).g * 2.0;\n            sampleColor += texture2D(inputImageTexture, blurCoordinates[15]).g * 2.0;\n            sampleColor += texture2D(inputImageTexture, blurCoordinates[16]).g * 2.0;\n            sampleColor += texture2D(inputImageTexture, blurCoordinates[17]).g * 2.0;\n            sampleColor += texture2D(inputImageTexture, blurCoordinates[18]).g * 2.0;\n            sampleColor += texture2D(inputImageTexture, blurCoordinates[19]).g * 2.0;\n            sampleColor += texture2D(inputImageTexture, blurCoordinates[20]).g * 3.0;\n            sampleColor += texture2D(inputImageTexture, blurCoordinates[21]).g * 3.0;\n            sampleColor += texture2D(inputImageTexture, blurCoordinates[22]).g * 3.0;\n            sampleColor += texture2D(inputImageTexture, blurCoordinates[23]).g * 3.0;\n            sampleColor = sampleColor / 62.0;\n    \n            float highPass = centralColor.g - sampleColor + 0.5;\n            for(int i = 0; i < 5;i++){\n                highPass = hardLight(highPass);\n            }\n            float luminance = dot(centralColor, W);\n            float alpha = pow(luminance, params.r);\n            vec3 smoothColor = centralColor + (centralColor-vec3(highPass))*alpha*0.1;\n            smoothColor.r = clamp(pow(smoothColor.r, params.g),0.0,1.0);\n            smoothColor.g = clamp(pow(smoothColor.g, params.g),0.0,1.0);\n            smoothColor.b = clamp(pow(smoothColor.b, params.g),0.0,1.0);\n    \n            vec3 screen = vec3(1.0) - (vec3(1.0)-smoothColor) * (vec3(1.0)-centralColor);\n            vec3 lighten = max(smoothColor, centralColor);\n            vec3 softLight = 2.0 * centralColor*smoothColor + centralColor*centralColor - 2.0 * centralColor*centralColor * smoothColor;\n    \n            gl_FragColor = vec4(mix(centralColor, screen, alpha), 1.0);\n            gl_FragColor.rgb = mix(gl_FragColor.rgb, lighten, alpha);\n            gl_FragColor.rgb = mix(gl_FragColor.rgb, softLight, params.b);\n            vec3 satColor = gl_FragColor.rgb * saturateMatrix;\n            gl_FragColor.rgb = mix(gl_FragColor.rgb, satColor, params.a);\n            gl_FragColor.rgb = vec3(gl_FragColor.rgb + vec3(brightness));\n        }\n    }\n"}active(){super.active(),this._gl&&this._program&&(this._singleStepOffsetUniform=this._gl.getUniformLocation(this._program,"singleStepOffset"),this._paramsUniform=this._gl.getUniformLocation(this._program,"params"),this._brightnessUniform=this._gl.getUniformLocation(this._program,"brightness"),this._enabledUniform=this._gl.getUniformLocation(this._program,"enabled"),this._gl.uniform2f(this._singleStepOffsetUniform,this._texelWidth,this._texelHeight),this._updateParams())}setInputSize(e){super.setInputSize(e),this._texelWidth=2/this._inputWidth,this._texelHeight=2/this._inputHeight,this._gl&&this._isActivated&&this._gl.uniform2f(this._singleStepOffsetUniform,this._texelWidth,this._texelHeight)}set brightness(e){e!==this._brightness&&(this._brightness=e,this._updateParams())}set beauty(e){e!==this._beauty&&(this._beauty=e,this._updateParams())}set ruddy(e){e!==this._ruddy&&(this._ruddy=e,this._updateParams())}_updateParams(){if(this._gl&&this._isActivated){this._enabled=0===this._beauty&&0===this._brightness&&0===this._ruddy?0:1,this._gl.uniform1i(this._enabledUniform,this._enabled);const e=new Float32Array([1-.8*this._beauty,1-.6*this._beauty,.1+.45*this._ruddy,.1+.45*this._ruddy]);this._gl.uniform4fv(this._paramsUniform,e),this._gl.uniform1f(this._brightnessUniform,.12*this._brightness)}}},paramsInfo:{brightness:{min:-1,max:1,default:.5},beauty:{min:-1,max:1,default:.5},ruddy:{min:-1,max:1,default:.5}}},Ne={id:"alpha",filter:class extends I{constructor(e){super(e),this._vertexShader="\nattribute vec4 position;\nattribute vec4 inputTextureCoordinate;\n\nvarying vec2 textureCoordinate;\n\nvoid main() {\n    gl_Position = position;\n    textureCoordinate = vec2(inputTextureCoordinate.x / 2.0, inputTextureCoordinate.y);\n}\n",this._fragmentShader="\nprecision highp float;\n\nvarying highp vec2 textureCoordinate;\n\nuniform sampler2D inputImageTexture;\n\nconst vec2 leftW = vec2(0.5,0.0);\n\nvoid main() {\n    vec3 colorRGB = texture2D(inputImageTexture, textureCoordinate).rgb;\n    vec2 rightTextureCoordinate = leftW + textureCoordinate;\n    float colorA = texture2D(inputImageTexture, rightTextureCoordinate).r;\n    gl_FragColor = vec4(colorRGB.rgb, colorA);\n}\n"}setInputSize(e,t=0){this._inputWidth===e.width/2&&this._inputHeight===e.height||(this._inputWidth=e.width/2,this._inputHeight=e.height)}}}},9669:(e,t,i)=>{e.exports=i(1609)},5448:(e,t,i)=>{"use strict";var r=i(4867),n=i(6026),s=i(4372),a=i(5327),o=i(4097),c=i(4109),u=i(7985),d=i(5061),l=i(5655),h=i(5263);e.exports=function(e){return new Promise((function(t,i){var p,f=e.data,A=e.headers,m=e.responseType;function g(){e.cancelToken&&e.cancelToken.unsubscribe(p),e.signal&&e.signal.removeEventListener("abort",p)}r.isFormData(f)&&delete A["Content-Type"];var T=new XMLHttpRequest;if(e.auth){var v=e.auth.username||"",C=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";A.Authorization="Basic "+btoa(v+":"+C)}var E=o(e.baseURL,e.url);function S(){if(T){var r="getAllResponseHeaders"in T?c(T.getAllResponseHeaders()):null,s={data:m&&"text"!==m&&"json"!==m?T.response:T.responseText,status:T.status,statusText:T.statusText,headers:r,config:e,request:T};n((function(e){t(e),g()}),(function(e){i(e),g()}),s),T=null}}if(T.open(e.method.toUpperCase(),a(E,e.params,e.paramsSerializer),!0),T.timeout=e.timeout,"onloadend"in T?T.onloadend=S:T.onreadystatechange=function(){T&&4===T.readyState&&(0!==T.status||T.responseURL&&0===T.responseURL.indexOf("file:"))&&setTimeout(S)},T.onabort=function(){T&&(i(d("Request aborted",e,"ECONNABORTED",T)),T=null)},T.onerror=function(){i(d("Network Error",e,null,T)),T=null},T.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",r=e.transitional||l.transitional;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),i(d(t,e,r.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",T)),T=null},r.isStandardBrowserEnv()){var x=(e.withCredentials||u(E))&&e.xsrfCookieName?s.read(e.xsrfCookieName):void 0;x&&(A[e.xsrfHeaderName]=x)}"setRequestHeader"in T&&r.forEach(A,(function(e,t){void 0===f&&"content-type"===t.toLowerCase()?delete A[t]:T.setRequestHeader(t,e)})),r.isUndefined(e.withCredentials)||(T.withCredentials=!!e.withCredentials),m&&"json"!==m&&(T.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&T.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&T.upload&&T.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(p=function(e){T&&(i(!e||e&&e.type?new h("canceled"):e),T.abort(),T=null)},e.cancelToken&&e.cancelToken.subscribe(p),e.signal&&(e.signal.aborted?p():e.signal.addEventListener("abort",p))),f||(f=null),T.send(f)}))}},1609:(e,t,i)=>{"use strict";var r=i(4867),n=i(1849),s=i(321),a=i(7185);var o=function e(t){var i=new s(t),o=n(s.prototype.request,i);return r.extend(o,s.prototype,i),r.extend(o,i),o.create=function(i){return e(a(t,i))},o}(i(5655));o.Axios=s,o.Cancel=i(5263),o.CancelToken=i(4972),o.isCancel=i(6502),o.VERSION=i(7288).version,o.all=function(e){return Promise.all(e)},o.spread=i(8713),o.isAxiosError=i(6268),e.exports=o,e.exports.default=o},5263:e=>{"use strict";function t(e){this.message=e}t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,e.exports=t},4972:(e,t,i)=>{"use strict";var r=i(5263);function n(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var i=this;this.promise.then((function(e){if(i._listeners){var t,r=i._listeners.length;for(t=0;t<r;t++)i._listeners[t](e);i._listeners=null}})),this.promise.then=function(e){var t,r=new Promise((function(e){i.subscribe(e),t=e})).then(e);return r.cancel=function(){i.unsubscribe(t)},r},e((function(e){i.reason||(i.reason=new r(e),t(i.reason))}))}n.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},n.prototype.subscribe=function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]},n.prototype.unsubscribe=function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}},n.source=function(){var e;return{token:new n((function(t){e=t})),cancel:e}},e.exports=n},6502:e=>{"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},321:(e,t,i)=>{"use strict";var r=i(4867),n=i(5327),s=i(782),a=i(3572),o=i(7185),c=i(4875),u=c.validators;function d(e){this.defaults=e,this.interceptors={request:new s,response:new s}}d.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=o(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=e.transitional;void 0!==t&&c.assertOptions(t,{silentJSONParsing:u.transitional(u.boolean),forcedJSONParsing:u.transitional(u.boolean),clarifyTimeoutError:u.transitional(u.boolean)},!1);var i=[],r=!0;this.interceptors.request.forEach((function(t){"function"==typeof t.runWhen&&!1===t.runWhen(e)||(r=r&&t.synchronous,i.unshift(t.fulfilled,t.rejected))}));var n,s=[];if(this.interceptors.response.forEach((function(e){s.push(e.fulfilled,e.rejected)})),!r){var d=[a,void 0];for(Array.prototype.unshift.apply(d,i),d=d.concat(s),n=Promise.resolve(e);d.length;)n=n.then(d.shift(),d.shift());return n}for(var l=e;i.length;){var h=i.shift(),p=i.shift();try{l=h(l)}catch(e){p(e);break}}try{n=a(l)}catch(e){return Promise.reject(e)}for(;s.length;)n=n.then(s.shift(),s.shift());return n},d.prototype.getUri=function(e){return e=o(this.defaults,e),n(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],(function(e){d.prototype[e]=function(t,i){return this.request(o(i||{},{method:e,url:t,data:(i||{}).data}))}})),r.forEach(["post","put","patch"],(function(e){d.prototype[e]=function(t,i,r){return this.request(o(r||{},{method:e,url:t,data:i}))}})),e.exports=d},782:(e,t,i)=>{"use strict";var r=i(4867);function n(){this.handlers=[]}n.prototype.use=function(e,t,i){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!i&&i.synchronous,runWhen:i?i.runWhen:null}),this.handlers.length-1},n.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},n.prototype.forEach=function(e){r.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=n},4097:(e,t,i)=>{"use strict";var r=i(1793),n=i(7303);e.exports=function(e,t){return e&&!r(t)?n(e,t):t}},5061:(e,t,i)=>{"use strict";var r=i(481);e.exports=function(e,t,i,n,s){var a=new Error(e);return r(a,t,i,n,s)}},3572:(e,t,i)=>{"use strict";var r=i(4867),n=i(8527),s=i(6502),a=i(5655),o=i(5263);function c(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new o("canceled")}e.exports=function(e){return c(e),e.headers=e.headers||{},e.data=n.call(e,e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||a.adapter)(e).then((function(t){return c(e),t.data=n.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return s(t)||(c(e),t&&t.response&&(t.response.data=n.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},481:e=>{"use strict";e.exports=function(e,t,i,r,n){return e.config=t,i&&(e.code=i),e.request=r,e.response=n,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e}},7185:(e,t,i)=>{"use strict";var r=i(4867);e.exports=function(e,t){t=t||{};var i={};function n(e,t){return r.isPlainObject(e)&&r.isPlainObject(t)?r.merge(e,t):r.isPlainObject(t)?r.merge({},t):r.isArray(t)?t.slice():t}function s(i){return r.isUndefined(t[i])?r.isUndefined(e[i])?void 0:n(void 0,e[i]):n(e[i],t[i])}function a(e){if(!r.isUndefined(t[e]))return n(void 0,t[e])}function o(i){return r.isUndefined(t[i])?r.isUndefined(e[i])?void 0:n(void 0,e[i]):n(void 0,t[i])}function c(i){return i in t?n(e[i],t[i]):i in e?n(void 0,e[i]):void 0}var u={url:a,method:a,data:a,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:c};return r.forEach(Object.keys(e).concat(Object.keys(t)),(function(e){var t=u[e]||s,n=t(e);r.isUndefined(n)&&t!==c||(i[e]=n)})),i}},6026:(e,t,i)=>{"use strict";var r=i(5061);e.exports=function(e,t,i){var n=i.config.validateStatus;i.status&&n&&!n(i.status)?t(r("Request failed with status code "+i.status,i.config,null,i.request,i)):e(i)}},8527:(e,t,i)=>{"use strict";var r=i(4867),n=i(5655);e.exports=function(e,t,i){var s=this||n;return r.forEach(i,(function(i){e=i.call(s,e,t)})),e}},5655:(e,t,i)=>{"use strict";var r=i(4867),n=i(6016),s=i(481),a={"Content-Type":"application/x-www-form-urlencoded"};function o(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var c,u={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(c=i(5448)),c),transformRequest:[function(e,t){return n(t,"Accept"),n(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e)?e:r.isArrayBufferView(e)?e.buffer:r.isURLSearchParams(e)?(o(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):r.isObject(e)||t&&"application/json"===t["Content-Type"]?(o(t,"application/json"),function(e,t,i){if(r.isString(e))try{return(t||JSON.parse)(e),r.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(i||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||u.transitional,i=t&&t.silentJSONParsing,n=t&&t.forcedJSONParsing,a=!i&&"json"===this.responseType;if(a||n&&r.isString(e)&&e.length)try{return JSON.parse(e)}catch(e){if(a){if("SyntaxError"===e.name)throw s(e,this,"E_JSON_PARSE");throw e}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],(function(e){u.headers[e]={}})),r.forEach(["post","put","patch"],(function(e){u.headers[e]=r.merge(a)})),e.exports=u},7288:e=>{e.exports={version:"0.24.0"}},1849:e=>{"use strict";e.exports=function(e,t){return function(){for(var i=new Array(arguments.length),r=0;r<i.length;r++)i[r]=arguments[r];return e.apply(t,i)}}},5327:(e,t,i)=>{"use strict";var r=i(4867);function n(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,i){if(!t)return e;var s;if(i)s=i(t);else if(r.isURLSearchParams(t))s=t.toString();else{var a=[];r.forEach(t,(function(e,t){null!=e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,(function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),a.push(n(t)+"="+n(e))})))})),s=a.join("&")}if(s){var o=e.indexOf("#");-1!==o&&(e=e.slice(0,o)),e+=(-1===e.indexOf("?")?"?":"&")+s}return e}},7303:e=>{"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},4372:(e,t,i)=>{"use strict";var r=i(4867);e.exports=r.isStandardBrowserEnv()?{write:function(e,t,i,n,s,a){var o=[];o.push(e+"="+encodeURIComponent(t)),r.isNumber(i)&&o.push("expires="+new Date(i).toGMTString()),r.isString(n)&&o.push("path="+n),r.isString(s)&&o.push("domain="+s),!0===a&&o.push("secure"),document.cookie=o.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},1793:e=>{"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},6268:e=>{"use strict";e.exports=function(e){return"object"==typeof e&&!0===e.isAxiosError}},7985:(e,t,i)=>{"use strict";var r=i(4867);e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a");function n(e){var r=e;return t&&(i.setAttribute("href",r),r=i.href),i.setAttribute("href",r),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:"/"===i.pathname.charAt(0)?i.pathname:"/"+i.pathname}}return e=n(window.location.href),function(t){var i=r.isString(t)?n(t):t;return i.protocol===e.protocol&&i.host===e.host}}():function(){return!0}},6016:(e,t,i)=>{"use strict";var r=i(4867);e.exports=function(e,t){r.forEach(e,(function(i,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=i,delete e[r])}))}},4109:(e,t,i)=>{"use strict";var r=i(4867),n=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,i,s,a={};return e?(r.forEach(e.split("\n"),(function(e){if(s=e.indexOf(":"),t=r.trim(e.substr(0,s)).toLowerCase(),i=r.trim(e.substr(s+1)),t){if(a[t]&&n.indexOf(t)>=0)return;a[t]="set-cookie"===t?(a[t]?a[t]:[]).concat([i]):a[t]?a[t]+", "+i:i}})),a):a}},8713:e=>{"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},4875:(e,t,i)=>{"use strict";var r=i(7288).version,n={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){n[e]=function(i){return typeof i===e||"a"+(t<1?"n ":" ")+e}}));var s={};n.transitional=function(e,t,i){function n(e,t){return"[Axios v"+r+"] Transitional option '"+e+"'"+t+(i?". "+i:"")}return function(i,r,a){if(!1===e)throw new Error(n(r," has been removed"+(t?" in "+t:"")));return t&&!s[r]&&(s[r]=!0,console.warn(n(r," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(i,r,a)}},e.exports={assertOptions:function(e,t,i){if("object"!=typeof e)throw new TypeError("options must be an object");for(var r=Object.keys(e),n=r.length;n-- >0;){var s=r[n],a=t[s];if(a){var o=e[s],c=void 0===o||a(o,s,e);if(!0!==c)throw new TypeError("option "+s+" must be "+c)}else if(!0!==i)throw Error("Unknown option "+s)}},validators:n}},4867:(e,t,i)=>{"use strict";var r=i(1849),n=Object.prototype.toString;function s(e){return"[object Array]"===n.call(e)}function a(e){return void 0===e}function o(e){return null!==e&&"object"==typeof e}function c(e){if("[object Object]"!==n.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function u(e){return"[object Function]"===n.call(e)}function d(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),s(e))for(var i=0,r=e.length;i<r;i++)t.call(null,e[i],i,e);else for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.call(null,e[n],n,e)}e.exports={isArray:s,isArrayBuffer:function(e){return"[object ArrayBuffer]"===n.call(e)},isBuffer:function(e){return null!==e&&!a(e)&&null!==e.constructor&&!a(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:o,isPlainObject:c,isUndefined:a,isDate:function(e){return"[object Date]"===n.call(e)},isFile:function(e){return"[object File]"===n.call(e)},isBlob:function(e){return"[object Blob]"===n.call(e)},isFunction:u,isStream:function(e){return o(e)&&u(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:d,merge:function e(){var t={};function i(i,r){c(t[r])&&c(i)?t[r]=e(t[r],i):c(i)?t[r]=e({},i):s(i)?t[r]=i.slice():t[r]=i}for(var r=0,n=arguments.length;r<n;r++)d(arguments[r],i);return t},extend:function(e,t,i){return d(t,(function(t,n){e[n]=i&&"function"==typeof t?r(t,i):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}}},487:e=>{var t={utf8:{stringToBytes:function(e){return t.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(t.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],i=0;i<e.length;i++)t.push(255&e.charCodeAt(i));return t},bytesToString:function(e){for(var t=[],i=0;i<e.length;i++)t.push(String.fromCharCode(e[i]));return t.join("")}}};e.exports=t},1012:e=>{var t,i;t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&i.rotl(e,8)|4278255360&i.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=i.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],i=0,r=0;i<e.length;i++,r+=8)t[r>>>5]|=e[i]<<24-r%32;return t},wordsToBytes:function(e){for(var t=[],i=0;i<32*e.length;i+=8)t.push(e[i>>>5]>>>24-i%32&255);return t},bytesToHex:function(e){for(var t=[],i=0;i<e.length;i++)t.push((e[i]>>>4).toString(16)),t.push((15&e[i]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],i=0;i<e.length;i+=2)t.push(parseInt(e.substr(i,2),16));return t},bytesToBase64:function(e){for(var i=[],r=0;r<e.length;r+=3)for(var n=e[r]<<16|e[r+1]<<8|e[r+2],s=0;s<4;s++)8*r+6*s<=8*e.length?i.push(t.charAt(n>>>6*(3-s)&63)):i.push("=");return i.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var i=[],r=0,n=0;r<e.length;n=++r%4)0!=n&&i.push((t.indexOf(e.charAt(r-1))&Math.pow(2,-2*n+8)-1)<<2*n|t.indexOf(e.charAt(r))>>>6-2*n);return i}},e.exports=i},8738:e=>{function t(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
e.exports=function(e){return null!=e&&(t(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&t(e.slice(0,0))}(e)||!!e._isBuffer)}},2568:(e,t,i)=>{var r,n,s,a,o;r=i(1012),n=i(487).utf8,s=i(8738),a=i(487).bin,(o=function(e,t){e.constructor==String?e=t&&"binary"===t.encoding?a.stringToBytes(e):n.stringToBytes(e):s(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||e.constructor===Uint8Array||(e=e.toString());for(var i=r.bytesToWords(e),c=8*e.length,u=1732584193,d=-271733879,l=-1732584194,h=271733878,p=0;p<i.length;p++)i[p]=16711935&(i[p]<<8|i[p]>>>24)|4278255360&(i[p]<<24|i[p]>>>8);i[c>>>5]|=128<<c%32,i[14+(c+64>>>9<<4)]=c;var f=o._ff,A=o._gg,m=o._hh,g=o._ii;for(p=0;p<i.length;p+=16){var T=u,v=d,C=l,E=h;u=f(u,d,l,h,i[p+0],7,-680876936),h=f(h,u,d,l,i[p+1],12,-389564586),l=f(l,h,u,d,i[p+2],17,606105819),d=f(d,l,h,u,i[p+3],22,-1044525330),u=f(u,d,l,h,i[p+4],7,-176418897),h=f(h,u,d,l,i[p+5],12,1200080426),l=f(l,h,u,d,i[p+6],17,-1473231341),d=f(d,l,h,u,i[p+7],22,-45705983),u=f(u,d,l,h,i[p+8],7,1770035416),h=f(h,u,d,l,i[p+9],12,-1958414417),l=f(l,h,u,d,i[p+10],17,-42063),d=f(d,l,h,u,i[p+11],22,-1990404162),u=f(u,d,l,h,i[p+12],7,1804603682),h=f(h,u,d,l,i[p+13],12,-40341101),l=f(l,h,u,d,i[p+14],17,-1502002290),u=A(u,d=f(d,l,h,u,i[p+15],22,1236535329),l,h,i[p+1],5,-165796510),h=A(h,u,d,l,i[p+6],9,-1069501632),l=A(l,h,u,d,i[p+11],14,643717713),d=A(d,l,h,u,i[p+0],20,-373897302),u=A(u,d,l,h,i[p+5],5,-701558691),h=A(h,u,d,l,i[p+10],9,38016083),l=A(l,h,u,d,i[p+15],14,-660478335),d=A(d,l,h,u,i[p+4],20,-405537848),u=A(u,d,l,h,i[p+9],5,568446438),h=A(h,u,d,l,i[p+14],9,-1019803690),l=A(l,h,u,d,i[p+3],14,-187363961),d=A(d,l,h,u,i[p+8],20,1163531501),u=A(u,d,l,h,i[p+13],5,-1444681467),h=A(h,u,d,l,i[p+2],9,-51403784),l=A(l,h,u,d,i[p+7],14,1735328473),u=m(u,d=A(d,l,h,u,i[p+12],20,-1926607734),l,h,i[p+5],4,-378558),h=m(h,u,d,l,i[p+8],11,-2022574463),l=m(l,h,u,d,i[p+11],16,1839030562),d=m(d,l,h,u,i[p+14],23,-35309556),u=m(u,d,l,h,i[p+1],4,-1530992060),h=m(h,u,d,l,i[p+4],11,1272893353),l=m(l,h,u,d,i[p+7],16,-155497632),d=m(d,l,h,u,i[p+10],23,-1094730640),u=m(u,d,l,h,i[p+13],4,681279174),h=m(h,u,d,l,i[p+0],11,-358537222),l=m(l,h,u,d,i[p+3],16,-722521979),d=m(d,l,h,u,i[p+6],23,76029189),u=m(u,d,l,h,i[p+9],4,-640364487),h=m(h,u,d,l,i[p+12],11,-421815835),l=m(l,h,u,d,i[p+15],16,530742520),u=g(u,d=m(d,l,h,u,i[p+2],23,-995338651),l,h,i[p+0],6,-198630844),h=g(h,u,d,l,i[p+7],10,1126891415),l=g(l,h,u,d,i[p+14],15,-1416354905),d=g(d,l,h,u,i[p+5],21,-57434055),u=g(u,d,l,h,i[p+12],6,1700485571),h=g(h,u,d,l,i[p+3],10,-1894986606),l=g(l,h,u,d,i[p+10],15,-1051523),d=g(d,l,h,u,i[p+1],21,-2054922799),u=g(u,d,l,h,i[p+8],6,1873313359),h=g(h,u,d,l,i[p+15],10,-30611744),l=g(l,h,u,d,i[p+6],15,-1560198380),d=g(d,l,h,u,i[p+13],21,1309151649),u=g(u,d,l,h,i[p+4],6,-145523070),h=g(h,u,d,l,i[p+11],10,-1120210379),l=g(l,h,u,d,i[p+2],15,718787259),d=g(d,l,h,u,i[p+9],21,-343485551),u=u+T>>>0,d=d+v>>>0,l=l+C>>>0,h=h+E>>>0}return r.endian([u,d,l,h])})._ff=function(e,t,i,r,n,s,a){var o=e+(t&i|~t&r)+(n>>>0)+a;return(o<<s|o>>>32-s)+t},o._gg=function(e,t,i,r,n,s,a){var o=e+(t&r|i&~r)+(n>>>0)+a;return(o<<s|o>>>32-s)+t},o._hh=function(e,t,i,r,n,s,a){var o=e+(t^i^r)+(n>>>0)+a;return(o<<s|o>>>32-s)+t},o._ii=function(e,t,i,r,n,s,a){var o=e+(i^(t|~r))+(n>>>0)+a;return(o<<s|o>>>32-s)+t},o._blocksize=16,o._digestsize=16,e.exports=function(e,t){if(null==e)throw new Error("Illegal argument "+e);var i=r.wordsToBytes(o(e,t));return t&&t.asBytes?i:t&&t.asString?a.bytesToString(i):r.bytesToHex(i)}},2238:function(e,t,i){var r;
/*!@license
 * UAParser.js v0.7.28
 * Lightweight JavaScript-based User-Agent string parser
 * https://github.com/faisalman/ua-parser-js
 *
 * Copyright © 2012-2021 Faisal Salman <f@faisalman.com>
 * Licensed under MIT License
 */!function(n,s){"use strict";var a="function",o="undefined",c="object",u="string",d="model",l="name",h="type",p="vendor",f="version",A="architecture",m="console",g="mobile",T="tablet",v="smarttv",C="wearable",E="embedded",S={extend:function(e,t){var i={};for(var r in e)t[r]&&t[r].length%2==0?i[r]=t[r].concat(e[r]):i[r]=e[r];return i},has:function(e,t){return typeof e===u&&-1!==t.toLowerCase().indexOf(e.toLowerCase())},lowerize:function(e){return e.toLowerCase()},major:function(e){return typeof e===u?e.replace(/[^\d\.]/g,"").split(".")[0]:s},trim:function(e,t){return e=e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),typeof t===o?e:e.substring(0,255)}},x={rgx:function(e,t){for(var i,r,n,o,u,d,l=0;l<t.length&&!u;){var h=t[l],p=t[l+1];for(i=r=0;i<h.length&&!u;)if(u=h[i++].exec(e))for(n=0;n<p.length;n++)d=u[++r],typeof(o=p[n])===c&&o.length>0?2==o.length?typeof o[1]==a?this[o[0]]=o[1].call(this,d):this[o[0]]=o[1]:3==o.length?typeof o[1]!==a||o[1].exec&&o[1].test?this[o[0]]=d?d.replace(o[1],o[2]):s:this[o[0]]=d?o[1].call(this,d,o[2]):s:4==o.length&&(this[o[0]]=d?o[3].call(this,d.replace(o[1],o[2])):s):this[o]=d||s;l+=2}},str:function(e,t){for(var i in t)if(typeof t[i]===c&&t[i].length>0){for(var r=0;r<t[i].length;r++)if(S.has(t[i][r],e))return"?"===i?s:i}else if(S.has(t[i],e))return"?"===i?s:i;return e}},b={browser:{oldSafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}},oldEdge:{version:{.1:"12.",21:"13.",31:"14.",39:"15.",41:"16.",42:"17.",44:"18."}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},y={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[f,[l,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[f,[l,"Edge"]],[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]{3,6})\b.+version\/([\w\.-]+)/i,/(opera)(?:.+version\/|[\/\s]+)([\w\.]+)/i],[l,f],[/opios[\/\s]+([\w\.]+)/i],[f,[l,"Opera Mini"]],[/\sopr\/([\w\.]+)/i],[f,[l,"Opera"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]*)/i,/(avant\s|iemobile|slim)(?:browser)?[\/\s]?([\w\.]*)/i,/(ba?idubrowser)[\/\s]?([\w\.]+)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon)\/([\w\.-]+)/i,/(rekonq|puffin|brave|whale|qqbrowserlite|qq)\/([\w\.]+)/i,/(weibo)__([\d\.]+)/i],[l,f],[/(?:[\s\/]uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[f,[l,"UCBrowser"]],[/(?:windowswechat)?\sqbcore\/([\w\.]+)\b.*(?:windowswechat)?/i],[f,[l,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[f,[l,"WeChat"]],[/konqueror\/([\w\.]+)/i],[f,[l,"Konqueror"]],[/trident.+rv[:\s]([\w\.]{1,9})\b.+like\sgecko/i],[f,[l,"IE"]],[/yabrowser\/([\w\.]+)/i],[f,[l,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[l,/(.+)/,"$1 Secure Browser"],f],[/focus\/([\w\.]+)/i],[f,[l,"Firefox Focus"]],[/opt\/([\w\.]+)/i],[f,[l,"Opera Touch"]],[/coc_coc_browser\/([\w\.]+)/i],[f,[l,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[f,[l,"Dolphin"]],[/coast\/([\w\.]+)/i],[f,[l,"Opera Coast"]],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[f,[l,"MIUI Browser"]],[/fxios\/([\w\.-]+)/i],[f,[l,"Firefox"]],[/(qihu|qhbrowser|qihoobrowser|360browser)/i],[[l,"360 Browser"]],[/(oculus|samsung|sailfish)browser\/([\w\.]+)/i],[[l,/(.+)/,"$1 Browser"],f],[/(comodo_dragon)\/([\w\.]+)/i],[[l,/_/g," "],f],[/\s(electron)\/([\w\.]+)\ssafari/i,/(tesla)(?:\sqtcarbrowser|\/(20[12]\d\.[\w\.-]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/\s]?([\w\.]+)/i],[l,f],[/(MetaSr)[\/\s]?([\w\.]+)/i,/(LBBROWSER)/i],[l],[/;fbav\/([\w\.]+);/i],[f,[l,"Facebook"]],[/FBAN\/FBIOS|FB_IAB\/FB4A/i],[[l,"Facebook"]],[/safari\s(line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/\s]([\w\.-]+)/i],[l,f],[/\bgsa\/([\w\.]+)\s.*safari\//i],[f,[l,"GSA"]],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[f,[l,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[l,"Chrome WebView"],f],[/droid.+\sversion\/([\w\.]+)\b.+(?:mobile\ssafari|safari)/i],[f,[l,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[l,f],[/version\/([\w\.]+)\s.*mobile\/\w+\s(safari)/i],[f,[l,"Mobile Safari"]],[/version\/([\w\.]+)\s.*(mobile\s?safari|safari)/i],[f,l],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[l,[f,x.str,b.browser.oldSafari.version]],[/(webkit|khtml)\/([\w\.]+)/i],[l,f],[/(navigator|netscape)\/([\w\.-]+)/i],[[l,"Netscape"],f],[/ile\svr;\srv:([\w\.]+)\).+firefox/i],[f,[l,"Firefox Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)$/i,/(firefox)\/([\w\.]+)\s[\w\s\-]+\/[\w\.]+$/i,/(mozilla)\/([\w\.]+)\s.+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]*)/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[l,f]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[[A,"amd64"]],[/(ia32(?=;))/i],[[A,S.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[[A,"ia32"]],[/\b(aarch64|armv?8e?l?)\b/i],[[A,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[A,"armhf"]],[/windows\s(ce|mobile);\sppc;/i],[[A,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[A,/ower/,"",S.lowerize]],[/(sun4\w)[;\)]/i],[[A,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?:64|(?=v(?:[1-7]|[5-7]1)l?|;|eabi))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[A,S.lowerize]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[pt]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus\s10)/i],[d,[p,"Samsung"],[h,T]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy\snexus)/i,/\ssamsung[\s-]([\w-]+)/i,/sec-(sgh\w+)/i],[d,[p,"Samsung"],[h,g]],[/\((ip(?:hone|od)[\s\w]*);/i],[d,[p,"Apple"],[h,g]],[/\((ipad);[\w\s\),;-]+apple/i,/applecoremedia\/[\w\.]+\s\((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[d,[p,"Apple"],[h,T]],[/\b((?:agr|ags[23]|bah2?|sht?)-a?[lw]\d{2})/i],[d,[p,"Huawei"],[h,T]],[/d\/huawei([\w\s-]+)[;\)]/i,/\b(nexus\s6p|vog-[at]?l\d\d|ane-[at]?l[x\d]\d|eml-a?l\d\da?|lya-[at]?l\d[\dc]|clt-a?l\d\di?|ele-l\d\d)/i,/\b(\w{2,4}-[atu][ln][01259][019])[;\)\s]/i],[d,[p,"Huawei"],[h,g]],[/\b(poco[\s\w]+)(?:\sbuild|\))/i,/\b;\s(\w+)\sbuild\/hm\1/i,/\b(hm[\s\-_]?note?[\s_]?(?:\d\w)?)\sbuild/i,/\b(redmi[\s\-_]?(?:note|k)?[\w\s_]+)(?:\sbuild|\))/i,/\b(mi[\s\-_]?(?:a\d|one|one[\s_]plus|note lte)?[\s_]?(?:\d?\w?)[\s_]?(?:plus)?)\sbuild/i],[[d,/_/g," "],[p,"Xiaomi"],[h,g]],[/\b(mi[\s\-_]?(?:pad)(?:[\w\s_]+))(?:\sbuild|\))/i],[[d,/_/g," "],[p,"Xiaomi"],[h,T]],[/;\s(\w+)\sbuild.+\soppo/i,/\s(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007)\b/i],[d,[p,"OPPO"],[h,g]],[/\svivo\s(\w+)(?:\sbuild|\))/i,/\s(v[12]\d{3}\w?[at])(?:\sbuild|;)/i],[d,[p,"Vivo"],[h,g]],[/\s(rmx[12]\d{3})(?:\sbuild|;)/i],[d,[p,"Realme"],[h,g]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)\b[\w\s]+build\//i,/\smot(?:orola)?[\s-](\w*)/i,/((?:moto[\s\w\(\)]+|xt\d{3,4}|nexus\s6)(?=\sbuild|\)))/i],[d,[p,"Motorola"],[h,g]],[/\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[d,[p,"Motorola"],[h,T]],[/((?=lg)?[vl]k\-?\d{3})\sbuild|\s3\.[\s\w;-]{10}lg?-([06cv9]{3,4})/i],[d,[p,"LG"],[h,T]],[/(lm-?f100[nv]?|nexus\s[45])/i,/lg[e;\s\/-]+((?!browser|netcast)\w+)/i,/\blg(\-?[\d\w]+)\sbuild/i],[d,[p,"LG"],[h,g]],[/(ideatab[\w\-\s]+)/i,/lenovo\s?(s(?:5000|6000)(?:[\w-]+)|tab(?:[\s\w]+)|yt[\d\w-]{6}|tb[\d\w-]{6})/i],[d,[p,"Lenovo"],[h,T]],[/(?:maemo|nokia).*(n900|lumia\s\d+)/i,/nokia[\s_-]?([\w\.-]*)/i],[[d,/_/g," "],[p,"Nokia"],[h,g]],[/droid.+;\s(pixel\sc)[\s)]/i],[d,[p,"Google"],[h,T]],[/droid.+;\s(pixel[\s\daxl]{0,6})(?:\sbuild|\))/i],[d,[p,"Google"],[h,g]],[/droid.+\s([c-g]\d{4}|so[-l]\w+|xq-a\w[4-7][12])(?=\sbuild\/|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[d,[p,"Sony"],[h,g]],[/sony\stablet\s[ps]\sbuild\//i,/(?:sony)?sgp\w+(?:\sbuild\/|\))/i],[[d,"Xperia Tablet"],[p,"Sony"],[h,T]],[/\s(kb2005|in20[12]5|be20[12][59])\b/i,/\ba000(1)\sbuild/i,/\boneplus\s(a\d{4})[\s)]/i],[d,[p,"OnePlus"],[h,g]],[/(alexa)webm/i,/(kf[a-z]{2}wi)(\sbuild\/|\))/i,/(kf[a-z]+)(\sbuild\/|\)).+silk\//i],[d,[p,"Amazon"],[h,T]],[/(sd|kf)[0349hijorstuw]+(\sbuild\/|\)).+silk\//i],[[d,"Fire Phone"],[p,"Amazon"],[h,g]],[/\((playbook);[\w\s\),;-]+(rim)/i],[d,p,[h,T]],[/((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10;\s(\w+)/i],[d,[p,"BlackBerry"],[h,g]],[/(?:\b|asus_)(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus\s7|padfone|p00[cj])/i],[d,[p,"ASUS"],[h,T]],[/\s(z[es]6[027][01][km][ls]|zenfone\s\d\w?)\b/i],[d,[p,"ASUS"],[h,g]],[/(nexus\s9)/i],[d,[p,"HTC"],[h,T]],[/(htc)[;_\s-]{1,2}([\w\s]+(?=\)|\sbuild)|\w+)/i,/(zte)-(\w*)/i,/(alcatel|geeksphone|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i],[p,[d,/_/g," "],[h,g]],[/droid[x\d\.\s;]+\s([ab][1-7]\-?[0178a]\d\d?)/i],[d,[p,"Acer"],[h,T]],[/droid.+;\s(m[1-5]\snote)\sbuild/i,/\bmz-([\w-]{2,})/i],[d,[p,"Meizu"],[h,g]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i,/(microsoft);\s(lumia[\s\w]+)/i,/(lenovo)[_\s-]?([\w-]+)/i,/linux;.+(jolla);/i,/droid.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[p,d,[h,g]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i,/[;\/]\s?(le[\s\-]+pan)[\s\-]+(\w{1,9})\sbuild/i,/[;\/]\s?(trinity)[\-\s]*(t\d{3})\sbuild/i,/\b(gigaset)[\s\-]+(q\w{1,9})\sbuild/i,/\b(vodafone)\s([\w\s]+)(?:\)|\sbuild)/i],[p,d,[h,T]],[/\s(surface\sduo)\s/i],[d,[p,"Microsoft"],[h,T]],[/droid\s[\d\.]+;\s(fp\du?)\sbuild/i],[d,[p,"Fairphone"],[h,g]],[/\s(u304aa)\sbuild/i],[d,[p,"AT&T"],[h,g]],[/sie-(\w*)/i],[d,[p,"Siemens"],[h,g]],[/[;\/]\s?(rct\w+)\sbuild/i],[d,[p,"RCA"],[h,T]],[/[;\/\s](venue[\d\s]{2,7})\sbuild/i],[d,[p,"Dell"],[h,T]],[/[;\/]\s?(q(?:mv|ta)\w+)\sbuild/i],[d,[p,"Verizon"],[h,T]],[/[;\/]\s(?:barnes[&\s]+noble\s|bn[rt])([\w\s\+]*)\sbuild/i],[d,[p,"Barnes & Noble"],[h,T]],[/[;\/]\s(tm\d{3}\w+)\sbuild/i],[d,[p,"NuVision"],[h,T]],[/;\s(k88)\sbuild/i],[d,[p,"ZTE"],[h,T]],[/;\s(nx\d{3}j)\sbuild/i],[d,[p,"ZTE"],[h,g]],[/[;\/]\s?(gen\d{3})\sbuild.*49h/i],[d,[p,"Swiss"],[h,g]],[/[;\/]\s?(zur\d{3})\sbuild/i],[d,[p,"Swiss"],[h,T]],[/[;\/]\s?((zeki)?tb.*\b)\sbuild/i],[d,[p,"Zeki"],[h,T]],[/[;\/]\s([yr]\d{2})\sbuild/i,/[;\/]\s(dragon[\-\s]+touch\s|dt)(\w{5})\sbuild/i],[[p,"Dragon Touch"],d,[h,T]],[/[;\/]\s?(ns-?\w{0,9})\sbuild/i],[d,[p,"Insignia"],[h,T]],[/[;\/]\s?((nxa|Next)-?\w{0,9})\sbuild/i],[d,[p,"NextBook"],[h,T]],[/[;\/]\s?(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05]))\sbuild/i],[[p,"Voice"],d,[h,g]],[/[;\/]\s?(lvtel\-)?(v1[12])\sbuild/i],[[p,"LvTel"],d,[h,g]],[/;\s(ph-1)\s/i],[d,[p,"Essential"],[h,g]],[/[;\/]\s?(v(100md|700na|7011|917g).*\b)\sbuild/i],[d,[p,"Envizen"],[h,T]],[/[;\/]\s?(trio[\s\w\-\.]+)\sbuild/i],[d,[p,"MachSpeed"],[h,T]],[/[;\/]\s?tu_(1491)\sbuild/i],[d,[p,"Rotor"],[h,T]],[/(shield[\w\s]+)\sbuild/i],[d,[p,"Nvidia"],[h,T]],[/(sprint)\s(\w+)/i],[p,d,[h,g]],[/(kin\.[onetw]{3})/i],[[d,/\./g," "],[p,"Microsoft"],[h,g]],[/droid\s[\d\.]+;\s(cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[d,[p,"Zebra"],[h,T]],[/droid\s[\d\.]+;\s(ec30|ps20|tc[2-8]\d[kx])\)/i],[d,[p,"Zebra"],[h,g]],[/\s(ouya)\s/i,/(nintendo)\s([wids3utch]+)/i],[p,d,[h,m]],[/droid.+;\s(shield)\sbuild/i],[d,[p,"Nvidia"],[h,m]],[/(playstation\s[345portablevi]+)/i],[d,[p,"Sony"],[h,m]],[/[\s\(;](xbox(?:\sone)?(?!;\sxbox))[\s\);]/i],[d,[p,"Microsoft"],[h,m]],[/smart-tv.+(samsung)/i],[p,[h,v]],[/hbbtv.+maple;(\d+)/i],[[d,/^/,"SmartTV"],[p,"Samsung"],[h,v]],[/(?:linux;\snetcast.+smarttv|lg\snetcast\.tv-201\d)/i],[[p,"LG"],[h,v]],[/(apple)\s?tv/i],[p,[d,"Apple TV"],[h,v]],[/crkey/i],[[d,"Chromecast"],[p,"Google"],[h,v]],[/droid.+aft([\w])(\sbuild\/|\))/i],[d,[p,"Amazon"],[h,v]],[/\(dtv[\);].+(aquos)/i],[d,[p,"Sharp"],[h,v]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[p,S.trim],[d,S.trim],[h,v]],[/[\s\/\(](android\s|smart[-\s]?|opera\s)tv[;\)\s]/i],[[h,v]],[/((pebble))app\/[\d\.]+\s/i],[p,d,[h,C]],[/droid.+;\s(glass)\s\d/i],[d,[p,"Google"],[h,C]],[/droid\s[\d\.]+;\s(wt63?0{2,3})\)/i],[d,[p,"Zebra"],[h,C]],[/(tesla)(?:\sqtcarbrowser|\/20[12]\d\.[\w\.-]+)/i],[p,[h,E]],[/droid .+?; ([^;]+?)(?: build|\) applewebkit).+? mobile safari/i],[d,[h,g]],[/droid .+?;\s([^;]+?)(?: build|\) applewebkit).+?(?! mobile) safari/i],[d,[h,T]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[h,S.lowerize]],[/(android[\w\.\s\-]{0,9});.+build/i],[d,[p,"Generic"]],[/(phone)/i],[[h,g]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[f,[l,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[f,[l,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[l,f],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[f,l]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[l,f],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)(?!.+xbox)/i],[l,[f,x.str,b.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[l,"Windows"],[f,x.str,b.os.windows.version]],[/ip[honead]{2,4}\b(?:.*os\s([\w]+)\slike\smac|;\sopera)/i,/cfnetwork\/.+darwin/i],[[f,/_/g,"."],[l,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]*)/i,/(macintosh|mac(?=_powerpc)\s)(?!.+haiku)/i],[[l,"Mac OS"],[f,/_/g,"."]],[/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|sailfish|contiki)[\/\s-]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/\s]([\w\.]+)/i,/\((series40);/i],[l,f],[/\(bb(10);/i],[f,[l,"BlackBerry"]],[/(?:symbian\s?os|symbos|s60(?=;)|series60)[\/\s-]?([\w\.]*)/i],[f,[l,"Symbian"]],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[l,"Firefox OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[f,[l,"webOS"]],[/crkey\/([\d\.]+)/i],[f,[l,"Chromecast"]],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[l,"Chromium OS"],f],[/(nintendo|playstation)\s([wids345portablevuch]+)/i,/(xbox);\s+xbox\s([^\);]+)/i,/(mint)[\/\s\(\)]?(\w*)/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?=\slinux)|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus|raspbian)(?:\sgnu\/linux)?(?:\slinux)?[\/\s-]?(?!chrom|package)([\w\.-]*)/i,/(hurd|linux)\s?([\w\.]*)/i,/(gnu)\s?([\w\.]*)/i,/\s([frentopc-]{0,4}bsd|dragonfly)\s?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku)\s(\w+)/i],[l,f],[/(sunos)\s?([\w\.\d]*)/i],[[l,"Solaris"],f],[/((?:open)?solaris)[\/\s-]?([\w\.]*)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms|fuchsia)/i,/(unix)\s?([\w\.]*)/i],[l,f]]},_=function(e,t){if("object"==typeof e&&(t=e,e=s),!(this instanceof _))return new _(e,t).getResult();var i=e||(void 0!==n&&n.navigator&&n.navigator.userAgent?n.navigator.userAgent:""),r=t?S.extend(y,t):y;return this.getBrowser=function(){var e={name:s,version:s};return x.rgx.call(e,i,r.browser),e.major=S.major(e.version),e},this.getCPU=function(){var e={architecture:s};return x.rgx.call(e,i,r.cpu),e},this.getDevice=function(){var e={vendor:s,model:s,type:s};return x.rgx.call(e,i,r.device),e},this.getEngine=function(){var e={name:s,version:s};return x.rgx.call(e,i,r.engine),e},this.getOS=function(){var e={name:s,version:s};return x.rgx.call(e,i,r.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return i},this.setUA=function(e){return i=typeof e===u&&e.length>255?S.trim(e,255):e,this},this.setUA(i),this};_.VERSION="0.7.28",_.BROWSER={NAME:l,MAJOR:"major",VERSION:f},_.CPU={ARCHITECTURE:A},_.DEVICE={MODEL:d,VENDOR:p,TYPE:h,CONSOLE:m,MOBILE:g,SMARTTV:v,TABLET:T,WEARABLE:C,EMBEDDED:E},_.ENGINE={NAME:l,VERSION:f},_.OS={NAME:l,VERSION:f},typeof t!==o?(e.exports&&(t=e.exports=_),t.UAParser=_):(r=function(){return _}.call(t,i,t,e))===s||(e.exports=r);var I=void 0!==n&&(n.jQuery||n.Zepto);if(I&&!I.ua){var R=new _;I.ua=R.getResult(),I.ua.get=function(){return R.getUA()},I.ua.set=function(e){R.setUA(e);var t=R.getResult();for(var i in t)I.ua[i]=t[i]}}}("object"==typeof window?window:this)},5547:e=>{e.exports=function(){function e(t,i,r){function n(a,o){if(!i[a]){if(!t[a]){if(s)return s(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var u=i[a]={exports:{}};t[a][0].call(u.exports,(function(e){return n(t[a][1][e]||e)}),u,u.exports,e,t,i,r)}return i[a].exports}for(var s=void 0,a=0;a<r.length;a++)n(r[a]);return n}return e}()({1:[function(e,t,i){"use strict";var r=(0,e("./adapter_factory.js").adapterFactory)({window:"undefined"==typeof window?void 0:window});t.exports=r},{"./adapter_factory.js":2}],2:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.adapterFactory=d;var r=u(e("./utils")),n=u(e("./chrome/chrome_shim")),s=u(e("./edge/edge_shim")),a=u(e("./firefox/firefox_shim")),o=u(e("./safari/safari_shim")),c=u(e("./common_shim"));function u(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function d(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).window,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0},i=r.log,u=r.detectBrowser(e),d={browserDetails:u,commonShim:c,extractVersion:r.extractVersion,disableLog:r.disableLog,disableWarnings:r.disableWarnings};switch(u.browser){case"chrome":if(!n||!n.shimPeerConnection||!t.shimChrome)return i("Chrome shim is not included in this adapter release."),d;if(null===u.version)return i("Chrome shim can not determine version, not shimming."),d;i("adapter.js shimming chrome."),d.browserShim=n,n.shimGetUserMedia(e),n.shimMediaStream(e),n.shimPeerConnection(e),n.shimOnTrack(e),n.shimAddTrackRemoveTrack(e),n.shimGetSendersWithDtmf(e),n.shimGetStats(e),n.shimSenderReceiverGetStats(e),n.fixNegotiationNeeded(e),c.shimRTCIceCandidate(e),c.shimConnectionState(e),c.shimMaxMessageSize(e),c.shimSendThrowTypeError(e),c.removeAllowExtmapMixed(e);break;case"firefox":if(!a||!a.shimPeerConnection||!t.shimFirefox)return i("Firefox shim is not included in this adapter release."),d;i("adapter.js shimming firefox."),d.browserShim=a,a.shimGetUserMedia(e),a.shimPeerConnection(e),a.shimOnTrack(e),a.shimRemoveStream(e),a.shimSenderGetStats(e),a.shimReceiverGetStats(e),a.shimRTCDataChannel(e),a.shimAddTransceiver(e),a.shimGetParameters(e),a.shimCreateOffer(e),a.shimCreateAnswer(e),c.shimRTCIceCandidate(e),c.shimConnectionState(e),c.shimMaxMessageSize(e),c.shimSendThrowTypeError(e);break;case"edge":if(!s||!s.shimPeerConnection||!t.shimEdge)return i("MS edge shim is not included in this adapter release."),d;i("adapter.js shimming edge."),d.browserShim=s,s.shimGetUserMedia(e),s.shimGetDisplayMedia(e),s.shimPeerConnection(e),s.shimReplaceTrack(e),c.shimMaxMessageSize(e),c.shimSendThrowTypeError(e);break;case"safari":if(!o||!t.shimSafari)return i("Safari shim is not included in this adapter release."),d;i("adapter.js shimming safari."),d.browserShim=o,o.shimRTCIceServerUrls(e),o.shimCreateOfferLegacy(e),o.shimCallbacksAPI(e),o.shimLocalStreamsAPI(e),o.shimRemoteStreamsAPI(e),o.shimTrackEventTransceiver(e),o.shimGetUserMedia(e),o.shimAudioContext(e),c.shimRTCIceCandidate(e),c.shimMaxMessageSize(e),c.shimSendThrowTypeError(e),c.removeAllowExtmapMixed(e);break;default:i("Unsupported browser!")}return d}},{"./chrome/chrome_shim":3,"./common_shim":6,"./edge/edge_shim":7,"./firefox/firefox_shim":11,"./safari/safari_shim":14,"./utils":15}],3:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.shimGetDisplayMedia=i.shimGetUserMedia=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=e("./getusermedia");Object.defineProperty(i,"shimGetUserMedia",{enumerable:!0,get:function(){return n.shimGetUserMedia}});var s=e("./getdisplaymedia");Object.defineProperty(i,"shimGetDisplayMedia",{enumerable:!0,get:function(){return s.shimGetDisplayMedia}}),i.shimMediaStream=u,i.shimOnTrack=d,i.shimGetSendersWithDtmf=l,i.shimGetStats=h,i.shimSenderReceiverGetStats=p,i.shimAddTrackRemoveTrackWithNative=f,i.shimAddTrackRemoveTrack=A,i.shimPeerConnection=m,i.fixNegotiationNeeded=g;var a=o(e("../utils.js"));function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function c(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function u(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function d(e){if("object"===(void 0===e?"undefined":r(e))&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var i=this;return this._ontrackpoly||(this._ontrackpoly=function(t){t.stream.addEventListener("addtrack",(function(r){var n=void 0;n=e.RTCPeerConnection.prototype.getReceivers?i.getReceivers().find((function(e){return e.track&&e.track.id===r.track.id})):{track:r.track};var s=new Event("track");s.track=r.track,s.receiver=n,s.transceiver={receiver:n},s.streams=[t.stream],i.dispatchEvent(s)})),t.stream.getTracks().forEach((function(r){var n=void 0;n=e.RTCPeerConnection.prototype.getReceivers?i.getReceivers().find((function(e){return e.track&&e.track.id===r.id})):{track:r};var s=new Event("track");s.track=r,s.receiver=n,s.transceiver={receiver:n},s.streams=[t.stream],i.dispatchEvent(s)}))},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else a.wrapPeerConnectionEvent(e,"track",(function(e){return e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e}))}function l(e){if("object"===(void 0===e?"undefined":r(e))&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){var t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};var i=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,r){var n=i.apply(this,arguments);return n||(n=t(this,e),this._senders.push(n)),n};var n=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){n.apply(this,arguments);var t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}var s=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var i=this;this._senders=this._senders||[],s.apply(this,[e]),e.getTracks().forEach((function(e){i._senders.push(t(i,e))}))};var a=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._senders=this._senders||[],a.apply(this,[e]),e.getTracks().forEach((function(e){var i=t._senders.find((function(t){return t.track===e}));i&&t._senders.splice(t._senders.indexOf(i),1)}))}}else if("object"===(void 0===e?"undefined":r(e))&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){var o=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){var e=this,t=o.apply(this,[]);return t.forEach((function(t){return t._pc=e})),t},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function h(e){if(e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){var e=this,i=Array.prototype.slice.call(arguments),r=i[0],n=i[1],s=i[2];if(arguments.length>0&&"function"==typeof r)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||"function"!=typeof r))return t.apply(this,[]);var a=function(e){var t={};return e.result().forEach((function(e){var i={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach((function(t){i[t]=e.stat(t)})),t[i.id]=i})),t},o=function(e){return new Map(Object.keys(e).map((function(t){return[t,e[t]]})))};if(arguments.length>=2){var c=function(e){n(o(a(e)))};return t.apply(this,[c,r])}return new Promise((function(i,r){t.apply(e,[function(e){i(o(a(e)))},r])})).then(n,s)}}}function p(e){if("object"===(void 0===e?"undefined":r(e))&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver){if(!("getStats"in e.RTCRtpSender.prototype)){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,i=t.apply(this,[]);return i.forEach((function(t){return t._pc=e})),i});var i=e.RTCPeerConnection.prototype.addTrack;i&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=i.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){var e=this;return this._pc.getStats().then((function(t){return a.filterStats(t,e.track,!0)}))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){var n=e.RTCPeerConnection.prototype.getReceivers;n&&(e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,t=n.apply(this,[]);return t.forEach((function(t){return t._pc=e})),t}),a.wrapPeerConnectionEvent(e,"track",(function(e){return e.receiver._pc=e.srcElement,e})),e.RTCRtpReceiver.prototype.getStats=function(){var e=this;return this._pc.getStats().then((function(t){return a.filterStats(t,e.track,!1)}))}}if("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype){var s=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){var t=arguments[0],i=void 0,r=void 0,n=void 0;return this.getSenders().forEach((function(e){e.track===t&&(i?n=!0:i=e)})),this.getReceivers().forEach((function(e){return e.track===t&&(r?n=!0:r=e),e.track===t})),n||i&&r?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):i?i.getStats():r?r.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return s.apply(this,arguments)}}}}function f(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map((function(t){return e._shimmedLocalStreams[t][0]}))};var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,i){if(!i)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};var r=t.apply(this,arguments);return this._shimmedLocalStreams[i.id]?-1===this._shimmedLocalStreams[i.id].indexOf(r)&&this._shimmedLocalStreams[i.id].push(r):this._shimmedLocalStreams[i.id]=[i,r],r};var i=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var t=this;this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach((function(e){if(t.getSenders().find((function(t){return t.track===e})))throw new DOMException("Track already exists.","InvalidAccessError")}));var r=this.getSenders();i.apply(this,arguments);var n=this.getSenders().filter((function(e){return-1===r.indexOf(e)}));this._shimmedLocalStreams[e.id]=[e].concat(n)};var r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],r.apply(this,arguments)};var n=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){var t=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach((function(i){var r=t._shimmedLocalStreams[i].indexOf(e);-1!==r&&t._shimmedLocalStreams[i].splice(r,1),1===t._shimmedLocalStreams[i].length&&delete t._shimmedLocalStreams[i]})),n.apply(this,arguments)}}function A(e){if(e.RTCPeerConnection){var t=a.detectBrowser(e);if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return f(e);var i=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this,t=i.apply(this);return this._reverseStreams=this._reverseStreams||{},t.map((function(t){return e._reverseStreams[t.id]}))};var r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){var i=this;if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.getTracks().forEach((function(e){if(i.getSenders().find((function(t){return t.track===e})))throw new DOMException("Track already exists.","InvalidAccessError")})),!this._reverseStreams[t.id]){var n=new e.MediaStream(t.getTracks());this._streams[t.id]=n,this._reverseStreams[n.id]=t,t=n}r.apply(this,[t])};var n=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},n.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,i){var r=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");var n=[].slice.call(arguments,1);if(1!==n.length||!n[0].getTracks().find((function(e){return e===t})))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find((function(e){return e.track===t})))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};var s=this._streams[i.id];if(s)s.addTrack(t),Promise.resolve().then((function(){r.dispatchEvent(new Event("negotiationneeded"))}));else{var a=new e.MediaStream([t]);this._streams[i.id]=a,this._reverseStreams[a.id]=i,this.addStream(a)}return this.getSenders().find((function(e){return e.track===t}))},["createOffer","createAnswer"].forEach((function(t){var i=e.RTCPeerConnection.prototype[t],r=c({},t,(function(){var e=this,t=arguments;return arguments.length&&"function"==typeof arguments[0]?i.apply(this,[function(i){var r=u(e,i);t[0].apply(null,[r])},function(e){t[1]&&t[1].apply(null,e)},arguments[2]]):i.apply(this,arguments).then((function(t){return u(e,t)}))}));e.RTCPeerConnection.prototype[t]=r[t]}));var s=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=d(this,arguments[0]),s.apply(this,arguments)):s.apply(this,arguments)};var o=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get:function(){var e=o.get.apply(this);return""===e.type?e:u(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){var t=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(e._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};var i=void 0;Object.keys(this._streams).forEach((function(r){t._streams[r].getTracks().find((function(t){return e.track===t}))&&(i=t._streams[r])})),i&&(1===i.getTracks().length?this.removeStream(this._reverseStreams[i.id]):i.removeTrack(e.track),this.dispatchEvent(new Event("negotiationneeded")))}}function u(e,t){var i=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((function(t){var r=e._reverseStreams[t],n=e._streams[r.id];i=i.replace(new RegExp(n.id,"g"),r.id)})),new RTCSessionDescription({type:t.type,sdp:i})}function d(e,t){var i=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((function(t){var r=e._reverseStreams[t],n=e._streams[r.id];i=i.replace(new RegExp(r.id,"g"),n.id)})),new RTCSessionDescription({type:t.type,sdp:i})}}function m(e){var t=a.detectBrowser(e);if(!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection){var i=0===e.RTCPeerConnection.prototype.addIceCandidate.length;t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){var i=e.RTCPeerConnection.prototype[t],r=c({},t,(function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),i.apply(this,arguments)}));e.RTCPeerConnection.prototype[t]=r[t]}));var r=e.RTCPeerConnection.prototype.addIceCandidate;e.RTCPeerConnection.prototype.addIceCandidate=function(){return i||arguments[0]?t.version<78&&arguments[0]&&""===arguments[0].candidate?Promise.resolve():r.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())}}}function g(e){var t=a.detectBrowser(e);a.wrapPeerConnectionEvent(e,"negotiationneeded",(function(e){var i=e.target;if(!(t.version<72||i.getConfiguration&&"plan-b"===i.getConfiguration().sdpSemantics)||"stable"===i.signalingState)return e}))}},{"../utils.js":15,"./getdisplaymedia":4,"./getusermedia":5}],4:[function(e,t,i){"use strict";function r(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&("function"==typeof t?e.navigator.mediaDevices.getDisplayMedia=function(i){return t(i).then((function(t){var r=i.video&&i.video.width,n=i.video&&i.video.height,s=i.video&&i.video.frameRate;return i.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxFrameRate:s||3}},r&&(i.video.mandatory.maxWidth=r),n&&(i.video.mandatory.maxHeight=n),e.navigator.mediaDevices.getUserMedia(i)}))}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}Object.defineProperty(i,"__esModule",{value:!0}),i.shimGetDisplayMedia=r},{}],5:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};i.shimGetUserMedia=o;var n=s(e("../utils.js"));function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}var a=n.log;function o(e){var t=e&&e.navigator;if(t.mediaDevices){var i=n.detectBrowser(e),s=function(e){if("object"!==(void 0===e?"undefined":r(e))||e.mandatory||e.optional)return e;var t={};return Object.keys(e).forEach((function(i){if("require"!==i&&"advanced"!==i&&"mediaSource"!==i){var n="object"===r(e[i])?e[i]:{ideal:e[i]};void 0!==n.exact&&"number"==typeof n.exact&&(n.min=n.max=n.exact);var s=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==n.ideal){t.optional=t.optional||[];var a={};"number"==typeof n.ideal?(a[s("min",i)]=n.ideal,t.optional.push(a),(a={})[s("max",i)]=n.ideal,t.optional.push(a)):(a[s("",i)]=n.ideal,t.optional.push(a))}void 0!==n.exact&&"number"!=typeof n.exact?(t.mandatory=t.mandatory||{},t.mandatory[s("",i)]=n.exact):["min","max"].forEach((function(e){void 0!==n[e]&&(t.mandatory=t.mandatory||{},t.mandatory[s(e,i)]=n[e])}))}})),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},o=function(e,n){if(i.version>=61)return n(e);if((e=JSON.parse(JSON.stringify(e)))&&"object"===r(e.audio)){var o=function(e,t,i){t in e&&!(i in e)&&(e[i]=e[t],delete e[t])};o((e=JSON.parse(JSON.stringify(e))).audio,"autoGainControl","googAutoGainControl"),o(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=s(e.audio)}if(e&&"object"===r(e.video)){var c=e.video.facingMode;c=c&&("object"===(void 0===c?"undefined":r(c))?c:{ideal:c});var u=i.version<66;if(c&&("user"===c.exact||"environment"===c.exact||"user"===c.ideal||"environment"===c.ideal)&&(!t.mediaDevices.getSupportedConstraints||!t.mediaDevices.getSupportedConstraints().facingMode||u)){delete e.video.facingMode;var d=void 0;if("environment"===c.exact||"environment"===c.ideal?d=["back","rear"]:"user"!==c.exact&&"user"!==c.ideal||(d=["front"]),d)return t.mediaDevices.enumerateDevices().then((function(t){var i=(t=t.filter((function(e){return"videoinput"===e.kind}))).find((function(e){return d.some((function(t){return e.label.toLowerCase().includes(t)}))}));return!i&&t.length&&d.includes("back")&&(i=t[t.length-1]),i&&(e.video.deviceId=c.exact?{exact:i.deviceId}:{ideal:i.deviceId}),e.video=s(e.video),a("chrome: "+JSON.stringify(e)),n(e)}))}e.video=s(e.video)}return a("chrome: "+JSON.stringify(e)),n(e)},c=function(e){return i.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}},u=function(e,i,r){o(e,(function(e){t.webkitGetUserMedia(e,i,(function(e){r&&r(c(e))}))}))};if(t.getUserMedia=u.bind(t),t.mediaDevices.getUserMedia){var d=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(e){return o(e,(function(e){return d(e).then((function(t){if(e.audio&&!t.getAudioTracks().length||e.video&&!t.getVideoTracks().length)throw t.getTracks().forEach((function(e){e.stop()})),new DOMException("","NotFoundError");return t}),(function(e){return Promise.reject(c(e))}))}))}}}}},{"../utils.js":15}],6:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};i.shimRTCIceCandidate=c,i.shimMaxMessageSize=u,i.shimSendThrowTypeError=d,i.shimConnectionState=l,i.removeAllowExtmapMixed=h;var n=o(e("sdp")),s=a(e("./utils"));function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function c(e){if(!(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)){var t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if("object"===(void 0===e?"undefined":r(e))&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length){var i=new t(e),s=n.default.parseCandidate(e.candidate),a=Object.assign(i,s);return a.toJSON=function(){return{candidate:a.candidate,sdpMid:a.sdpMid,sdpMLineIndex:a.sdpMLineIndex,usernameFragment:a.usernameFragment}},a}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,s.wrapPeerConnectionEvent(e,"icecandidate",(function(t){return t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t}))}}function u(e){if(e.RTCPeerConnection){var t=s.detectBrowser(e);"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get:function(){return void 0===this._sctp?null:this._sctp}});var i=function(e){if(!e||!e.sdp)return!1;var t=n.default.splitSections(e.sdp);return t.shift(),t.some((function(e){var t=n.default.parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")}))},r=function(e){var t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;var i=parseInt(t[1],10);return i!=i?-1:i},a=function(e){var i=65536;return"firefox"===t.browser&&(i=t.version<57?-1===e?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),i},o=function(e,i){var r=65536;"firefox"===t.browser&&57===t.version&&(r=65535);var s=n.default.matchPrefix(e.sdp,"a=max-message-size:");return s.length>0?r=parseInt(s[0].substr(19),10):"firefox"===t.browser&&-1!==i&&(r=2147483637),r},c=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===t.browser&&t.version>=76&&"plan-b"===this.getConfiguration().sdpSemantics&&Object.defineProperty(this,"sctp",{get:function(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0}),i(arguments[0])){var e=r(arguments[0]),n=a(e),s=o(arguments[0],e),u=void 0;u=0===n&&0===s?Number.POSITIVE_INFINITY:0===n||0===s?Math.max(n,s):Math.min(n,s);var d={};Object.defineProperty(d,"maxMessageSize",{get:function(){return u}}),this._sctp=d}return c.apply(this,arguments)}}}function d(e){if(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype){var t=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){var e=t.apply(this,arguments);return i(e,this),e},s.wrapPeerConnectionEvent(e,"datachannel",(function(e){return i(e.channel,e.target),e}))}function i(e,t){var i=e.send;e.send=function(){var r=arguments[0],n=r.length||r.size||r.byteLength;if("open"===e.readyState&&t.sctp&&n>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return i.apply(e,arguments)}}}function l(e){if(e.RTCPeerConnection&&!("connectionState"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get:function(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get:function(){return this._onconnectionstatechange||null},set:function(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach((function(e){var i=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=function(e){var t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;var i=new Event("connectionstatechange",e);t.dispatchEvent(i)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),i.apply(this,arguments)}}))}}function h(e){if(e.RTCPeerConnection){var t=s.detectBrowser(e);if(!("chrome"===t.browser&&t.version>=71||"safari"===t.browser&&t.version>=605)){var i=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(e){return e&&e.sdp&&-1!==e.sdp.indexOf("\na=extmap-allow-mixed")&&(e.sdp=e.sdp.split("\n").filter((function(e){return"a=extmap-allow-mixed"!==e.trim()})).join("\n")),i.apply(this,arguments)}}}}},{"./utils":15,sdp:17}],7:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.shimGetDisplayMedia=i.shimGetUserMedia=void 0;var r=e("./getusermedia");Object.defineProperty(i,"shimGetUserMedia",{enumerable:!0,get:function(){return r.shimGetUserMedia}});var n=e("./getdisplaymedia");Object.defineProperty(i,"shimGetDisplayMedia",{enumerable:!0,get:function(){return n.shimGetDisplayMedia}}),i.shimPeerConnection=d,i.shimReplaceTrack=l;var s=u(e("../utils")),a=e("./filtericeservers"),o=c(e("rtcpeerconnection-shim"));function c(e){return e&&e.__esModule?e:{default:e}}function u(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function d(e){var t=s.detectBrowser(e);if(e.RTCIceGatherer&&(e.RTCIceCandidate||(e.RTCIceCandidate=function(e){return e}),e.RTCSessionDescription||(e.RTCSessionDescription=function(e){return e}),t.version<15025)){var i=Object.getOwnPropertyDescriptor(e.MediaStreamTrack.prototype,"enabled");Object.defineProperty(e.MediaStreamTrack.prototype,"enabled",{set:function(e){i.set.call(this,e);var t=new Event("enabled");t.enabled=e,this.dispatchEvent(t)}})}e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)&&Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=new e.RTCDtmfSender(this):"video"===this.track.kind&&(this._dtmf=null)),this._dtmf}}),e.RTCDtmfSender&&!e.RTCDTMFSender&&(e.RTCDTMFSender=e.RTCDtmfSender);var r=(0,o.default)(e,t.version);e.RTCPeerConnection=function(e){return e&&e.iceServers&&(e.iceServers=(0,a.filterIceServers)(e.iceServers,t.version),s.log("ICE servers after filtering:",e.iceServers)),new r(e)},e.RTCPeerConnection.prototype=r.prototype}function l(e){e.RTCRtpSender&&!("replaceTrack"in e.RTCRtpSender.prototype)&&(e.RTCRtpSender.prototype.replaceTrack=e.RTCRtpSender.prototype.setTrack)}},{"../utils":15,"./filtericeservers":8,"./getdisplaymedia":9,"./getusermedia":10,"rtcpeerconnection-shim":16}],8:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.filterIceServers=s;var r=n(e("../utils"));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function s(e,t){var i=!1;return(e=JSON.parse(JSON.stringify(e))).filter((function(e){if(e&&(e.urls||e.url)){var t=e.urls||e.url;e.url&&!e.urls&&r.deprecated("RTCIceServer.url","RTCIceServer.urls");var n="string"==typeof t;return n&&(t=[t]),t=t.filter((function(e){if(0===e.indexOf("stun:"))return!1;var t=e.startsWith("turn")&&!e.startsWith("turn:[")&&e.includes("transport=udp");return t&&!i?(i=!0,!0):t&&!i})),delete e.url,e.urls=n?t[0]:t,!!t.length}}))}},{"../utils":15}],9:[function(e,t,i){"use strict";function r(e){"getDisplayMedia"in e.navigator&&e.navigator.mediaDevices&&(e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||(e.navigator.mediaDevices.getDisplayMedia=e.navigator.getDisplayMedia.bind(e.navigator)))}Object.defineProperty(i,"__esModule",{value:!0}),i.shimGetDisplayMedia=r},{}],10:[function(e,t,i){"use strict";function r(e){var t=e&&e.navigator,i=function(e){return{name:{PermissionDeniedError:"NotAllowedError"}[e.name]||e.name,message:e.message,constraint:e.constraint,toString:function(){return this.name}}},r=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(e){return r(e).catch((function(e){return Promise.reject(i(e))}))}}Object.defineProperty(i,"__esModule",{value:!0}),i.shimGetUserMedia=r},{}],11:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.shimGetDisplayMedia=i.shimGetUserMedia=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=e("./getusermedia");Object.defineProperty(i,"shimGetUserMedia",{enumerable:!0,get:function(){return n.shimGetUserMedia}});var s=e("./getdisplaymedia");Object.defineProperty(i,"shimGetDisplayMedia",{enumerable:!0,get:function(){return s.shimGetDisplayMedia}}),i.shimOnTrack=u,i.shimPeerConnection=d,i.shimSenderGetStats=l,i.shimReceiverGetStats=h,i.shimRemoveStream=p,i.shimRTCDataChannel=f,i.shimAddTransceiver=A,i.shimGetParameters=m,i.shimCreateOffer=g,i.shimCreateAnswer=T;var a=o(e("../utils"));function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function c(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function u(e){"object"===(void 0===e?"undefined":r(e))&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function d(e){var t=a.detectBrowser(e);if("object"===(void 0===e?"undefined":r(e))&&(e.RTCPeerConnection||e.mozRTCPeerConnection)){if(!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){var i=e.RTCPeerConnection.prototype[t],r=c({},t,(function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),i.apply(this,arguments)}));e.RTCPeerConnection.prototype[t]=r[t]})),t.version<68){var i=e.RTCPeerConnection.prototype.addIceCandidate;e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?arguments[0]&&""===arguments[0].candidate?Promise.resolve():i.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())}}var n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},s=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){var e=Array.prototype.slice.call(arguments),i=e[0],r=e[1],a=e[2];return s.apply(this,[i||null]).then((function(e){if(t.version<53&&!r)try{e.forEach((function(e){e.type=n[e.type]||e.type}))}catch(t){if("TypeError"!==t.name)throw t;e.forEach((function(t,i){e.set(i,Object.assign({},t,{type:n[t.type]||t.type}))}))}return e})).then(r,a)}}}function l(e){if("object"===(void 0===e?"undefined":r(e))&&e.RTCPeerConnection&&e.RTCRtpSender&&(!e.RTCRtpSender||!("getStats"in e.RTCRtpSender.prototype))){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,i=t.apply(this,[]);return i.forEach((function(t){return t._pc=e})),i});var i=e.RTCPeerConnection.prototype.addTrack;i&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=i.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}}function h(e){if("object"===(void 0===e?"undefined":r(e))&&e.RTCPeerConnection&&e.RTCRtpSender&&(!e.RTCRtpSender||!("getStats"in e.RTCRtpReceiver.prototype))){var t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,i=t.apply(this,[]);return i.forEach((function(t){return t._pc=e})),i}),a.wrapPeerConnectionEvent(e,"track",(function(e){return e.receiver._pc=e.srcElement,e})),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}}function p(e){e.RTCPeerConnection&&!("removeStream"in e.RTCPeerConnection.prototype)&&(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;a.deprecated("removeStream","removeTrack"),this.getSenders().forEach((function(i){i.track&&e.getTracks().includes(i.track)&&t.removeTrack(i)}))})}function f(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function A(e){if("object"===(void 0===e?"undefined":r(e))&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];var e=arguments[1],i=e&&"sendEncodings"in e;i&&e.sendEncodings.forEach((function(e){if("rid"in e&&!/^[a-z0-9]{0,16}$/i.test(e.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in e&&!(parseFloat(e.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in e&&!(parseFloat(e.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")}));var r=t.apply(this,arguments);if(i){var n=r.sender,s=n.getParameters();(!("encodings"in s)||1===s.encodings.length&&0===Object.keys(s.encodings[0]).length)&&(s.encodings=e.sendEncodings,n.sendEncodings=e.sendEncodings,this.setParametersPromises.push(n.setParameters(s).then((function(){delete n.sendEncodings})).catch((function(){delete n.sendEncodings}))))}return r})}}function m(e){if("object"===(void 0===e?"undefined":r(e))&&e.RTCRtpSender){var t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){var e=t.apply(this,arguments);return"encodings"in e||(e.encodings=[].concat(this.sendEncodings||[{}])),e})}}function g(e){if("object"===(void 0===e?"undefined":r(e))&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){var e=this,i=arguments;return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((function(){return t.apply(e,i)})).finally((function(){e.setParametersPromises=[]})):t.apply(this,arguments)}}}function T(e){if("object"===(void 0===e?"undefined":r(e))&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){var e=this,i=arguments;return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((function(){return t.apply(e,i)})).finally((function(){e.setParametersPromises=[]})):t.apply(this,arguments)}}}},{"../utils":15,"./getdisplaymedia":12,"./getusermedia":13}],12:[function(e,t,i){"use strict";function r(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(i){if(!i||!i.video){var r=new DOMException("getDisplayMedia without video constraints is undefined");return r.name="NotFoundError",r.code=8,Promise.reject(r)}return!0===i.video?i.video={mediaSource:t}:i.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(i)})}Object.defineProperty(i,"__esModule",{value:!0}),i.shimGetDisplayMedia=r},{}],13:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};i.shimGetUserMedia=a;var n=s(e("../utils"));function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function a(e){var t=n.detectBrowser(e),i=e&&e.navigator,s=e&&e.MediaStreamTrack;if(i.getUserMedia=function(e,t,r){n.deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),i.mediaDevices.getUserMedia(e).then(t,r)},!(t.version>55&&"autoGainControl"in i.mediaDevices.getSupportedConstraints())){var a=function(e,t,i){t in e&&!(i in e)&&(e[i]=e[t],delete e[t])},o=i.mediaDevices.getUserMedia.bind(i.mediaDevices);if(i.mediaDevices.getUserMedia=function(e){return"object"===(void 0===e?"undefined":r(e))&&"object"===r(e.audio)&&(e=JSON.parse(JSON.stringify(e)),a(e.audio,"autoGainControl","mozAutoGainControl"),a(e.audio,"noiseSuppression","mozNoiseSuppression")),o(e)},s&&s.prototype.getSettings){var c=s.prototype.getSettings;s.prototype.getSettings=function(){var e=c.apply(this,arguments);return a(e,"mozAutoGainControl","autoGainControl"),a(e,"mozNoiseSuppression","noiseSuppression"),e}}if(s&&s.prototype.applyConstraints){var u=s.prototype.applyConstraints;s.prototype.applyConstraints=function(e){return"audio"===this.kind&&"object"===(void 0===e?"undefined":r(e))&&(e=JSON.parse(JSON.stringify(e)),a(e,"autoGainControl","mozAutoGainControl"),a(e,"noiseSuppression","mozNoiseSuppression")),u.apply(this,[e])}}}}},{"../utils":15}],14:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};i.shimLocalStreamsAPI=a,i.shimRemoteStreamsAPI=o,i.shimCallbacksAPI=c,i.shimGetUserMedia=u,i.shimConstraints=d,i.shimRTCIceServerUrls=l,i.shimTrackEventTransceiver=h,i.shimCreateOfferLegacy=p,i.shimAudioContext=f;var n=s(e("../utils"));function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function a(e){if("object"===(void 0===e?"undefined":r(e))&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){var i=this;this._localStreams||(this._localStreams=[]),this._localStreams.includes(e)||this._localStreams.push(e),e.getAudioTracks().forEach((function(r){return t.call(i,r,e)})),e.getVideoTracks().forEach((function(r){return t.call(i,r,e)}))},e.RTCPeerConnection.prototype.addTrack=function(e){for(var i=this,r=arguments.length,n=Array(r>1?r-1:0),s=1;s<r;s++)n[s-1]=arguments[s];return n&&n.forEach((function(e){i._localStreams?i._localStreams.includes(e)||i._localStreams.push(e):i._localStreams=[e]})),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._localStreams||(this._localStreams=[]);var i=this._localStreams.indexOf(e);if(-1!==i){this._localStreams.splice(i,1);var r=e.getTracks();this.getSenders().forEach((function(e){r.includes(e.track)&&t.removeTrack(e)}))}})}}function o(e){if("object"===(void 0===e?"undefined":r(e))&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(e){var t=this;this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=function(e){e.streams.forEach((function(e){if(t._remoteStreams||(t._remoteStreams=[]),!t._remoteStreams.includes(e)){t._remoteStreams.push(e);var i=new Event("addstream");i.stream=e,t.dispatchEvent(i)}}))})}});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach((function(t){if(e._remoteStreams||(e._remoteStreams=[]),!(e._remoteStreams.indexOf(t)>=0)){e._remoteStreams.push(t);var i=new Event("addstream");i.stream=t,e.dispatchEvent(i)}}))}),t.apply(e,arguments)}}}function c(e){if("object"===(void 0===e?"undefined":r(e))&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype,i=t.createOffer,n=t.createAnswer,s=t.setLocalDescription,a=t.setRemoteDescription,o=t.addIceCandidate;t.createOffer=function(e,t){var r=arguments.length>=2?arguments[2]:arguments[0],n=i.apply(this,[r]);return t?(n.then(e,t),Promise.resolve()):n},t.createAnswer=function(e,t){var i=arguments.length>=2?arguments[2]:arguments[0],r=n.apply(this,[i]);return t?(r.then(e,t),Promise.resolve()):r};var c=function(e,t,i){var r=s.apply(this,[e]);return i?(r.then(t,i),Promise.resolve()):r};t.setLocalDescription=c,c=function(e,t,i){var r=a.apply(this,[e]);return i?(r.then(t,i),Promise.resolve()):r},t.setRemoteDescription=c,c=function(e,t,i){var r=o.apply(this,[e]);return i?(r.then(t,i),Promise.resolve()):r},t.addIceCandidate=c}}function u(e){var t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){var i=t.mediaDevices,r=i.getUserMedia.bind(i);t.mediaDevices.getUserMedia=function(e){return r(d(e))}}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,i,r){t.mediaDevices.getUserMedia(e).then(i,r)}.bind(t))}function d(e){return e&&void 0!==e.video?Object.assign({},e,{video:n.compactObject(e.video)}):e}function l(e){if(e.RTCPeerConnection){var t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,i){if(e&&e.iceServers){for(var r=[],s=0;s<e.iceServers.length;s++){var a=e.iceServers[s];!a.hasOwnProperty("urls")&&a.hasOwnProperty("url")?(n.deprecated("RTCIceServer.url","RTCIceServer.urls"),(a=JSON.parse(JSON.stringify(a))).urls=a.url,delete a.url,r.push(a)):r.push(e.iceServers[s])}e.iceServers=r}return new t(e,i)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return t.generateCertificate}})}}function h(e){"object"===(void 0===e?"undefined":r(e))&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function p(e){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);var i=this.getTransceivers().find((function(e){return"audio"===e.receiver.track.kind}));!1===e.offerToReceiveAudio&&i?"sendrecv"===i.direction?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":"recvonly"===i.direction&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):!0!==e.offerToReceiveAudio||i||this.addTransceiver("audio"),void 0!==e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);var r=this.getTransceivers().find((function(e){return"video"===e.receiver.track.kind}));!1===e.offerToReceiveVideo&&r?"sendrecv"===r.direction?r.setDirection?r.setDirection("sendonly"):r.direction="sendonly":"recvonly"===r.direction&&(r.setDirection?r.setDirection("inactive"):r.direction="inactive"):!0!==e.offerToReceiveVideo||r||this.addTransceiver("video")}return t.apply(this,arguments)}}function f(e){"object"!==(void 0===e?"undefined":r(e))||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}},{"../utils":15}],15:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function n(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}i.extractVersion=o,i.wrapPeerConnectionEvent=c,i.disableLog=u,i.disableWarnings=d,i.log=l,i.deprecated=h,i.detectBrowser=p,i.compactObject=A,i.walkStats=m,i.filterStats=g;var s=!0,a=!0;function o(e,t,i){var r=e.match(t);return r&&r.length>=i&&parseInt(r[i],10)}function c(e,t,i){if(e.RTCPeerConnection){var r=e.RTCPeerConnection.prototype,n=r.addEventListener;r.addEventListener=function(e,r){if(e!==t)return n.apply(this,arguments);var s=function(e){var t=i(e);t&&(r.handleEvent?r.handleEvent(t):r(t))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(r,s),n.apply(this,[e,s])};var s=r.removeEventListener;r.removeEventListener=function(e,i){if(e!==t||!this._eventMap||!this._eventMap[t])return s.apply(this,arguments);if(!this._eventMap[t].has(i))return s.apply(this,arguments);var r=this._eventMap[t].get(i);return this._eventMap[t].delete(i),0===this._eventMap[t].size&&delete this._eventMap[t],0===Object.keys(this._eventMap).length&&delete this._eventMap,s.apply(this,[e,r])},Object.defineProperty(r,"on"+t,{get:function(){return this["_on"+t]},set:function(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}}function u(e){return"boolean"!=typeof e?new Error("Argument type: "+(void 0===e?"undefined":r(e))+". Please use a boolean."):(s=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function d(e){return"boolean"!=typeof e?new Error("Argument type: "+(void 0===e?"undefined":r(e))+". Please use a boolean."):(a=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function l(){if("object"===("undefined"==typeof window?"undefined":r(window))){if(s)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}}function h(e,t){a&&console.warn(e+" is deprecated, please use "+t+" instead.")}function p(e){var t={browser:null,version:null};if(void 0===e||!e.navigator)return t.browser="Not a browser.",t;var i=e.navigator;if(i.mozGetUserMedia)t.browser="firefox",t.version=o(i.userAgent,/Firefox\/(\d+)\./,1);else if(i.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection&&!e.RTCIceGatherer)t.browser="chrome",t.version=o(i.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(i.mediaDevices&&i.userAgent.match(/Edge\/(\d+).(\d+)$/))t.browser="edge",t.version=o(i.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!e.RTCPeerConnection||!i.userAgent.match(/AppleWebKit\/(\d+)\./))return t.browser="Not a supported browser.",t;t.browser="safari",t.version=o(i.userAgent,/AppleWebKit\/(\d+)\./,1),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype}return t}function f(e){return"[object Object]"===Object.prototype.toString.call(e)}function A(e){return f(e)?Object.keys(e).reduce((function(t,i){var r=f(e[i]),s=r?A(e[i]):e[i],a=r&&!Object.keys(s).length;return void 0===s||a?t:Object.assign(t,n({},i,s))}),{}):e}function m(e,t,i){t&&!i.has(t.id)&&(i.set(t.id,t),Object.keys(t).forEach((function(r){r.endsWith("Id")?m(e,e.get(t[r]),i):r.endsWith("Ids")&&t[r].forEach((function(t){m(e,e.get(t),i)}))})))}function g(e,t,i){var r=i?"outbound-rtp":"inbound-rtp",n=new Map;if(null===t)return n;var s=[];return e.forEach((function(e){"track"===e.type&&e.trackIdentifier===t.id&&s.push(e)})),s.forEach((function(t){e.forEach((function(i){i.type===r&&i.trackId===t.id&&m(e,i,n)}))})),n}},{}],16:[function(e,t,i){"use strict";var r=e("sdp");function n(e){return{inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type}function s(e,t,i,n,s){var a=r.writeRtpDescription(e.kind,t);if(a+=r.writeIceParameters(e.iceGatherer.getLocalParameters()),a+=r.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===i?"actpass":s||"active"),a+="a=mid:"+e.mid+"\r\n",e.rtpSender&&e.rtpReceiver?a+="a=sendrecv\r\n":e.rtpSender?a+="a=sendonly\r\n":e.rtpReceiver?a+="a=recvonly\r\n":a+="a=inactive\r\n",e.rtpSender){var o=e.rtpSender._initialTrackId||e.rtpSender.track.id;e.rtpSender._initialTrackId=o;var c="msid:"+(n?n.id:"-")+" "+o+"\r\n";a+="a="+c,a+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+c,e.sendEncodingParameters[0].rtx&&(a+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+c,a+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return a+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+r.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(a+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+r.localCName+"\r\n"),a}function a(e,t){var i=!1;return(e=JSON.parse(JSON.stringify(e))).filter((function(e){if(e&&(e.urls||e.url)){var r=e.urls||e.url;e.url&&!e.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var n="string"==typeof r;return n&&(r=[r]),r=r.filter((function(e){return 0!==e.indexOf("turn:")||-1===e.indexOf("transport=udp")||-1!==e.indexOf("turn:[")||i?0===e.indexOf("stun:")&&t>=14393&&-1===e.indexOf("?transport=udp"):(i=!0,!0)})),delete e.url,e.urls=n?r[0]:r,!!r.length}}))}function o(e,t){var i={codecs:[],headerExtensions:[],fecMechanisms:[]},r=function(e,t){e=parseInt(e,10);for(var i=0;i<t.length;i++)if(t[i].payloadType===e||t[i].preferredPayloadType===e)return t[i]},n=function(e,t,i,n){var s=r(e.parameters.apt,i),a=r(t.parameters.apt,n);return s&&a&&s.name.toLowerCase()===a.name.toLowerCase()};return e.codecs.forEach((function(r){for(var s=0;s<t.codecs.length;s++){var a=t.codecs[s];if(r.name.toLowerCase()===a.name.toLowerCase()&&r.clockRate===a.clockRate){if("rtx"===r.name.toLowerCase()&&r.parameters&&a.parameters.apt&&!n(r,a,e.codecs,t.codecs))continue;(a=JSON.parse(JSON.stringify(a))).numChannels=Math.min(r.numChannels,a.numChannels),i.codecs.push(a),a.rtcpFeedback=a.rtcpFeedback.filter((function(e){for(var t=0;t<r.rtcpFeedback.length;t++)if(r.rtcpFeedback[t].type===e.type&&r.rtcpFeedback[t].parameter===e.parameter)return!0;return!1}));break}}})),e.headerExtensions.forEach((function(e){for(var r=0;r<t.headerExtensions.length;r++){var n=t.headerExtensions[r];if(e.uri===n.uri){i.headerExtensions.push(n);break}}})),i}function c(e,t,i){return-1!=={offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[t][e].indexOf(i)}function u(e,t){var i=e.getRemoteCandidates().find((function(e){return t.foundation===e.foundation&&t.ip===e.ip&&t.port===e.port&&t.priority===e.priority&&t.protocol===e.protocol&&t.type===e.type}));return i||e.addRemoteCandidate(t),!i}function d(e,t){var i=new Error(t);return i.name=e,i.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[e],i}t.exports=function(e,t){function i(t,i){i.addTrack(t),i.dispatchEvent(new e.MediaStreamTrackEvent("addtrack",{track:t}))}function l(t,i){i.removeTrack(t),i.dispatchEvent(new e.MediaStreamTrackEvent("removetrack",{track:t}))}function h(t,i,r,n){var s=new Event("track");s.track=i,s.receiver=r,s.transceiver={receiver:r},s.streams=n,e.setTimeout((function(){t._dispatchEvent("track",s)}))}var p=function(i){var n=this,s=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach((function(e){n[e]=s[e].bind(s)})),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",i=JSON.parse(JSON.stringify(i||{})),this.usingBundle="max-bundle"===i.bundlePolicy,"negotiate"===i.rtcpMuxPolicy)throw d("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(i.rtcpMuxPolicy||(i.rtcpMuxPolicy="require"),i.iceTransportPolicy){case"all":case"relay":break;default:i.iceTransportPolicy="all"}switch(i.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:i.bundlePolicy="balanced"}if(i.iceServers=a(i.iceServers||[],t),this._iceGatherers=[],i.iceCandidatePoolSize)for(var o=i.iceCandidatePoolSize;o>0;o--)this._iceGatherers.push(new e.RTCIceGatherer({iceServers:i.iceServers,gatherPolicy:i.iceTransportPolicy}));else i.iceCandidatePoolSize=0;this._config=i,this.transceivers=[],this._sdpSessionId=r.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(p.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(p.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),p.prototype.onicecandidate=null,p.prototype.onaddstream=null,p.prototype.ontrack=null,p.prototype.onremovestream=null,p.prototype.onsignalingstatechange=null,p.prototype.oniceconnectionstatechange=null,p.prototype.onconnectionstatechange=null,p.prototype.onicegatheringstatechange=null,p.prototype.onnegotiationneeded=null,p.prototype.ondatachannel=null,p.prototype._dispatchEvent=function(e,t){this._isClosed||(this.dispatchEvent(t),"function"==typeof this["on"+e]&&this["on"+e](t))},p.prototype._emitGatheringStateChange=function(){var e=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",e)},p.prototype.getConfiguration=function(){return this._config},p.prototype.getLocalStreams=function(){return this.localStreams},p.prototype.getRemoteStreams=function(){return this.remoteStreams},p.prototype._createTransceiver=function(e,t){var i=this.transceivers.length>0,r={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:e,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&i)r.iceTransport=this.transceivers[0].iceTransport,r.dtlsTransport=this.transceivers[0].dtlsTransport;else{var n=this._createIceAndDtlsTransports();r.iceTransport=n.iceTransport,r.dtlsTransport=n.dtlsTransport}return t||this.transceivers.push(r),r},p.prototype.addTrack=function(t,i){if(this._isClosed)throw d("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var r;if(this.transceivers.find((function(e){return e.track===t})))throw d("InvalidAccessError","Track already exists.");for(var n=0;n<this.transceivers.length;n++)this.transceivers[n].track||this.transceivers[n].kind!==t.kind||(r=this.transceivers[n]);return r||(r=this._createTransceiver(t.kind)),this._maybeFireNegotiationNeeded(),-1===this.localStreams.indexOf(i)&&this.localStreams.push(i),r.track=t,r.stream=i,r.rtpSender=new e.RTCRtpSender(t,r.dtlsTransport),r.rtpSender},p.prototype.addStream=function(e){var i=this;if(t>=15025)e.getTracks().forEach((function(t){i.addTrack(t,e)}));else{var r=e.clone();e.getTracks().forEach((function(e,t){var i=r.getTracks()[t];e.addEventListener("enabled",(function(e){i.enabled=e.enabled}))})),r.getTracks().forEach((function(e){i.addTrack(e,r)}))}},p.prototype.removeTrack=function(t){if(this._isClosed)throw d("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(t instanceof e.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var i=this.transceivers.find((function(e){return e.rtpSender===t}));if(!i)throw d("InvalidAccessError","Sender was not created by this connection.");var r=i.stream;i.rtpSender.stop(),i.rtpSender=null,i.track=null,i.stream=null,-1===this.transceivers.map((function(e){return e.stream})).indexOf(r)&&this.localStreams.indexOf(r)>-1&&this.localStreams.splice(this.localStreams.indexOf(r),1),this._maybeFireNegotiationNeeded()},p.prototype.removeStream=function(e){var t=this;e.getTracks().forEach((function(e){var i=t.getSenders().find((function(t){return t.track===e}));i&&t.removeTrack(i)}))},p.prototype.getSenders=function(){return this.transceivers.filter((function(e){return!!e.rtpSender})).map((function(e){return e.rtpSender}))},p.prototype.getReceivers=function(){return this.transceivers.filter((function(e){return!!e.rtpReceiver})).map((function(e){return e.rtpReceiver}))},p.prototype._createIceGatherer=function(t,i){var r=this;if(i&&t>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var n=new e.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(n,"state",{value:"new",writable:!0}),this.transceivers[t].bufferedCandidateEvents=[],this.transceivers[t].bufferCandidates=function(e){var i=!e.candidate||0===Object.keys(e.candidate).length;n.state=i?"completed":"gathering",null!==r.transceivers[t].bufferedCandidateEvents&&r.transceivers[t].bufferedCandidateEvents.push(e)},n.addEventListener("localcandidate",this.transceivers[t].bufferCandidates),n},p.prototype._gather=function(t,i){var n=this,s=this.transceivers[i].iceGatherer;if(!s.onlocalcandidate){var a=this.transceivers[i].bufferedCandidateEvents;this.transceivers[i].bufferedCandidateEvents=null,s.removeEventListener("localcandidate",this.transceivers[i].bufferCandidates),s.onlocalcandidate=function(e){if(!(n.usingBundle&&i>0)){var a=new Event("icecandidate");a.candidate={sdpMid:t,sdpMLineIndex:i};var o=e.candidate,c=!o||0===Object.keys(o).length;if(c)"new"!==s.state&&"gathering"!==s.state||(s.state="completed");else{"new"===s.state&&(s.state="gathering"),o.component=1,o.ufrag=s.getLocalParameters().usernameFragment;var u=r.writeCandidate(o);a.candidate=Object.assign(a.candidate,r.parseCandidate(u)),a.candidate.candidate=u,a.candidate.toJSON=function(){return{candidate:a.candidate.candidate,sdpMid:a.candidate.sdpMid,sdpMLineIndex:a.candidate.sdpMLineIndex,usernameFragment:a.candidate.usernameFragment}}}var d=r.getMediaSections(n._localDescription.sdp);d[a.candidate.sdpMLineIndex]+=c?"a=end-of-candidates\r\n":"a="+a.candidate.candidate+"\r\n",n._localDescription.sdp=r.getDescription(n._localDescription.sdp)+d.join("");var l=n.transceivers.every((function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state}));"gathering"!==n.iceGatheringState&&(n.iceGatheringState="gathering",n._emitGatheringStateChange()),c||n._dispatchEvent("icecandidate",a),l&&(n._dispatchEvent("icecandidate",new Event("icecandidate")),n.iceGatheringState="complete",n._emitGatheringStateChange())}},e.setTimeout((function(){a.forEach((function(e){s.onlocalcandidate(e)}))}),0)}},p.prototype._createIceAndDtlsTransports=function(){var t=this,i=new e.RTCIceTransport(null);i.onicestatechange=function(){t._updateIceConnectionState(),t._updateConnectionState()};var r=new e.RTCDtlsTransport(i);return r.ondtlsstatechange=function(){t._updateConnectionState()},r.onerror=function(){Object.defineProperty(r,"state",{value:"failed",writable:!0}),t._updateConnectionState()},{iceTransport:i,dtlsTransport:r}},p.prototype._disposeIceAndDtlsTransports=function(e){var t=this.transceivers[e].iceGatherer;t&&(delete t.onlocalcandidate,delete this.transceivers[e].iceGatherer);var i=this.transceivers[e].iceTransport;i&&(delete i.onicestatechange,delete this.transceivers[e].iceTransport);var r=this.transceivers[e].dtlsTransport;r&&(delete r.ondtlsstatechange,delete r.onerror,delete this.transceivers[e].dtlsTransport)},p.prototype._transceive=function(e,i,n){var s=o(e.localCapabilities,e.remoteCapabilities);i&&e.rtpSender&&(s.encodings=e.sendEncodingParameters,s.rtcp={cname:r.localCName,compound:e.rtcpParameters.compound},e.recvEncodingParameters.length&&(s.rtcp.ssrc=e.recvEncodingParameters[0].ssrc),e.rtpSender.send(s)),n&&e.rtpReceiver&&s.codecs.length>0&&("video"===e.kind&&e.recvEncodingParameters&&t<15019&&e.recvEncodingParameters.forEach((function(e){delete e.rtx})),e.recvEncodingParameters.length?s.encodings=e.recvEncodingParameters:s.encodings=[{}],s.rtcp={compound:e.rtcpParameters.compound},e.rtcpParameters.cname&&(s.rtcp.cname=e.rtcpParameters.cname),e.sendEncodingParameters.length&&(s.rtcp.ssrc=e.sendEncodingParameters[0].ssrc),e.rtpReceiver.receive(s))},p.prototype.setLocalDescription=function(e){var t,i,n=this;if(-1===["offer","answer"].indexOf(e.type))return Promise.reject(d("TypeError",'Unsupported type "'+e.type+'"'));if(!c("setLocalDescription",e.type,n.signalingState)||n._isClosed)return Promise.reject(d("InvalidStateError","Can not set local "+e.type+" in state "+n.signalingState));if("offer"===e.type)t=r.splitSections(e.sdp),i=t.shift(),t.forEach((function(e,t){var i=r.parseRtpParameters(e);n.transceivers[t].localCapabilities=i})),n.transceivers.forEach((function(e,t){n._gather(e.mid,t)}));else if("answer"===e.type){t=r.splitSections(n._remoteDescription.sdp),i=t.shift();var s=r.matchPrefix(i,"a=ice-lite").length>0;t.forEach((function(e,t){var a=n.transceivers[t],c=a.iceGatherer,u=a.iceTransport,d=a.dtlsTransport,l=a.localCapabilities,h=a.remoteCapabilities;if(!(r.isRejected(e)&&0===r.matchPrefix(e,"a=bundle-only").length||a.rejected)){var p=r.getIceParameters(e,i),f=r.getDtlsParameters(e,i);s&&(f.role="server"),n.usingBundle&&0!==t||(n._gather(a.mid,t),"new"===u.state&&u.start(c,p,s?"controlling":"controlled"),"new"===d.state&&d.start(f));var A=o(l,h);n._transceive(a,A.codecs.length>0,!1)}}))}return n._localDescription={type:e.type,sdp:e.sdp},"offer"===e.type?n._updateSignalingState("have-local-offer"):n._updateSignalingState("stable"),Promise.resolve()},p.prototype.setRemoteDescription=function(n){var s=this;if(-1===["offer","answer"].indexOf(n.type))return Promise.reject(d("TypeError",'Unsupported type "'+n.type+'"'));if(!c("setRemoteDescription",n.type,s.signalingState)||s._isClosed)return Promise.reject(d("InvalidStateError","Can not set remote "+n.type+" in state "+s.signalingState));var a={};s.remoteStreams.forEach((function(e){a[e.id]=e}));var p=[],f=r.splitSections(n.sdp),A=f.shift(),m=r.matchPrefix(A,"a=ice-lite").length>0,g=r.matchPrefix(A,"a=group:BUNDLE ").length>0;s.usingBundle=g;var T=r.matchPrefix(A,"a=ice-options:")[0];return s.canTrickleIceCandidates=!!T&&T.substr(14).split(" ").indexOf("trickle")>=0,f.forEach((function(c,d){var h=r.splitLines(c),f=r.getKind(c),T=r.isRejected(c)&&0===r.matchPrefix(c,"a=bundle-only").length,v=h[0].substr(2).split(" ")[2],C=r.getDirection(c,A),E=r.parseMsid(c),S=r.getMid(c)||r.generateIdentifier();if(T||"application"===f&&("DTLS/SCTP"===v||"UDP/DTLS/SCTP"===v))s.transceivers[d]={mid:S,kind:f,protocol:v,rejected:!0};else{var x,b,y,_,I,R,w,P,D;!T&&s.transceivers[d]&&s.transceivers[d].rejected&&(s.transceivers[d]=s._createTransceiver(f,!0));var k,O,M=r.parseRtpParameters(c);T||(k=r.getIceParameters(c,A),(O=r.getDtlsParameters(c,A)).role="client"),w=r.parseRtpEncodingParameters(c);var B=r.parseRtcpParameters(c),U=r.matchPrefix(c,"a=end-of-candidates",A).length>0,N=r.matchPrefix(c,"a=candidate:").map((function(e){return r.parseCandidate(e)})).filter((function(e){return 1===e.component}));if(("offer"===n.type||"answer"===n.type)&&!T&&g&&d>0&&s.transceivers[d]&&(s._disposeIceAndDtlsTransports(d),s.transceivers[d].iceGatherer=s.transceivers[0].iceGatherer,s.transceivers[d].iceTransport=s.transceivers[0].iceTransport,s.transceivers[d].dtlsTransport=s.transceivers[0].dtlsTransport,s.transceivers[d].rtpSender&&s.transceivers[d].rtpSender.setTransport(s.transceivers[0].dtlsTransport),s.transceivers[d].rtpReceiver&&s.transceivers[d].rtpReceiver.setTransport(s.transceivers[0].dtlsTransport)),"offer"!==n.type||T)"answer"!==n.type||T||(b=(x=s.transceivers[d]).iceGatherer,y=x.iceTransport,_=x.dtlsTransport,I=x.rtpReceiver,R=x.sendEncodingParameters,P=x.localCapabilities,s.transceivers[d].recvEncodingParameters=w,s.transceivers[d].remoteCapabilities=M,s.transceivers[d].rtcpParameters=B,N.length&&"new"===y.state&&(!m&&!U||g&&0!==d?N.forEach((function(e){u(x.iceTransport,e)})):y.setRemoteCandidates(N)),g&&0!==d||("new"===y.state&&y.start(b,k,"controlling"),"new"===_.state&&_.start(O)),!o(x.localCapabilities,x.remoteCapabilities).codecs.filter((function(e){return"rtx"===e.name.toLowerCase()})).length&&x.sendEncodingParameters[0].rtx&&delete x.sendEncodingParameters[0].rtx,s._transceive(x,"sendrecv"===C||"recvonly"===C,"sendrecv"===C||"sendonly"===C),!I||"sendrecv"!==C&&"sendonly"!==C?delete x.rtpReceiver:(D=I.track,E?(a[E.stream]||(a[E.stream]=new e.MediaStream),i(D,a[E.stream]),p.push([D,I,a[E.stream]])):(a.default||(a.default=new e.MediaStream),i(D,a.default),p.push([D,I,a.default]))));else{(x=s.transceivers[d]||s._createTransceiver(f)).mid=S,x.iceGatherer||(x.iceGatherer=s._createIceGatherer(d,g)),N.length&&"new"===x.iceTransport.state&&(!U||g&&0!==d?N.forEach((function(e){u(x.iceTransport,e)})):x.iceTransport.setRemoteCandidates(N)),P=e.RTCRtpReceiver.getCapabilities(f),t<15019&&(P.codecs=P.codecs.filter((function(e){return"rtx"!==e.name}))),R=x.sendEncodingParameters||[{ssrc:1001*(2*d+2)}];var L,F=!1;"sendrecv"===C||"sendonly"===C?(F=!x.rtpReceiver,I=x.rtpReceiver||new e.RTCRtpReceiver(x.dtlsTransport,f),F&&(D=I.track,E&&"-"===E.stream||(E?(a[E.stream]||(a[E.stream]=new e.MediaStream,Object.defineProperty(a[E.stream],"id",{get:function(){return E.stream}})),Object.defineProperty(D,"id",{get:function(){return E.track}}),L=a[E.stream]):(a.default||(a.default=new e.MediaStream),L=a.default)),L&&(i(D,L),x.associatedRemoteMediaStreams.push(L)),p.push([D,I,L]))):x.rtpReceiver&&x.rtpReceiver.track&&(x.associatedRemoteMediaStreams.forEach((function(e){var t=e.getTracks().find((function(e){return e.id===x.rtpReceiver.track.id}));t&&l(t,e)})),x.associatedRemoteMediaStreams=[]),x.localCapabilities=P,x.remoteCapabilities=M,x.rtpReceiver=I,x.rtcpParameters=B,x.sendEncodingParameters=R,x.recvEncodingParameters=w,s._transceive(s.transceivers[d],!1,F)}}})),void 0===s._dtlsRole&&(s._dtlsRole="offer"===n.type?"active":"passive"),s._remoteDescription={type:n.type,sdp:n.sdp},"offer"===n.type?s._updateSignalingState("have-remote-offer"):s._updateSignalingState("stable"),Object.keys(a).forEach((function(t){var i=a[t];if(i.getTracks().length){if(-1===s.remoteStreams.indexOf(i)){s.remoteStreams.push(i);var r=new Event("addstream");r.stream=i,e.setTimeout((function(){s._dispatchEvent("addstream",r)}))}p.forEach((function(e){var t=e[0],r=e[1];i.id===e[2].id&&h(s,t,r,[i])}))}})),p.forEach((function(e){e[2]||h(s,e[0],e[1],[])})),e.setTimeout((function(){s&&s.transceivers&&s.transceivers.forEach((function(e){e.iceTransport&&"new"===e.iceTransport.state&&e.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),e.iceTransport.addRemoteCandidate({}))}))}),4e3),Promise.resolve()},p.prototype.close=function(){this.transceivers.forEach((function(e){e.iceTransport&&e.iceTransport.stop(),e.dtlsTransport&&e.dtlsTransport.stop(),e.rtpSender&&e.rtpSender.stop(),e.rtpReceiver&&e.rtpReceiver.stop()})),this._isClosed=!0,this._updateSignalingState("closed")},p.prototype._updateSignalingState=function(e){this.signalingState=e;var t=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",t)},p.prototype._maybeFireNegotiationNeeded=function(){var t=this;"stable"===this.signalingState&&!0!==this.needNegotiation&&(this.needNegotiation=!0,e.setTimeout((function(){if(t.needNegotiation){t.needNegotiation=!1;var e=new Event("negotiationneeded");t._dispatchEvent("negotiationneeded",e)}}),0))},p.prototype._updateIceConnectionState=function(){var e,t={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach((function(e){e.iceTransport&&!e.rejected&&t[e.iceTransport.state]++})),e="new",t.failed>0?e="failed":t.checking>0?e="checking":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0?e="connected":t.completed>0&&(e="completed"),e!==this.iceConnectionState){this.iceConnectionState=e;var i=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",i)}},p.prototype._updateConnectionState=function(){var e,t={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach((function(e){e.iceTransport&&e.dtlsTransport&&!e.rejected&&(t[e.iceTransport.state]++,t[e.dtlsTransport.state]++)})),t.connected+=t.completed,e="new",t.failed>0?e="failed":t.connecting>0?e="connecting":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0&&(e="connected"),e!==this.connectionState){this.connectionState=e;var i=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",i)}},p.prototype.createOffer=function(){var i=this;if(i._isClosed)return Promise.reject(d("InvalidStateError","Can not call createOffer after close"));var n=i.transceivers.filter((function(e){return"audio"===e.kind})).length,a=i.transceivers.filter((function(e){return"video"===e.kind})).length,o=arguments[0];if(o){if(o.mandatory||o.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==o.offerToReceiveAudio&&(n=!0===o.offerToReceiveAudio?1:!1===o.offerToReceiveAudio?0:o.offerToReceiveAudio),void 0!==o.offerToReceiveVideo&&(a=!0===o.offerToReceiveVideo?1:!1===o.offerToReceiveVideo?0:o.offerToReceiveVideo)}for(i.transceivers.forEach((function(e){"audio"===e.kind?--n<0&&(e.wantReceive=!1):"video"===e.kind&&--a<0&&(e.wantReceive=!1)}));n>0||a>0;)n>0&&(i._createTransceiver("audio"),n--),a>0&&(i._createTransceiver("video"),a--);var c=r.writeSessionBoilerplate(i._sdpSessionId,i._sdpSessionVersion++);i.transceivers.forEach((function(n,s){var a=n.track,o=n.kind,c=n.mid||r.generateIdentifier();n.mid=c,n.iceGatherer||(n.iceGatherer=i._createIceGatherer(s,i.usingBundle));var u=e.RTCRtpSender.getCapabilities(o);t<15019&&(u.codecs=u.codecs.filter((function(e){return"rtx"!==e.name}))),u.codecs.forEach((function(e){"H264"===e.name&&void 0===e.parameters["level-asymmetry-allowed"]&&(e.parameters["level-asymmetry-allowed"]="1"),n.remoteCapabilities&&n.remoteCapabilities.codecs&&n.remoteCapabilities.codecs.forEach((function(t){e.name.toLowerCase()===t.name.toLowerCase()&&e.clockRate===t.clockRate&&(e.preferredPayloadType=t.payloadType)}))})),u.headerExtensions.forEach((function(e){(n.remoteCapabilities&&n.remoteCapabilities.headerExtensions||[]).forEach((function(t){e.uri===t.uri&&(e.id=t.id)}))}));var d=n.sendEncodingParameters||[{ssrc:1001*(2*s+1)}];a&&t>=15019&&"video"===o&&!d[0].rtx&&(d[0].rtx={ssrc:d[0].ssrc+1}),n.wantReceive&&(n.rtpReceiver=new e.RTCRtpReceiver(n.dtlsTransport,o)),n.localCapabilities=u,n.sendEncodingParameters=d})),"max-compat"!==i._config.bundlePolicy&&(c+="a=group:BUNDLE "+i.transceivers.map((function(e){return e.mid})).join(" ")+"\r\n"),c+="a=ice-options:trickle\r\n",i.transceivers.forEach((function(e,t){c+=s(e,e.localCapabilities,"offer",e.stream,i._dtlsRole),c+="a=rtcp-rsize\r\n",!e.iceGatherer||"new"===i.iceGatheringState||0!==t&&i.usingBundle||(e.iceGatherer.getLocalCandidates().forEach((function(e){e.component=1,c+="a="+r.writeCandidate(e)+"\r\n"})),"completed"===e.iceGatherer.state&&(c+="a=end-of-candidates\r\n"))}));var u=new e.RTCSessionDescription({type:"offer",sdp:c});return Promise.resolve(u)},p.prototype.createAnswer=function(){var i=this;if(i._isClosed)return Promise.reject(d("InvalidStateError","Can not call createAnswer after close"));if("have-remote-offer"!==i.signalingState&&"have-local-pranswer"!==i.signalingState)return Promise.reject(d("InvalidStateError","Can not call createAnswer in signalingState "+i.signalingState));var n=r.writeSessionBoilerplate(i._sdpSessionId,i._sdpSessionVersion++);i.usingBundle&&(n+="a=group:BUNDLE "+i.transceivers.map((function(e){return e.mid})).join(" ")+"\r\n"),n+="a=ice-options:trickle\r\n";var a=r.getMediaSections(i._remoteDescription.sdp).length;i.transceivers.forEach((function(e,r){if(!(r+1>a)){if(e.rejected)return"application"===e.kind?"DTLS/SCTP"===e.protocol?n+="m=application 0 DTLS/SCTP 5000\r\n":n+="m=application 0 "+e.protocol+" webrtc-datachannel\r\n":"audio"===e.kind?n+="m=audio 0 UDP/TLS/RTP/SAVPF 0\r\na=rtpmap:0 PCMU/8000\r\n":"video"===e.kind&&(n+="m=video 0 UDP/TLS/RTP/SAVPF 120\r\na=rtpmap:120 VP8/90000\r\n"),void(n+="c=IN IP4 0.0.0.0\r\na=inactive\r\na=mid:"+e.mid+"\r\n");var c;e.stream&&("audio"===e.kind?c=e.stream.getAudioTracks()[0]:"video"===e.kind&&(c=e.stream.getVideoTracks()[0]),c&&t>=15019&&"video"===e.kind&&!e.sendEncodingParameters[0].rtx&&(e.sendEncodingParameters[0].rtx={ssrc:e.sendEncodingParameters[0].ssrc+1}));var u=o(e.localCapabilities,e.remoteCapabilities);!u.codecs.filter((function(e){return"rtx"===e.name.toLowerCase()})).length&&e.sendEncodingParameters[0].rtx&&delete e.sendEncodingParameters[0].rtx,n+=s(e,u,"answer",e.stream,i._dtlsRole),e.rtcpParameters&&e.rtcpParameters.reducedSize&&(n+="a=rtcp-rsize\r\n")}}));var c=new e.RTCSessionDescription({type:"answer",sdp:n});return Promise.resolve(c)},p.prototype.addIceCandidate=function(e){var t,i=this;return e&&void 0===e.sdpMLineIndex&&!e.sdpMid?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise((function(n,s){if(!i._remoteDescription)return s(d("InvalidStateError","Can not add ICE candidate without a remote description"));if(e&&""!==e.candidate){var a=e.sdpMLineIndex;if(e.sdpMid)for(var o=0;o<i.transceivers.length;o++)if(i.transceivers[o].mid===e.sdpMid){a=o;break}var c=i.transceivers[a];if(!c)return s(d("OperationError","Can not add ICE candidate"));if(c.rejected)return n();var l=Object.keys(e.candidate).length>0?r.parseCandidate(e.candidate):{};if("tcp"===l.protocol&&(0===l.port||9===l.port))return n();if(l.component&&1!==l.component)return n();if((0===a||a>0&&c.iceTransport!==i.transceivers[0].iceTransport)&&!u(c.iceTransport,l))return s(d("OperationError","Can not add ICE candidate"));var h=e.candidate.trim();0===h.indexOf("a=")&&(h=h.substr(2)),(t=r.getMediaSections(i._remoteDescription.sdp))[a]+="a="+(l.type?h:"end-of-candidates")+"\r\n",i._remoteDescription.sdp=r.getDescription(i._remoteDescription.sdp)+t.join("")}else for(var p=0;p<i.transceivers.length&&(i.transceivers[p].rejected||(i.transceivers[p].iceTransport.addRemoteCandidate({}),(t=r.getMediaSections(i._remoteDescription.sdp))[p]+="a=end-of-candidates\r\n",i._remoteDescription.sdp=r.getDescription(i._remoteDescription.sdp)+t.join(""),!i.usingBundle));p++);n()}))},p.prototype.getStats=function(t){if(t&&t instanceof e.MediaStreamTrack){var i=null;if(this.transceivers.forEach((function(e){e.rtpSender&&e.rtpSender.track===t?i=e.rtpSender:e.rtpReceiver&&e.rtpReceiver.track===t&&(i=e.rtpReceiver)})),!i)throw d("InvalidAccessError","Invalid selector.");return i.getStats()}var r=[];return this.transceivers.forEach((function(e){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach((function(t){e[t]&&r.push(e[t].getStats())}))})),Promise.all(r).then((function(e){var t=new Map;return e.forEach((function(e){e.forEach((function(e){t.set(e.id,e)}))})),t}))},["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"].forEach((function(t){var i=e[t];if(i&&i.prototype&&i.prototype.getStats){var r=i.prototype.getStats;i.prototype.getStats=function(){return r.apply(this).then((function(e){var t=new Map;return Object.keys(e).forEach((function(i){e[i].type=n(e[i]),t.set(i,e[i])})),t}))}}}));var f=["createOffer","createAnswer"];return f.forEach((function(e){var t=p.prototype[e];p.prototype[e]=function(){var e=arguments;return"function"==typeof e[0]||"function"==typeof e[1]?t.apply(this,[arguments[2]]).then((function(t){"function"==typeof e[0]&&e[0].apply(null,[t])}),(function(t){"function"==typeof e[1]&&e[1].apply(null,[t])})):t.apply(this,arguments)}})),(f=["setLocalDescription","setRemoteDescription","addIceCandidate"]).forEach((function(e){var t=p.prototype[e];p.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]||"function"==typeof e[2]?t.apply(this,arguments).then((function(){"function"==typeof e[1]&&e[1].apply(null)}),(function(t){"function"==typeof e[2]&&e[2].apply(null,[t])})):t.apply(this,arguments)}})),["getStats"].forEach((function(e){var t=p.prototype[e];p.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]?t.apply(this,arguments).then((function(){"function"==typeof e[1]&&e[1].apply(null)})):t.apply(this,arguments)}})),p}},{sdp:17}],17:[function(e,t,i){"use strict";var r={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};r.localCName=r.generateIdentifier(),r.splitLines=function(e){return e.trim().split("\n").map((function(e){return e.trim()}))},r.splitSections=function(e){return e.split("\nm=").map((function(e,t){return(t>0?"m="+e:e).trim()+"\r\n"}))},r.getDescription=function(e){var t=r.splitSections(e);return t&&t[0]},r.getMediaSections=function(e){var t=r.splitSections(e);return t.shift(),t},r.matchPrefix=function(e,t){return r.splitLines(e).filter((function(e){return 0===e.indexOf(t)}))},r.parseCandidate=function(e){for(var t,i={foundation:(t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" "))[0],component:parseInt(t[1],10),protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]},r=8;r<t.length;r+=2)switch(t[r]){case"raddr":i.relatedAddress=t[r+1];break;case"rport":i.relatedPort=parseInt(t[r+1],10);break;case"tcptype":i.tcpType=t[r+1];break;case"ufrag":i.ufrag=t[r+1],i.usernameFragment=t[r+1];break;default:i[t[r]]=t[r+1]}return i},r.writeCandidate=function(e){var t=[];t.push(e.foundation),t.push(e.component),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);var i=e.type;return t.push("typ"),t.push(i),"host"!==i&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},r.parseIceOptions=function(e){return e.substr(14).split(" ")},r.parseRtpMap=function(e){var t=e.substr(9).split(" "),i={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),i.name=t[0],i.clockRate=parseInt(t[1],10),i.channels=3===t.length?parseInt(t[2],10):1,i.numChannels=i.channels,i},r.writeRtpMap=function(e){var t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);var i=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==i?"/"+i:"")+"\r\n"},r.parseExtmap=function(e){var t=e.substr(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1]}},r.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\r\n"},r.parseFmtp=function(e){for(var t,i={},r=e.substr(e.indexOf(" ")+1).split(";"),n=0;n<r.length;n++)i[(t=r[n].trim().split("="))[0].trim()]=t[1];return i},r.writeFmtp=function(e){var t="",i=e.payloadType;if(void 0!==e.preferredPayloadType&&(i=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){var r=[];Object.keys(e.parameters).forEach((function(t){e.parameters[t]?r.push(t+"="+e.parameters[t]):r.push(t)})),t+="a=fmtp:"+i+" "+r.join(";")+"\r\n"}return t},r.parseRtcpFb=function(e){var t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},r.writeRtcpFb=function(e){var t="",i=e.payloadType;return void 0!==e.preferredPayloadType&&(i=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach((function(e){t+="a=rtcp-fb:"+i+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"})),t},r.parseSsrcMedia=function(e){var t=e.indexOf(" "),i={ssrc:parseInt(e.substr(7,t-7),10)},r=e.indexOf(":",t);return r>-1?(i.attribute=e.substr(t+1,r-t-1),i.value=e.substr(r+1)):i.attribute=e.substr(t+1),i},r.parseSsrcGroup=function(e){var t=e.substr(13).split(" ");return{semantics:t.shift(),ssrcs:t.map((function(e){return parseInt(e,10)}))}},r.getMid=function(e){var t=r.matchPrefix(e,"a=mid:")[0];if(t)return t.substr(6)},r.parseFingerprint=function(e){var t=e.substr(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1]}},r.getDtlsParameters=function(e,t){return{role:"auto",fingerprints:r.matchPrefix(e+t,"a=fingerprint:").map(r.parseFingerprint)}},r.writeDtlsParameters=function(e,t){var i="a=setup:"+t+"\r\n";return e.fingerprints.forEach((function(e){i+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"})),i},r.parseCryptoLine=function(e){var t=e.substr(9).split(" ");return{tag:parseInt(t[0],10),cryptoSuite:t[1],keyParams:t[2],sessionParams:t.slice(3)}},r.writeCryptoLine=function(e){return"a=crypto:"+e.tag+" "+e.cryptoSuite+" "+("object"==typeof e.keyParams?r.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?" "+e.sessionParams.join(" "):"")+"\r\n"},r.parseCryptoKeyParams=function(e){if(0!==e.indexOf("inline:"))return null;var t=e.substr(7).split("|");return{keyMethod:"inline",keySalt:t[0],lifeTime:t[1],mkiValue:t[2]?t[2].split(":")[0]:void 0,mkiLength:t[2]?t[2].split(":")[1]:void 0}},r.writeCryptoKeyParams=function(e){return e.keyMethod+":"+e.keySalt+(e.lifeTime?"|"+e.lifeTime:"")+(e.mkiValue&&e.mkiLength?"|"+e.mkiValue+":"+e.mkiLength:"")},r.getCryptoParameters=function(e,t){return r.matchPrefix(e+t,"a=crypto:").map(r.parseCryptoLine)},r.getIceParameters=function(e,t){var i=r.matchPrefix(e+t,"a=ice-ufrag:")[0],n=r.matchPrefix(e+t,"a=ice-pwd:")[0];return i&&n?{usernameFragment:i.substr(12),password:n.substr(10)}:null},r.writeIceParameters=function(e){return"a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n"},r.parseRtpParameters=function(e){for(var t={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},i=r.splitLines(e)[0].split(" "),n=3;n<i.length;n++){var s=i[n],a=r.matchPrefix(e,"a=rtpmap:"+s+" ")[0];if(a){var o=r.parseRtpMap(a),c=r.matchPrefix(e,"a=fmtp:"+s+" ");switch(o.parameters=c.length?r.parseFmtp(c[0]):{},o.rtcpFeedback=r.matchPrefix(e,"a=rtcp-fb:"+s+" ").map(r.parseRtcpFb),t.codecs.push(o),o.name.toUpperCase()){case"RED":case"ULPFEC":t.fecMechanisms.push(o.name.toUpperCase())}}}return r.matchPrefix(e,"a=extmap:").forEach((function(e){t.headerExtensions.push(r.parseExtmap(e))})),t},r.writeRtpDescription=function(e,t){var i="";i+="m="+e+" ",i+=t.codecs.length>0?"9":"0",i+=" UDP/TLS/RTP/SAVPF ",i+=t.codecs.map((function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType})).join(" ")+"\r\n",i+="c=IN IP4 0.0.0.0\r\n",i+="a=rtcp:9 IN IP4 0.0.0.0\r\n",t.codecs.forEach((function(e){i+=r.writeRtpMap(e),i+=r.writeFmtp(e),i+=r.writeRtcpFb(e)}));var n=0;return t.codecs.forEach((function(e){e.maxptime>n&&(n=e.maxptime)})),n>0&&(i+="a=maxptime:"+n+"\r\n"),i+="a=rtcp-mux\r\n",t.headerExtensions&&t.headerExtensions.forEach((function(e){i+=r.writeExtmap(e)})),i},r.parseRtpEncodingParameters=function(e){var t,i=[],n=r.parseRtpParameters(e),s=-1!==n.fecMechanisms.indexOf("RED"),a=-1!==n.fecMechanisms.indexOf("ULPFEC"),o=r.matchPrefix(e,"a=ssrc:").map((function(e){return r.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute})),c=o.length>0&&o[0].ssrc,u=r.matchPrefix(e,"a=ssrc-group:FID").map((function(e){return e.substr(17).split(" ").map((function(e){return parseInt(e,10)}))}));u.length>0&&u[0].length>1&&u[0][0]===c&&(t=u[0][1]),n.codecs.forEach((function(e){if("RTX"===e.name.toUpperCase()&&e.parameters.apt){var r={ssrc:c,codecPayloadType:parseInt(e.parameters.apt,10)};c&&t&&(r.rtx={ssrc:t}),i.push(r),s&&((r=JSON.parse(JSON.stringify(r))).fec={ssrc:c,mechanism:a?"red+ulpfec":"red"},i.push(r))}})),0===i.length&&c&&i.push({ssrc:c});var d=r.matchPrefix(e,"b=");return d.length&&(d=0===d[0].indexOf("b=TIAS:")?parseInt(d[0].substr(7),10):0===d[0].indexOf("b=AS:")?1e3*parseInt(d[0].substr(5),10)*.95-16e3:void 0,i.forEach((function(e){e.maxBitrate=d}))),i},r.parseRtcpParameters=function(e){var t={},i=r.matchPrefix(e,"a=ssrc:").map((function(e){return r.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute}))[0];i&&(t.cname=i.value,t.ssrc=i.ssrc);var n=r.matchPrefix(e,"a=rtcp-rsize");t.reducedSize=n.length>0,t.compound=0===n.length;var s=r.matchPrefix(e,"a=rtcp-mux");return t.mux=s.length>0,t},r.parseMsid=function(e){var t,i=r.matchPrefix(e,"a=msid:");if(1===i.length)return{stream:(t=i[0].substr(7).split(" "))[0],track:t[1]};var n=r.matchPrefix(e,"a=ssrc:").map((function(e){return r.parseSsrcMedia(e)})).filter((function(e){return"msid"===e.attribute}));return n.length>0?{stream:(t=n[0].value.split(" "))[0],track:t[1]}:void 0},r.parseSctpDescription=function(e){var t,i=r.parseMLine(e),n=r.matchPrefix(e,"a=max-message-size:");n.length>0&&(t=parseInt(n[0].substr(19),10)),isNaN(t)&&(t=65536);var s=r.matchPrefix(e,"a=sctp-port:");if(s.length>0)return{port:parseInt(s[0].substr(12),10),protocol:i.fmt,maxMessageSize:t};if(r.matchPrefix(e,"a=sctpmap:").length>0){var a=r.matchPrefix(e,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(a[0],10),protocol:a[1],maxMessageSize:t}}},r.writeSctpDescription=function(e,t){var i=[];return i="DTLS/SCTP"!==e.protocol?["m="+e.kind+" 9 "+e.protocol+" "+t.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+t.port+"\r\n"]:["m="+e.kind+" 9 "+e.protocol+" "+t.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+t.port+" "+t.protocol+" 65535\r\n"],void 0!==t.maxMessageSize&&i.push("a=max-message-size:"+t.maxMessageSize+"\r\n"),i.join("")},r.generateSessionId=function(){return Math.random().toString().substr(2,21)},r.writeSessionBoilerplate=function(e,t,i){var n=void 0!==t?t:2;return"v=0\r\no="+(i||"thisisadapterortc")+" "+(e||r.generateSessionId())+" "+n+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},r.writeMediaSection=function(e,t,i,n){var s=r.writeRtpDescription(e.kind,t);if(s+=r.writeIceParameters(e.iceGatherer.getLocalParameters()),s+=r.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===i?"actpass":"active"),s+="a=mid:"+e.mid+"\r\n",e.direction?s+="a="+e.direction+"\r\n":e.rtpSender&&e.rtpReceiver?s+="a=sendrecv\r\n":e.rtpSender?s+="a=sendonly\r\n":e.rtpReceiver?s+="a=recvonly\r\n":s+="a=inactive\r\n",e.rtpSender){var a="msid:"+n.id+" "+e.rtpSender.track.id+"\r\n";s+="a="+a,s+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+a,e.sendEncodingParameters[0].rtx&&(s+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+a,s+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return s+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+r.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(s+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+r.localCName+"\r\n"),s},r.getDirection=function(e,t){for(var i=r.splitLines(e),n=0;n<i.length;n++)switch(i[n]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return i[n].substr(2)}return t?r.getDirection(t):"sendrecv"},r.getKind=function(e){return r.splitLines(e)[0].split(" ")[0].substr(2)},r.isRejected=function(e){return"0"===e.split(" ",2)[1]},r.parseMLine=function(e){var t=r.splitLines(e)[0].substr(2).split(" ");return{kind:t[0],port:parseInt(t[1],10),protocol:t[2],fmt:t.slice(3).join(" ")}},r.parseOLine=function(e){var t=r.matchPrefix(e,"o=")[0].substr(2).split(" ");return{username:t[0],sessionId:t[1],sessionVersion:parseInt(t[2],10),netType:t[3],addressType:t[4],address:t[5]}},r.isValidSDP=function(e){if("string"!=typeof e||0===e.length)return!1;for(var t=r.splitLines(e),i=0;i<t.length;i++)if(t[i].length<2||"="!==t[i].charAt(1))return!1;return!0},"object"==typeof t&&(t.exports=r)},{}]},{},[1])(1)},8902:(e,t,i)=>{const{isAndroid:r,isChrome:n}=i(5237);function s(e,t,i){return{sampleRate:e,stereo:t,bitrate:i}}const a={speech_low_quality:s(16e3,!1),speech_standard:s(32e3,!1,18),music_standard:s(48e3,!1),standard_stereo:s(48e3,!0,56),high_quality:s(48e3,!1,128),high_quality_stereo:s(48e3,!0,192)};e.exports={audioTrackInitConfig:function(e){let t={};if(e.AGC&&(t.autoGainControl=e.AGC,n()&&(t.googAutoGainControl=e.AGC,t.googAutoGainControl2=e.AGC)),e.AEC&&(t.echoCancellation=e.AEC),e.ANS&&(t.noiseSuppression=e.ANS,n()&&(t.googNoiseSuppression=e.ANS)),e.encoderConfig){let i=function(e){return"string"==typeof e?Object.assign({},a[e]):e}(e.encoderConfig);t.channelCount=i.stereo?2:1,t.sampleRate=i.sampleRate,t.sampleSize=i.sampleSize}return e.deviceId&&(t.deviceId={exact:e.deviceId}),n()&&2===t.channelCount&&(t.googAutoGainControl=!1,t.googAutoGainControl2=!1,t.echoCancellation=!1,t.googNoiseSuppression=!1),r()&&(t.sampleRate=void 0),t}}},8567:(e,t,i)=>{const r=i(485),{isIOS:n,isSafari:s,isSafariAndMT:a,BrowserDetect:o}=i(5237),{AudioEvent:c}=i(9648),u=i(7247),{waitTime:d}=i(4891),l=window.AudioContext||window.webkitAudioContext;class h extends r{constructor(e){if(super(),this.context=new l,this.outputNode=this.context.createGain(),this.analyserNode=this.context.createAnalyser(),this.analyserNode.smoothingTimeConstant=.4,this.analyserNode.fftSize=2048,e){let t=new MediaStream([e]);this.sourceNode=this.context.createMediaStreamSource(t)}this.connect()}updateTrack(e){this.disconnect();const t=new MediaStream([e]);this.sourceNode=this.context.createMediaStreamSource(t),this.connect()}startGetAudioBuffer(e){this.audioBufferNode||(this.audioBufferNode=this.context.createScriptProcessor(e),this.outputNode.connect(this.audioBufferNode),this.audioBufferNode.connect(this.context.destination),this.audioBufferNode.onaudioprocess=e=>{let t=function(e){let t=e.outputBuffer;for(let e=0;e<t.numberOfChannels;e+=1){let i=t.getChannelData(e);for(let e=0;e<i.length;e+=1)i[e]=0}return e.inputBuffer}(e);this.emit(c.ON_AUDIO_BUFFER,t)})}stopGetAudioBuffer(){this.audioBufferNode&&(this.audioBufferNode.onaudioprocess=null,this.outputNode.disconnect(this.audioBufferNode),this.audioBufferNode=void 0)}createOutputTrack(){if(!o.webAudioMediaStreamDest)throw new Error("[AryaAudio] your browser is not support audio processor");return this.destNode&&this.outputTrack||(this.destNode=this.context.createMediaStreamDestination(),this.outputNode.connect(this.destNode),this.outputTrack=this.destNode.stream.getAudioTracks()[0]),this.outputTrack}play(e){this.isPlayed=!0,this.playNode=e||this.context.destination,this.outputNode.connect(this.playNode)}stop(){if(this.isPlayed)try{this.outputNode.disconnect(this.playNode)}catch(e){}this.isPlayed=!1}getAccurateVolumeLevel(){if(this.context&&(n()||s()?"suspended"===this.context.state&&this.context.resume():"running"!==this.context.state&&this.context.resume()),!this.analyserNode)return 0;let e=new Uint8Array(this.analyserNode.frequencyBinCount);this.analyserNode.getByteFrequencyData(e);let t=0;for(let i=0;i<e.length;i++)t+=64>i?Math.abs(10*e[i]):Math.abs(6*e[i]/15);return t/e.length/255}async checkHasAudioInput(e=0){if(e>5)return this.isNoAudioInput=!0,this.onNoAudioInput&&this.onNoAudioInput(),!1;if(n()||a()?"suspended"===this.context.state&&this.context.resume():"running"!==this.context.state&&this.context.resume(),!this.analyserNode)return!1;let t=new Uint8Array(this.analyserNode.frequencyBinCount);this.analyserNode.getByteFrequencyData(t);let i=!1;for(let e=0;e<t.length;e++)0!==t[e]&&(i=!0);return i?(this.isNoAudioInput=!1,!0):(await d(200),await this.checkHasAudioInput(e?e+1:1)&&i)}getAudioVolume(){return this.outputNode.gain.value}setVolume(e){this.outputNode.gain.setValueAtTime(e,this.context.currentTime)}setMute(e){e?(this.disconnect(),this.audioOutputLevel=0):this.connect()}destroy(){this.disconnect(),this.stop(),this.isDestroyed=!0,this.onNoAudioInput=void 0}disconnect(){this.sourceNode&&this.sourceNode.disconnect(),this.outputNode&&this.outputNode.disconnect()}connect(){this.sourceNode&&this.sourceNode.connect(this.outputNode),this.outputNode.connect(this.analyserNode)}}e.exports={AudioSource:h,AudioBufferSource:class extends h{constructor(e,t={}){super(),this.currentLoopCount=this.pausePlayTime=this.startPlayOffset=this.startPlayTime=0,this._currentState="stopped",this.audioBuffer=e,this.options=t,this.startPlayOffset=this.options.startPlayTime||0}set currentState(e){this._currentState!==e&&(this._currentState=e,this.emit(c.AUDIO_SOURCE_STATE_CHANGE,this._currentState))}get currentState(){return this._currentState}createWebAudioDiagram(){return this.context.createGain()}get duration(){return this.audioBuffer.duration}get currentTime(){return"stopped"===this.currentState?0:"paused"===this.currentState?this.pausePlayTime:(this.context.currentTime-this.startPlayTime+this.startPlayOffset)%this.audioBuffer.duration}updateOptions(e){"stopped"===this.currentState?(this.options=e,this.startPlayOffset=this.options.startPlayTime||0):u.warning("[AudioBufferSource] can not set audio source options")}startProcessAudioBuffer(){this.sourceNode&&this.stopProcessAudioBuffer(),this.sourceNode=this.createSourceNode(),this.startSourceNode(),this.currentState="playing"}pauseProcessAudioBuffer(){this.sourceNode&&"playing"===this.currentState&&(this.pausePlayTime=this.currentTime,this.sourceNode.onended=null,this.sourceNode.stop(),this.sourceNode.buffer=null,this.sourceNode=this.createSourceNode(),this.currentState="paused")}seekAudioBuffer(e){this.sourceNode&&(this.sourceNode.onended=null,"playing"===this.currentState&&this.sourceNode.stop(),this.sourceNode=this.createSourceNode(),"playing"===this.currentState?(this.startPlayOffset=e,this.startSourceNode()):"paused"===this.currentState&&(this.pausePlayTime=e))}resumeProcessAudioBuffer(){"paused"===this.currentState&&this.sourceNode&&(this.startPlayOffset=this.pausePlayTime,this.pausePlayTime=0,this.startSourceNode(),this.currentState="playing")}stopProcessAudioBuffer(){if(this.sourceNode){this.sourceNode.onended=null;try{this.sourceNode.stop()}catch(e){}this.reset()}}startSourceNode(){this.sourceNode&&this.sourceNode.buffer&&(this.sourceNode.start(0,this.startPlayOffset),this.startPlayTime=this.context.currentTime,this.sourceNode.onended=this.handleSourceNodeEnded.bind(this))}createSourceNode(){let e=this.context.createBufferSource();return e.buffer=this.audioBuffer,e.loop=!!this.options.loop,e.connect(this.outputNode),e}handleSourceNodeEnded(){if(this.currentLoopCount+=1,this.options.cycle&&this.options.cycle>this.currentLoopCount)return this.startPlayOffset=0,this.sourceNode=void 0,this.startProcessAudioBuffer();this.reset()}reset(){this.startPlayOffset=this.options.startPlayTime||0,this.currentState="stopped",this.sourceNode&&(this.sourceNode.disconnect(),this.sourceNode=void 0),this.currentLoopCount=0}},createOscillator:function(e,t){let i=1/t,r=new l,n=r.createGain();n.gain.value=0,n.connect(r.destination);let s=!1,a=()=>{if(s)return void(n=null);const t=r.createOscillator();t.onended=a,t.connect(n),t.start(0),t.stop(r.currentTime+i),e(r.currentTime)};return a(),()=>{s=!0}}}},4982:(e,t,i)=>{const r=i(3730),n=i(7247),{waitTime:s,generateId:a}=i(4891),{browserInfo:o}=i(5237);class c{constructor(){this.recordedFrameCount=this.targetFrameRate=0,this.recordingTime=2,this.fps=15,this.enabled=!1}async startRecordBeautyEffectOutput(e,t=4){if(this.recordID)throw new Error("[arya_beauty] another beauty effect recording is in progress");let i=a(6,"");return this.recordID=i,this.targetFrameRate=e,this.recordedFrameCount=0,this.recordingTime=t,await s(1e3*this.recordingTime),this.recordID!==i?(this.recordID=void 0,!0):(this.recordID=void 0,this.recordedFrameCount<this.targetFrameRate*this.recordingTime/2?(n.warning("[arya_beauty] detect beauty effect overload, current framerate",this.recordedFrameCount/2),!1):(n.debug("[arya_beauty] beauty effect current framerate",this.recordedFrameCount/2),!0))}stopRecordBeautyEffectOutput(){this.recordedFrameCount=0,this.targetFrameRate=0,this.recordID=void 0}addFrame(){this.recordID&&(this.recordedFrameCount+=1)}}e.exports=class{constructor(){this.initVideoPostProcessor(),this.overloadDetector=new c,this.lastRenderTime=0,this.config={beauty:.5,brightness:.5,ruddy:.5}}static isSupported(){return r.Processor.isSupported()}initVideoPostProcessor(){this.vpp=new r.Processor({keepAlive:!0,pixelRatioByDevice:!1}),this.vpp.setFilters([r.beauty2]),this.vpp.select("beauty2"),this.vpp.setParams(this.config)}setBeautyParam(e={}){if("{}"===JSON.stringify(e))return;let{beauty:t,brightness:i,ruddy:r}=e;t=t&&Math.min(Math.max(0,t),1),i=i&&Math.min(Math.max(0,i),1),r=r&&Math.min(Math.max(0,r),1);let n={beauty:t,brightness:i,ruddy:r};n=JSON.parse(JSON.stringify(n)),this.config=n,this.vpp.setParams(n)}async generateBeautyTrack(e){this.remove(),this.video=document.createElement("video"),this.canvas=document.createElement("canvas"),this.vpp.attachSource(this.video),this.vpp.attachOutputCanvas(this.canvas);const t=e.getSettings();this.fps=t.frameRate||15,this.vpp.setMediaInfo({fps:this.fps}),this.setRect(t),this.video.srcObject=new MediaStream([e]);var i=new Promise((e=>{const t=()=>{this.video&&this.video.removeEventListener("playing",t),e()};this.video&&this.video.addEventListener("playing",t)}));return this.video.play(),await i,this.enabled=!0,this.startRecord(),this.beautyTrack=this.generateVideoTrackFromCanvasCapture(this.fps),this.beautyTrack}setRect({width:e=640,height:t=480}){this.video.height=t,this.video.width=e,this.canvas.height=t,this.canvas.width=e,this.canvas.style=`visibility: hidden; width: ${e}px; height: ${t}px;`,"Safari"==o.name&&Number(o.version)<14&&document.body.appendChild(this.canvas)}generateVideoTrackFromCanvasCapture(e){return this.canvas.captureStream(e).getVideoTracks()[0]}startRecord(){this.overloadDetector.startRecordBeautyEffectOutput(this.fps).then((e=>{e||this.onOverload&&this.onOverload()}));let e=()=>{this.enabled&&requestAnimationFrame(e);const t=Date.now(),i=1e3/this.fps,r=this.lastRenderTime?t-this.lastRenderTime:i;r>=i&&(this.lastRenderTime=t-(r-i),this.video&&this.video.paused&&this.video.play(),this.overloadDetector.addFrame())};requestAnimationFrame(e)}stopRecord(){this.enabled=!1,this.overloadDetector.stopRecordBeautyEffectOutput()}remove(){this.canvas&&(this.canvas.width=0,this.canvas.height=0,this.canvas.remove(),delete this.canvas),this.video&&(this.video.pause(),this.video.removeAttribute("srcObject"),this.video.removeAttribute("src"),this.video.load(),this.video.width=0,this.video.height=0,this.video.remove(),delete this.video),this.beautyTrack&&this.beautyTrack.stop(),this.stopRecord(),this.vpp.detachSource(),this.vpp.detachOutputCanvas()}destroy(){this.remove(),this.vpp.destroy(),this.vpp=null}}},7247:(e,t,i)=>{const{getLocaltime:r}=i(4891),n=i(3487),{version:s}=i(4147),a=i(2568),o={staging:"https://log-rtc.test.gifshow.com",prod:"https://log-rtc.kuaishou.com"};function c(e){const t=e.filter((e=>!!e)).join("&&");return a(t).toUpperCase()}const u=0,d=1,l=2,h=3,p=Date.now();e.exports=new class{constructor(){this.env="prod",this.httpRequest=new n,this.level=u,this.enableUpload=!0,this.enableDebug=!0,this._init(),console.log(`The KRTC Web SDK version is ${s}`)}setData(e){Object.assign(this,e)}_init(){this.uploadState="collecting",this.uploadLogWaitingList=[],this.uploadLogUploadingList=[],this.currentLogID=0,this.uploadErrorCount=0,this.appId=null,this.uid=null,this.channelId=null,this.logInterval&&clearInterval(this.logInterval),this.logInterval=null}async close(){await this.uploadAllLog(),this._init()}debug(...e){if(this.level<=u){const t=`[V1][${r()}][D][Tid:0][Event][K]`;this.log([`%c${t}`,u,...e]),this.uploadLog("debug",`${t}${e}`)}}info(...e){if(this.level<=d){const t=`[V1][${r()}][I][Tid:0][Event][K]`;this.log([`%c${t}`,d,...e]),this.uploadLog("info",`${t}${e}`)}}warning(...e){if(this.level<=l){const t=`[V1][${r()}][W][Tid:0][Event][K]`;this.log([`%c${t}`,l,...e]),this.uploadLog("warning",`${t}${e}`)}}error(...e){if(this.level<=h){const t=`[V1][${r()}][E][Tid:0][Event][K]`;this.log([`%c${t}`,h,...e]),this.uploadLog("error",`${t}${e}`)}}log(e){if(!this.enableDebug)return;const t=Date.now()-p;if(t<100)return setTimeout((()=>this.log(e)),t);switch(e[1]){case u:e[1]="color: #64B5F6;",console.log.apply(console,e);break;case d:e[1]="color: #1E88E5; font-weight: bold;",console.log.apply(console,e);break;case l:e[1]="color: #FB8C00; font-weight: bold;",console.warn.apply(console,e);break;case h:e[1]="color: #B00020; font-weight: bold;",console.error.apply(console,e)}}appendLogToWaitingList(e,t){this.uploadLogWaitingList.push(t)}startUpload(){"prod"===this.env&&"uploading"!==this.uploadState&&(this.uploadState="uploading",0===this.uploadLogUploadingList.length&&this.uploadLogInterval())}async uploadLogs(){if(!1===navigator.onLine)return;if(!this.appId||!this.uid)return this.uploadLogWaitingList.length=0,void(this.uploadLogUploadingList.length=0);const e=Date.now(),t=c([this.uid,this.channelId]),i=c(["i!believe@kwai#laotie",this.appId,this.uid,t,e,"wefd8g7345kj09dh345r8yn2k3598eu945rh3489"]),r=`${o[this.env]}/log/webReport?app=${this.appId}&user=${this.uid}&device=${t}&timestamp=${e}&sign=${i}`,s=await this.httpRequest.post(r,{msgs:this.uploadLogUploadingList,type:"web"},n.ContentType.Json);if(200!==s.status)throw Error("unexpected upload log response: "+s.message);this.uploadLogUploadingList=[]}uploadLogInterval(){this.logInterval=setInterval((()=>{(this.uploadLogUploadingList.length||this.uploadLogWaitingList.length)&&(0===this.uploadLogUploadingList.length&&(this.uploadLogUploadingList=this.uploadLogWaitingList.splice(0,10)),this.uploadLogs().then((()=>{this.uploadErrorCount=0})).catch((e=>{this.uploadErrorCount+=1,this.uploadErrorCount>2?window.setTimeout((()=>this.uploadLogs()),1e3*Math.pow(2,this.uploadErrorCount)):window.setTimeout((()=>this.uploadLogs()),1e3)})))}),3e3)}async uploadAllLog(){this.uploadLogWaitingList.length&&(this.uploadLogUploadingList=this.uploadLogWaitingList,await this.uploadLogs())}enbaleLogDebug(e){this.enableDebug=e}uploadLog(e,t){this.enableUpload&&this.appendLogToWaitingList(e,t)}setLogLevel(e){this.level=Math.min(Math.max(0,e),4)}enableLogUpload(){this.enableUpload=!0}disableLogUpload(){this.enableUpload=!1,this.uploadLogUploadingList=[],this.uploadLogWaitingList=[]}}},8069:e=>{e.exports=class{constructor(e){this.audioTrack=void 0,this.videoTrack=void 0,this.contentAudioTrack=void 0,this.contentVideoTrack=void 0,this.hasAudio=null,this.hasVideo=null,this.hasContent=!1,this.uid=e}}},1719:(e,t,i)=>{i(5547);const{AryaRTCClient:r}=i(627),n=i(7247),s=i(201),{LocalVideoTrack:a,LocalAudioTrack:o,CameraVideoTrack:c,MicrophoneAudioTrack:u,RemoteAudioTrack:d,RemoteVideoTrack:l,BufferSourceAudioTrack:h}=i(3405),p=i(1749),{AudioBufferSource:f,createOscillator:A}=i(8567),{SourceType:m,DeviceEvent:g,ClientError:T,VideoProfile:v,ScreenProfile:C}=i(9648),{version:E}=i(4147),{checkSystem:S,isSafari:x,isAppleNotSafari:b}=i(5237),{getSupportedCodec:y}=i(4891),_={width:640,height:360,frameRate:15,bitrateMax:500},I={width:1920,height:1080,frameRate:15,bitrateMax:1500};e.exports=new class{constructor(){this.onMicrophoneChanged=null,this.onCameraChanged=null,this.onPlaybackDeviceChanged=null,this.onDefaultSpeakerChanged=null,this.onDefaultMicrophoneChanged=null,this.onCommunicationSpeakerChanged=null,this.onCommunicationMicrophoneChanged=null,this.setDeviceManagerObserver()}setDeviceManagerObserver(){s.on(g.CAMERA_CHANGED,(e=>{this.onCameraChanged&&this.onCameraChanged(e)})),s.on(g.SPEAKED_CHANGED,(e=>{this.onPlaybackDeviceChanged&&this.onPlaybackDeviceChanged(e)})),s.on(g.MICROPHONE_CHANGED,(e=>{this.onMicrophoneChanged&&this.onMicrophoneChanged(e)})),s.on(g.DEFAULT_SPEAKER_CHANGED,(e=>{this.onDefaultSpeakerChanged&&this.onDefaultSpeakerChanged(e)})),s.on(g.DEFAULT_MICROPHONE_CHANGED,(e=>{this.onDefaultMicrophoneChanged&&this.onDefaultMicrophoneChanged(e)})),s.on(g.COMMUNICATION_SPEAKER_CHANGED,(e=>{this.onCommunicationSpeakerChanged&&this.onCommunicationSpeakerChanged(e)})),s.on(g.COMMUNICATION_MIROPHONE_CHANGED,(e=>{this.onCommunicationMicrophoneChanged&&this.onCommunicationMicrophoneChanged(e)}))}createClient(e={}){return new r({...e})}async createCameraVideoTrack(e){try{(e=e||{}).encoderConfig&&"string"==typeof e.encoderConfig&&e.encoderConfig in v?e.encoderConfig=v[e.encoderConfig]:e.encoderConfig=e.encoderConfig||_;let t=await s.createCameraVideoTrack(e);return new c(t,e)}catch(e){throw e}}async createMicrophoneAudioTrack(e){try{e=e||{};let t=await s.createMicrophoneAudioTrack(e);return new u(t,e)}catch(e){throw e}}createCustomAudioTrack(e){if((e=e||{}).mediaStreamTrack instanceof MediaStreamTrack&&"audio"===e.mediaStreamTrack.kind){let t={};return t.encoderConfig=e.encoderConfig,new o(e.mediaStreamTrack,t)}return null}createCustomVideoTrack(e){if((e=e||{}).mediaStreamTrack instanceof MediaStreamTrack&&"video"===e.mediaStreamTrack.kind){let t={};return t.encoderConfig={bitrateMax:e.bitrateMax,bitrateMin:e.bitrateMax},t.optimizationMode=e.optimizationMode,new a(e.mediaStreamTrack,t)}return null}async createMicrophoneAndCameraTracks(e,t){try{(t=t||{}).encoderConfig&&"string"==typeof t.encoderConfig&&t.encoderConfig in v?t.encoderConfig=v[t.encoderConfig]:t.encoderConfig=t.encoderConfig||_,e=e||{};let[i,r]=await s.createMicrophoneAndCameraTracks(e,t);return[new u(i,e),new c(r,t)]}catch(e){throw e}}async createScreenVideoTrack(e,t){try{(e=e||{}).encoderConfig&&"string"==typeof e.encoderConfig&&e.encoderConfig in C?e.encoderConfig=v[e.encoderConfig]:e.encoderConfig=e.encoderConfig||I,e.sourceType=m.CONTENT;let i=await s.createScreenVideoTrack(e,t);if(t){if(2===i.length)return[new o(i[0],{sourceType:m.CONTENT}),new a(i[1],e)];throw n.error(T.NOT_SUPPORT_AUDIO),T.NOT_SUPPORT_AUDIO}return new a(i[0],e)}catch(e){throw e}}async createVideoBufferSourceTrack(e,t){return new Promise(((i,r)=>{let n=document.createElement("video");n.muted=!t,n.setAttribute("playsinline","playsinline"),n.setAttribute("autoplay","autoplay"),n.setAttribute("loop","loop"),n.src=e.Url,n.oncanplay=()=>{if(n.readyState>=3){let r=n.captureStream?n.captureStream():n.mozCaptureStream(),s=null;if(!(r.getVideoTracks().length>0))throw T.CREATE_SOURCE_TRACK_FAILED;s=new a(r.getVideoTracks()[0],e);let c=null;if(t){if(!(r.getAudioTracks().length>0))throw T.CREATE_SOURCE_TRACK_FAILED;c=new o(r.getAudioTracks()[0],{})}return i(t?[c,s]:s)}}}))}async checkAudioTrackIsActive(e,t=5e3){if(!(e instanceof o||e instanceof d))throw new Error("[AryaRTC] the track is not a audio track");t=Math.max(t,1e3);const i=e instanceof o?e.getTrackLabel():"remote_track";let r=e.getVolumeLevel(),s=r,a=r;const c=Date.now();return new Promise((r=>{const o=window.setInterval((()=>{let u=e.getVolumeLevel();s=Math.max(u,s),a=Math.min(u,a);let d=1e-4<s-a,l=Date.now()-c;if(d||l>t){clearInterval(o);const t={duration:l,deviceLabel:i,maxVolumeLevel:s,result:d};n.info(`[track-${e.getTrackId()}"] check audio track active completed. ${JSON.stringify(t)}`),r(d)}}),200)}))}async checkVideoTrackIsActive(e,t=5e3){if(!(e instanceof a||e instanceof l))throw new Error("[AryaRTC] the parameter is not a video track");t=Math.max(t,1e3);const i=e instanceof a?e.getTrackLabel():"remote_track",r=e.mediaTrack,s=document.createElement("video");s.style.width="1px",s.style.height="1px",s.setAttribute("muted",""),s.muted=!0,s.setAttribute("playsinline",""),s.controls=!1,(x()||b())&&(s.style.opacity="0.01",s.style.position="fixed",s.style.left="0",s.style.top="0",document.body.appendChild(s)),s.srcObject=new MediaStream([r]),s.play();const o=document.createElement("canvas");o.width=160,o.height=120;let c=0,u=0;try{const e=Date.now();u=await function(e,t,i,r){let s,a=0,o=null;return new Promise(((r,c)=>{setTimeout((()=>{s&&(s(),r(a))}),t),s=A((()=>{a>4&&s&&(s(),r(a));let t=i.getContext("2d");if(t){t.drawImage(e,0,0,160,120);let r=t.getImageData(0,0,i.width,i.height),n=Math.floor(r.data.length/3);if(o)for(let e=0;e<n;e+=3)if(r.data[e]!==o[e]){a+=1,o=r.data;break}o=r.data}else{const e=new Error("[AryaRTC] can not get canvas 2d context.");n.error("[AryaRTC] can not get canvas 2d context."),c(e)}}),30)}))}(s,t,o),c=Date.now()-e}catch(e){throw e}x()&&(s.pause(),s.remove()),s.srcObject=null;let d=4<u;const h={duration:c,changedPicNum:u,deviceLabel:i,result:d};return n.info(`[track-${e.getTrackId()}"] check audio video active completed. ${JSON.stringify(h)}`),d}async createBufferSourceAudioTrack(e){n.info("[AryaRTC] start create buffer source audio track with config",JSON.stringify(e));const t=e.source;if(!(t instanceof f))try{e.source=await p(t,e.cacheOnlineFile)}catch(e){throw e}const i=new f(e.source);let r={};r.encoderConfig=e.encoderConfig;let s=new h(t,i,r);return n.info("[AryaRTC] create buffer source audio track success"),s}getDevices(e){return s.getDevices(e)}getCameras(e){return s.getCameras(e)}getMicrophones(e){return s.getMicrophones(e)}getPlaybackDevices(e){return s.getPlaybackDevices(e)}async getSupportedCodec(e){return y(e)}checkSystemRequirements(){return S()}enbaleLogDebug(e){n.enbaleLogDebug(e)}disableLogUpload(){n.disableLogUpload()}enableLogUpload(){n.enableLogUpload()}setLogLevel(e){n.setLogLevel(e)}get VERSION(){return E}}},627:(e,t,i)=>{const r=i(4312),n=i(485),s=i(8069),{LocalVideoTrack:a,LocalAudioTrack:o,RemoteVideoTrack:c,RemoteAudioTrack:u,RemoteActiveAudioTrack:d}=i(3405),{sendAudioStats:l,sendVideoStats:h,recAudioStats:p,recVideoStats:f}=i(220),A=i(3487),m=i(2951),g=i(7247),T=i(417),{PeerConnectionClient:v}=i(1584),{ClientEvent:C,SignalConnectionState:E,SignalDisconnectedReason:S,MediaType:x,SourceType:b,SimulcastLayer:y,ClientError:_,ClientRole:I,PeerConnectionState:R,PeerEvent:w,PeerType:P,TrackInternalEvent:D,PublishContentState:k,SignalHandlerEvent:O,DeviceEvent:M,ActionEventId:B,ActionEventResult:U,PublishEvent:N,ContentKickedOffReason:L}=i(9648),{RtcAction:F,PublishInfo:V,SubscribeInfo:H,AryaRTCUser:j}=i(9516),G=i(9036),z=i(201),q=i(297),{getSupportedCodec:Y}=i(4891),K="https://api-rtc.yximgs.com/task";e.exports={AryaRTCClient:class extends n{constructor(e){super(),this.role=I.ANCHOR,this.appId="",this.token="",this.uid="",this.sdkVersion="",this.channel="",this.callId="",this.servers=null,this.remoteUsers=new Map,this.localUser=null,this.wssUrl=null,this.httpRequest=new A,this.curConnectionState=E.DISCONNECTED,this.rtcAction=new F,this.isReJoin=!1,this.isLeave=!0,this.nginxUrl=K,this.role=void 0,this.isJoined=!1,this.attemptJoinTimerId=null,this.curShareContentUser=null,this.isDualStreamEnabled=!1,this.lowStreamParam={width:320,height:180,frameRate:8,bitrateMax:100},this.waitRemoteUserStateUpdate=!1,this.publishContentState=null,this.signalHandler=null,this.onLine=null,this.initEventHandler(),this.setDeviceManagerObserver(),m.report({eventId:B.INIT_SDK}),this.config=e||{},this.enableActiveTrack=e.enableActiveTrack||!1,this.deviceId=e.deviceId,this._leaveMutex=new q("leaveMutex"),this._contentMutex=new q("contentMutex")}setClientRole(e){if(g.info(`[AryaRTCClient] setClientRole role:${e}`),void 0!==this.role&&this.isJoined){if(this.role!==e)return e===I.AUDIENCE&&this.checkIfPublish()?Promise.reject(_.AUDIENCE_NOT_ALLOW_PUBLISH):(this.role=e,this.setClientRole_(e))}else this.role=e,m.report({eventId:B.SWITCH_CLIENT_ROLE,param:{role:e===I.ANCHOR?1:2}});return Promise.resolve()}async join(e,t,i,r){if(g.info("[AryaRTCClient] join"),this._leaveMutex.lock(),this.curConnectionState!==E.DISCONNECTED)throw g.warning("[AryaRTCClient] join repeated"),this._leaveMutex.unlock(),_.REPEATED_JOIN;if(!this.checkUserId(r))return Promise.reject(_.INVALID_USER);if(!this.checkChannelId(t))return Promise.reject(_.INVALID_CHANNEL);g.setData({appId:e,channelId:t,uid:r}),this.appId=e,this.channel=t,this.token=i,this.uid=r,this.connectionStateTransiteToNewState(E.CONNECTING,S.UNDEFINED),this.isLeave=!1,this.localUser=new j(r),m.start(),m.setData({appId:e,channelId:t,uid:r,localUser:this.localUser,remoteUsers:this.remoteUsers}),m.report({eventId:B.JOIN_CHANNEL});try{await this.joinInternal()}catch(e){throw g.warning(`[AryaRTCClient] join failed error:${e}`),this._leaveMutex.unlock(),_.JOIN_FAILED}this._leaveMutex.unlock()}async leave(){if(g.info("[AryaRTCClient] leave"),this._leaveMutex.lock(),this.curConnectionState===E.DISCONNECTED)return g.warning("[AryaRTCClient] leave user has leaved"),void this._leaveMutex.unlock();let e;m.report({eventId:B.LEAVE_CHANNEL}),window.onbeforeunload=null,this.role=void 0,this.isJoined=!1,g.info(`[AryaRTCClient] leave user:${this.uid} channel:${this.channel}`);try{this.isLeave=!0,this.connectionStateTransiteToNewState(E.DISCONNECTING,void 0);let t=await this.signalHandler.sendLeaveSignal(this.channel,!1);t&&t.body.action===r.Action.kLeave&&2e3===t.body.code?(g.info("[AryaRTCClient] leave success"),e=Promise.resolve(),m.report({eventId:B.LEAVE_CHANNEL_CALLBACK})):(g.error(`[AryaRTCClient] leave failed because gateway fail to leave with code:${code}`),e=Promise.reject(_.GATEWAY_LEAVE_ERROR),m.report({eventId:B.LEAVE_CHANNEL_CALLBACK,result:U.FAIL,reason:`leave failed because gateway fail to leave with code:${code}`}))}catch(t){g.error(`[AryaRTCClient] leave failed with error:${t}`),e=Promise.reject(_.SEND_SIGNAL_ERROR),m.report({eventId:B.LEAVE_CHANNEL_CALLBACK,result:U.FAIL,reason:`leave failed with error:${t}`})}return this.connectionStateTransiteToNewState(E.DISCONNECTED,S.LEAVE),this.close(),this._leaveMutex.unlock(),e}async publish(e){if(g.info("[AryaRTCClient] publish"),null===this.localUser)throw g.error("[AryaRTCClient] publish local user is not in channel"),_.LOCAL_USER_NOT_IN_CHANNEL;if(this.role===I.AUDIENCE)throw g.error("[AryaRTCClient] publish is not allowed when role is the audience"),_.INVALID_OPERATION;let t=Array.isArray(e)?e:[e];if(!this.isLegalTrack(t))throw _.INVALID_LOCAL_TRACK;if(this.checkIfTracksDisabled(t))throw g.warning("[AryaRTCClient] publish track is disabled"),_.TRACK_DISABLED;let i=this.checkAndGetTracksSourceType(t);if(null===i)throw _.TRACK_SOURCE_TYPE_CONFLICT;let r=this.getOrCreatePublishInfo(i,!0);if(this.checkIfTracksPublished(t,r))throw g.warning("[AryaRTCClient] publish track have already been published"),_.TRACK_ALREADY_PUBLISHED;await r.mutex.lock();let n=!1;for(let e of t)try{await this.enablePublishTrack(e,r)&&(n=!0),e instanceof a&&m.report({eventId:B.PUBLISH_VIDEO_STREAM})}catch(t){throw g.error("[AryaRTCClient] publish fail to enable publish track"),e instanceof a&&m.report({eventId:B.PUBLISH_VIDEO_STREAM,result:U.FAIL,reason:`publish fail to enable publish track :${t}`}),r.mutex.unlock(),_.ENABLE_TRACK_FAILED}if(n)try{r.iceRestart=!1,await this.sendPublishSignal(r)}catch(e){throw g.error(`[AryaRTCClient] publish fail to send publish signal because of error:${e}`),r.mutex.unlock(),_.SEND_OFFER_FAILED}else r.enableAudio[1]?r.enableVideo[1]||this.sendVideoMuteState(this.localUser.user,!1,r.sourceType):this.sendAudioMuteState(this.localUser.user,!1,r.sourceType);r.mutex.unlock()}async unpublish(e){if(g.info("[AryaRTCClient] unpublish"),null===this.localUser)return g.error("[AryaRTCClient] unpublish local user is not in channel"),Promise.reject(_.LOCAL_USER_NOT_IN_CHANNEL);let t=Array.isArray(e)?e:[e];if(!this.isLegalTrack(t))return Promise.reject(_.INVALID_LOCAL_TRACK);let i=this.checkAndGetTracksSourceType(t);if(null===i)return Promise.reject(_.TRACK_SOURCE_TYPE_CONFLICT);let r=this.getOrCreatePublishInfo(i,!1);if(void 0===r)return g.error("[AryaRTCClient] unpublish peer is not exist"),Promise.reject(_.INVALID_OPERATION);if(await r.mutex.lock(),this.checkIfTracksUnpublished(t,r))return g.warning("[AryaRTCClient] unpublish tracks have not been published"),r.mutex.unlock(),Promise.reject(_.TRACK_NOT_PUBLISHED);if(t.forEach((e=>{this.disablePublishTrack(e,r),e instanceof a&&m.report({eventId:B.DISABLE_VIDEO_TX})})),g.info(`[AryaRTCClient] unpublish video:${r.enableVideo[0]} audio:${r.enableAudio[0]}`),r.enableVideo[0]||r.enableAudio[0])if(r.enableAudio[1]){if(r.enableVideo[1])return g.warning("[AryaRTCClient] unpublish tracks have not been published"),r.mutex.unlock(),Promise.reject(_.TRACK_NOT_PUBLISHED);this.sendVideoMuteState(this.localUser.user,!0,r.sourceType)}else this.sendAudioMuteState(this.localUser.user,!0,r.sourceType);else this.sendUnpublishSignal(r);return r.mutex.unlock(),Promise.resolve()}subscribe(e,t){if(g.info("[AryaRTCClient] subscribe"),!this.localUser)return g.error("[AryaRTCClient] subscribe local user is not in channel"),Promise.reject(_.LOCAL_USER_NOT_IN_CHANNEL);if(null===e||!(e instanceof s))return g.error("[AryaRTCClient] subscribe remote user is invaild"),Promise.reject(_.INVALID_REMOTE_USER);if(t!==x.AUDIO&&t!==x.VIDEO)return g.error("[AryaRTCClient] subscribe mediaType is invaild"),Promise.reject(_.INVALID_MEDIA_TYPE);let i=this.remoteUsers.get(e.uid);return void 0===i||e!==i.user?(g.error(`[AryaRTCClient] subscribe user:${e.uid} is not in channel`),Promise.reject(_.REMOTE_USER_NOT_IN_CHANNEL)):!e.hasAudio&&t===x.AUDIO||!e.hasVideo&&t===x.VIDEO?(g.error(`[AryaRTCClient] subscribe user:${e.uid} ${t} is not published`),Promise.reject(_.TRACK_NOT_PUBLISHED)):this.subscribeInternal(i,b.PEOPLE,t)}unsubscribe(e,t){if(g.info("[AryaRTCClient] unsubscribe"),null===e||!(e instanceof s))return g.error("[AryaRTCClient] unsubscribe user is invaild"),Promise.reject(_.INVALID_REMOTE_USER);let i=this.remoteUsers.get(e.uid);return void 0===i||e!==i.user?(g.error(`[AryaRTCClient] unsubscribe user:${e.uid} is not in channel`),Promise.reject(_.REMOTE_USER_NOT_IN_CHANNEL)):this.unsubscribeInternal(i,b.PEOPLE,t)}async enableDualStream(){if(g.info("[AryaRTCClient] enableDualStream"),this.isDualStreamEnabled)throw g.error("[AryaRTCClient] enableDualStream dual stream is already enabled"),_.INVALID_OPERATION;this.isDualStreamEnabled=!0;let e=this.getOrCreatePublishInfo(b.PEOPLE,!1);if(e&&e.publish[0]&&e.publish[1])try{await this.publishLowVideoStream(e),m.report({eventId:B.ENABLE_DUAL_STREAM_MODE})}catch(e){throw m.report({eventId:B.ENABLE_DUAL_STREAM_MODE,result:U.FAIL,reason:JSON.stringify(e)}),_.PUBLISH_LOW_STREAM_FAILED}}async disableDualStream(){if(g.info("[AryaRTCClient] disableDualStream"),m.report({eventId:B.DISABLE_DUAL_STREAM_MODE}),!this.isDualStreamEnabled)return g.error("[AryaRTCClient] enableDualStream dual stream is already disabled"),Promise.reject(_.INVALID_OPERATION);this.isDualStreamEnabled=!1;let e=this.getOrCreatePublishInfo(b.PEOPLE,!1);return e&&e.publishLowStream[0]&&this.sendUnpublishLowVideoStreamSignal(e),Promise.resolve()}setLowStreamParameter(e){if(!e||!e.width&&e.height||e.width&&!e.height)throw g.error("[AryaRTCClient] setLowStreamParameter the width and height must be set meanwhile"),_.INVALID_PARAMS;this.lowStreamParam=e}async setRemoteVideoStreamType(e,t){g.info(`[AryaRTCClient] setRemoteVideoStreamType uid:${e} streamType:${t}`);let i=this.remoteUsers.get(e);if(void 0===i)throw g.error("[AryaRTCClient] setRemoteVideoStreamType user is not in channel"),_.REMOTE_USER_NOT_IN_CHANNEL;if(t!==i.streamType){let r=this.getOrCreateSubscribeInfo(i,b.PEOPLE,!1);if(void 0!==r&&r.enableVideo[0])try{await this.sendSwitchStreamTypeSignal(e,t)}catch(e){throw e}i.streamType=t}}setStreamFallbackOption(e,t){}async setLiveTranscoding(e){try{let t=await this.signalHandler.sendSetLiveTranscodingSignal(e,!1);if(2e3!==t.body.code)throw g.error(`[AryaRTCClient] setLiveTranscoding invalid response code:${t.body.code}`),_.INVALID_RESPONSE;this.liveTranscoding=e}catch(e){throw g.error("[AryaRTCClient] setLiveTranscoding fail to send signal"),_.SEND_SIGNAL_ERROR}}async startLiveStreaming(e,t){try{let i=await this.signalHandler.sendStartLiveStreamingSignal(e,t,!1);if(2e3!==i.body.code)throw g.error(`[AryaRTCClient] startLiveStreaming invalid response code:${i.body.code}`),_.INVALID_RESPONSE}catch(e){throw g.error("[AryaRTCClient] startLiveStreaming fail to send signal"),_.SEND_SIGNAL_ERROR}}async stopLiveStreaming(e){try{let t=await this.signalHandler.sendStopLiveStreamingSignal(e,!1);if(2e3!==t.body.code)throw g.error(`[AryaRTCClient] stopLiveStream invalid response code:${t.body.code}`),_.INVALID_RESPONSE}catch(e){throw g.error("[AryaRTCClient] startLiveStreaming fail to send signal"),_.SEND_SIGNAL_ERROR}}async sendSwitchStreamTypeSignal(e,t){g.info(`[AryaRTCClient] sendSwitchStreamTypeSignal uid:${e} streamType:${t}`),m.report({eventId:B.SET_REMOTE_USER_STREAM_TYPE,param:{stream_type:Number("low"===t),user_id:e}});try{let i=await this.signalHandler.sendSwitchStreamTypeSignal(e,t,!1);if(2e3!==i.body.code)throw g.error(`[AryaRTCClient] sendSwitchStreamTypeSignal fail to send signal of switching stream type code:${i.body.code}`),m.report({eventId:B.SET_REMOTE_USER_STREAM_TYPE,result:U.FAIL,reason:`sendSwitchStreamTypeSignal fail to send signal of switching stream type code:${i.body.code}`,param:{stream_type:Number("low"===t),user_id:e}}),_.INVALID_RESPONSE;this.emit(C.STREAM_TYPE_CHANGED,e,t)}catch(e){throw _.SEND_SIGNAL_ERROR}}sendAudioMuteState(e,t,i){g.info(`[AryaRTCClient] sendAudioMuteState uid:${e} isMute:${t} sourceType:${i}`),this.signalHandler.sendAudioMuteStateSignal(e,t,i,!1,!0),e===this.localUser.user?(m.report({eventId:t?B.MUTE_LOCAL_AUDIO_STREAM:B.UNMUTE_LOCAL_AUDIO_STREAM,param:{uid:e,sourceType:i}}),m.report({eventId:B.MUTE_MICROPHONE,param:{mute:t}})):(m.report({eventId:t?B.MUTE_REMOTE_AUDIO_STREAM:B.UNMUTE_REMOTE_AUDIO_STREAM,param:{participants:[{user_id:e,source_type:i}]}}),m.report({eventId:t?B.REMOTE_MIC_MUTE:B.REMOTE_MIC_UNMUTE,param:{remote_user_id:e}}))}sendVideoMuteState(e,t,i){g.info(`[AryaRTCClient] sendVideoMuteState uid:${e} isMute:${t} sourceType:${i}`),this.signalHandler.sendVideoMuteStateSignal(e,t,i,!1,!0),e===this.localUser.user?m.report({eventId:t?B.DISABLE_VIDEO_TX:B.ENABLE_VIDEO_TX,param:{uid:e,sourceType:i}}):(m.report({eventId:t?B.MUTE_REMOTE_VIDEO_STREAM:B.UNMUTE_REMOTE_VIDEO_STREAM,param:{participants:[{user_id:e,source_type:i}]}}),m.report({eventId:t?B.REMOTE_VIDEO_MUTE:B.REMOTE_VIDEO_UNMUTE,param:{remote_user_id:e}}))}async sendPublishSignal(e){g.info(`[AryaRTCClient] sendPublishSignal video:${e.enableVideo[0]} audio:${e.enableAudio[0]}, sourceType:${e.sourceType}`);let t=e.iceRestart?{iceRestart:!0}:{},i=e.peer.getLocalSdp(),r=await e.peer.createOffer(t);if("H264"===(this.config.codec||"H264")&&(r=T.setSpsPpsIdrInkeyFrame(r,{codec:"H264/90000"})),r=T.writeRtcpFb(r,"rrtr"),i&&(r=T.replaceSSrcWithLastSdp(i,r)),e.publish=[!0,!1],await e.peer.setOfferSdp(r),e.enableVideo[1]=!0,e.enableAudio[1]=!0,e.sourceType===b.CONTENT){this.publishContentState=k.WAIT_PUBLISH_RESPONSE;let t=await this.signalHandler.sendPublishSignal(e.enableVideo[0],e.enableAudio[0],r,e.sourceType,y.HIGHSTREAM,!1);if(t&&2e3===t.body.code)try{await this.handlePublishAction(b.CONTENT,y.HIGHSTREAM,t.body.sdp),this.publishContentState=k.PENDING_PUBLISH_CONTENT}catch(e){throw g.error(`[AryaRTCClient] sendPublishSignal fail to handle response because of error:${e}`),_.INVALID_RESPONSE}else{let e=t&&t.body?t.body.code:void 0;g.error(`[AryaRTCClient] sendPublishSignal fail to publish content with code:${e}`)}}else this.signalHandler.sendPublishSignal(e.enableVideo[0],e.enableAudio[0],r,e.sourceType,y.HIGHSTREAM,!0)}async sendPublishLowVideoStreamSignal(e){try{e.publishLowStream=[!0,!1];let t=e.iceRestart?{iceRestart:!0}:{},i=e.lowStreamPeer.getLocalSdp(),r=await e.lowStreamPeer.createOffer(t);"H264"===(this.config.codec||"H264")&&(r=T.setSpsPpsIdrInkeyFrame(r,{codec:"H264/90000"})),r=T.writeRtcpFb(r,"rrtr"),i&&(r=T.replaceSSrcWithLastSdp(i,r)),await e.lowStreamPeer.setOfferSdp(r),this.signalHandler.sendPublishSignal(!0,!1,r,e.sourceType,y.LOWSTREAM,!0)}catch(e){g.error(`[AryaRTCClient] sendPublishLowVideoStreamSignal fail to set offer because of error:${e}`)}}sendUnpublishSignal(e){g.info(`[AryaRTCClient] sendUnpublishSignal video:${e.enableVideo[0]} audio:${e.enableAudio[0]} sourceType:${e.sourceType}`),(e.enableAudio[0]||e.enableVideo[0])&&g.error("[AryaRTCClient] sendUnpublishSignal media status is wrong"),e.enableVideo[1]=!0,e.enableAudio[1]=!0,e.publish=[!1,!1],this.signalHandler.sendUnpublishSignal(!0,!0,e.sourceType,y.HIGHSTREAM,!0),e.peer&&(e.peer.close(),e.peer.off(w.CONNECTION_STATE,this.onconnectionstatechange),e.peer=null),e.sourceType===b.CONTENT&&(this.publishContentState=null)}sendUnpublishLowVideoStreamSignal(e){g.info("[AryaRTCClient] sendUnpublishLowVideoStreamSignal"),!e.publishLowStream[0]&&e[1]||(e.publishLowStream=[!1,!1],this.signalHandler.sendUnpublishSignal(!0,!1,e.sourceType,y.LOWSTREAM,!0),e.lowStreamPeer&&(e.lowStreamPeer.close(),e.lowStreamPeer.off(w.CONNECTION_STATE,this.onconnectionstatechange),e.lowStreamPeer=null,e.lowStreamVideoTrack&&e.lowStreamVideoTrack.stop(),e.lowStreamVideoTrack=null))}async sendSubscribeSignal(e,t){let i=t.iceRestart?{iceRestart:!0}:{},r=t.enableAudio[0],n=t.enableVideo[0],s=await t.peer.createOffer(i);this.config.codec;s=T.writeRtcpFb(s,"rrtr"),await t.peer.setOfferSdp(s),this.signalHandler.sendSubscribeSignal(e,s,n,r,t.sourceType,!0)}sendUnsubscribeSignal(e,t,i){t.enableAudio[1]=!0,t.enableVideo[1]=!0,t.subscribe=[!1,!1],this.signalHandler.sendUnsubscribeSignal(e,i,!0),t.peer.close(),t.peer.off(w.CONNECTION_STATE,this.onconnectionstatechange),t.peer=null}async setClientRole_(e){try{let t=await this.signalHandler.sendSetRoleSignal(e,!1);if(!t||!t.body||2e3!==t.body.code)throw m.report({eventId:B.SWITCH_CLIENT_ROLE,result:U.FAIL,reason:`${JSON.stringify(t)}`,param:{role:e===I.ANCHOR?1:2}}),_.SET_ROLE_FALIED;m.report({eventId:B.SWITCH_CLIENT_ROLE,param:{role:e===I.ANCHOR?1:2}}),g.info(`[AryaRTCClient] setClientRole role:${e} success`)}catch(t){throw m.report({eventId:B.SWITCH_CLIENT_ROLE,result:U.FAIL,reason:`setClientRole fail to set role error:${t}`,param:{role:e===I.ANCHOR?1:2}}),g.error(`[AryaRTCClient] setClientRole fail to set role error:${t}`),_.SEND_SIGNAL_ERROR}}handleDisableLocalTrackEvent_(e,t,i){g.info(`[AryaRTCClient] onDisableLocalTrack mediaType:${t} sourceType:${i}`);let r=this.getOrCreatePublishInfo(i,!1);if(null!==this.localUser&&r&&r.peer){try{r.peer.removeTrack(e)}catch(e){return void g.warning("[AryaRTCClient] onDisableLocalTrack track have not been published")}t===x.AUDIO?(r.enableAudio=[!1,!1],this.sendAudioMuteState(this.localUser.user,!0,i)):t===x.VIDEO&&(r.enableVideo=[!1,!1],this.sendVideoMuteState(this.localUser.user,!0,i),this.isDualStreamEnabled&&i===b.PEOPLE&&this.sendUnpublishLowVideoStreamSignal(r),m.report({eventId:B.UNPUBLISH_VIDEO_STREAM}))}else g.warning("[AryaRTCClient] onDisableLocalTrack track have not been published")}async handleEnableLocalTrackEvent_(e,t,i){g.info(`[AryaRTCClient] handleEnableLocalTrackEvent mediaType:${t} sourceType:${i}`);let r=this.getOrCreatePublishInfo(i,!1);if(null!==this.localUser&&r&&r.peer){try{await r.peer.addTrack(e)}catch(e){g.warning("[AryaRTCClient] handleEnableLocalTrackEvent track have been added")}t===x.AUDIO?(r.enableAudio=[!0,!1],r.peer.supportUnifiedPlan?this.sendAudioMuteState(this.localUser.user,!1,i):(r.iceRestart=!1,this.sendPublishSignal(r))):(r.enableVideo=[!0,!1],r.peer.supportUnifiedPlan?this.sendVideoMuteState(this.localUser.user,!1,i):(r.iceRestart=!1,this.sendPublishSignal(r)),this.isDualStreamEnabled&&i===b.PEOPLE&&this.isDualStreamEnabled&&this.publishLowVideoStream(r))}else g.warning("[AryaRTCClient] handleEnableLocalTrackEvent track have not been published")}async handleReplaceLocalTrackEvent_(e,t,i){g.info(`[AryaRTCClient] onReplaceLocalTrack mediaType:${t} sourceType:${i}`);let r=this.getOrCreatePublishInfo(i,!1);if(null!==this.localUser&&r&&r.peer)try{r.peer.replaceTrack(e),r.peer.supportReplaceTrack||(r.iceRestart=!1,this.sendPublishSignal(r)),t===x.VIDEO&&r.lowStreamPeer&&(r.lowStreamVideoTrack=await r.videoTrack.clone(this.lowStreamParam),r.lowStreamPeer.replaceTrack(r.lowStreamVideoTrack),r.lowStreamPeer.supportReplaceTrack||(r.iceRestart=!1,this.sendPublishLowVideoStreamSignal(r)))}catch(e){g.warning(`[AryaRTCClient] onReplaceLocalTrack replace track error:${e}`)}else g.info("[AryaRTCClient] onReplaceLocalTrack track have not been published")}connectionStateTransiteToNewState(e,t){if(g.info(`[AryaRTCClient] connectionStateTransiteToNewState state:${e} reason:${t} rejoin:${this.isReJoin}`),this.isReJoin&&e!==E.CONNECTED)return!1;if(g.info(`[AryaRTCClient] connectionStateTransiteToNewState ${this.curConnectionState} transite to ${e}`),e===this.curConnectionState)return!1;let i=this.curConnectionState,r=!1;return this.curConnectionState===E.DISCONNECTED?r=e===E.CONNECTING:this.curConnectionState===E.CONNECTING?r=e===E.CONNECTED||e===E.DISCONNECTING:this.curConnectionState===E.CONNECTED?r=e===E.DISCONNECTING||e===E.RECONNECTING||e===E.DISCONNECTED:this.curConnectionState===E.DISCONNECTING?r=e===E.DISCONNECTED:this.curConnectionState===E.RECONNECTING&&(r=e===E.CONNECTED||e===E.DISCONNECTING),!!r&&(this.curConnectionState=e,i===E.RECONNECTING&&e===E.CONNECTED&&(this.rtcAction.clear(),this.isReJoin||(this.waitRemoteUserStateUpdate=!0,this.reconnectMedia())),this.emit(C.CONNECTION_STATE_CHANGE,this.curConnectionState,i,t),!0)}joinInternal(){if(this.isReJoin&&this.isLeave)return Promise.reject("REJOIN_FAILED");const e={createRequest:{workerName:"webrtc_proxy",jsonData:`{"uid": "${this.uid}"}`}};return new Promise(((t,i)=>{let r=()=>{m.report({eventId:B.SECHEDU_SERVICE_REQ}),this.httpRequest.post(this.nginxUrl,e,A.ContentType.Plain).then((n=>{m.report({eventId:B.SECHEDU_SERVICE_RES,param:{uid:this.uid}}),g.info(`[AryaRTCClient] join userId:${this.uid} channel:${this.channel} request:${JSON.stringify(e)} response:${JSON.stringify(n)}`);let s=JSON.parse(n.createdReport.jsonData);this.wssUrl=`wss://${s.domain}?ip=${s.ip}&port=${s.port}&uid=${this.uid}`,g.setData({appId:this.appId,channelId:this.channel,uid:this.uid}),g.info(`[AryaRTCClient] join wssUrl:${this.wssUrl}`),setTimeout((()=>g.startUpload()),5e3),this.createSignalHandler(),this.signalHandler.connnect(this.wssUrl).then((async()=>{g.info("[AryaRTCClient] join signal open success"),m.report({eventId:B.SIGNAL_RES});try{void 0===this.role?await this.setClientRole(I.ANCHOR):await this.setClientRole_(this.role),void 0===this.supportH264&&await this._isSupportH264();let e=await this.signalHandler.sendJoinSignal(this.channel,this.role,this.token,this.supportH264,!1);if(e&&e.body&&2e3===e.body.code)this.isJoined=!0,window.ononline=()=>{g.info(`[AryaRTCClient] join online ${navigator.onLine}`),this.onLine=!0},window.onoffline=()=>{g.info(`[AryaRTCClient] join offline ${navigator.onLine}`),this.onLine=!1},m.setData({callId:e.body.callId,clientAddress:e.clientAddress,serverList:n.createdReport.jsonData,serverAddress:`${s.ip}:${s.port}`,connectInfo:JSON.stringify({ws_servers:this.wssUrl,addr:`${s.ip}:${s.port}`})}),m.report({eventId:B.JOIN_CHANNEL_CALLBACK}),t(this.uid),this.enableActiveTrack&&await this.subscribeActiveAudio();else{let t=e&&e.body?e.body.code:void 0;g.error(`[AryaRTCClient] join fail because gateway fail to join with code:${t}`),this.handleJoinTimeout(i,_.GATEWAY_JOIN_ERROR,r),m.report({eventId:B.JOIN_CHANNEL_CALLBACK,result:U.FAIL,reason:`join fail because gateway fail to join with code:${t}`})}}catch(e){g.error(`[AryaRTCClient] join fail to send signal because of error:${e}`),this.handleJoinTimeout(i,_.SEND_SIGNAL_ERROR,r)}})).catch((e=>{g.error(`[AryaRTCClient] join websocket fail to open because of error:${e}`),this.handleJoinTimeout(i,e,r),m.report({eventId:B.SIGNAL_RES,param:{uid:this.uid},result:U.FAIL,reason:`join websocket fail to open because of error:${e}`})}))})).catch((e=>{g.error(`[AryaRTCClient] join fail to fetch spawner because of error:${e}`),this.handleJoinTimeout(i,_.FETCH_SPAWNER_ERROR,r),m.report({eventId:B.SECHEDU_SERVICE,result:U.FAIL,reason:`join fail to fetch spawner because of error:${e}`})}))};r()}))}handleSignalStateEvent_(e,t){return this.connectionStateTransiteToNewState(e,t)}handleSignalReconnectFailedEvent_(){g.info("[AryaRTCClient] handleSignalReconnectFailedEvent"),this.isLeave||(this.rejoin(),m.report({eventId:B.SIGNAL_RECONNECT_RES,result:U.FAIL}))}reconnectMedia(){g.info("[AryaRTCClient] reconnectMedia"),this.reconnectPublishMedia(b.PEOPLE),this.reconnectSubscribeMedia()}async rejoin(){if(g.info("[AryaRTCClient] rejoin"),!this.isReJoin)try{this.isReJoin=!0,await this.joinInternal(),g.info("[AryaRTCClient] rejoin success"),this.closeLocalContent(),await this.recreateMediaConnection(),this.reconnectMedia(),this.isReJoin=!1,m.start(),m.setData({appId:this.appId,channelId:this.channel,uid:this.uid,localUser:this.localUser,remoteUsers:this.remoteUsers}),m.report({eventId:B.REJOIN_CHANNEL})}catch(e){g.error(`[AryaRTCClient] fail to rejoin because of error:${e}`),this.isReJoin=!1,setTimeout((()=>{this.rejoin()}),2e3),m.report({eventId:B.REJOIN_CHANNEL,result:U.FAIL,reason:`fail to rejoin because of error:${e}`})}}async subscribeInternal(e,t,i){let r=this.getOrCreateSubscribeInfo(e,t,!0);if(await r.mutex.lock(),i===x.AUDIO){if(r.enableAudio[0])return g.error(`[AryaRTCClient] subscribeInternal user:${e.user.uid} audio of ${t} has already subscribed`),Promise.reject(_.TRACK_ALREADY_SUBSCRIBED);r.enableAudio=[!0,!0]}if(i===x.VIDEO){if(r.enableVideo[0])return g.error(`[AryaRTCClient] subscribeInternal user:${e.user.uid} video of ${t} has already subscribed`),r.mutex.unlock(),Promise.reject(_.TRACK_ALREADY_SUBSCRIBED);try{null!==e.streamType&&await this.sendSwitchStreamTypeSignal(e.user.uid,e.streamType)}catch(t){return g.error(`[AryaRTCClient] subscribeInternal fail to switch stream for user:${e.user.uid} error:${t}`),r.mutex.unlock(),Promise.reject(_.SWITCH_STREADM_TYPE_FAILED)}r.enableVideo=[!0,!0],m.report({eventId:i===x.AUDIO?B.UNMUTE_REMOTE_AUDIO_STREAM:B.UNMUTE_REMOTE_VIDEO_STREAM,param:{uid:e.user.uid,mediaType:i}})}g.info(`[AryaRTCClient] subscribeInternal uid:${e.user.uid} sourceType:${t} mediaType:${i}`);let n=this.createMediaPromise(e,i,r);try{r.subscribe[0]?i===x.AUDIO?(r.enableAudio[1]=!1,this.sendAudioMuteState(e.user.uid,!1,t)):(r.enableVideo[1]=!1,this.sendVideoMuteState(e.user.uid,!1,t)):(r.subscribe=[!0,!1],r.iceRestart=!1,await this.sendSubscribeSignal(e.user.uid,r))}catch(e){return r.mutex.unlock(),Promise.reject(_.SET_OFFER_FAILED)}return r.mutex.unlock(),n}async unsubscribeInternal(e,t,i){let r=this.getOrCreateSubscribeInfo(e,t,!1);if(await r.mutex.lock(),void 0===r)return g.error(`[AryaRTCClient] unsubscribe user:${e.user.uid} ${i} has not been subscribed`),r.mutex.unlock(),Promise.reject(_.TRACK_NOT_SUBSCRIBED);if(g.info(`[AryaRTCClient] unsubscribe user:${e.user.uid} sourceType:${t} mediaType:${i} enableAudio:${r.enableAudio} enableVideo:${r.enableVideo}`),i===x.AUDIO){if(!r.enableAudio[0])return g.error(`[AryaRTCClient] unsubscribe user:${e.user.uid} audio has not been subscribed`),r.mutex.unlock(),Promise.reject(_.TRACK_NOT_SUBSCRIBED);t===b.PEOPLE?(e.user.audioTrack&&e.user.audioTrack.stop(),e.user.audioTrack=void 0):(e.user.contentAudioTrack&&e.user.contentAudioTrack.stop(),e.user.contentAudioTrack=void 0),r.enableAudio=[!1,!1],m.report({eventId:B.MUTE_REMOTE_AUDIO_STREAM,param:{uid:e.user.uid,mediaType:i}})}if(i===x.VIDEO){if(!r.enableVideo[0])return g.error(`[AryaRTCClient] unsubscribe user:${e.user.uid} video has not been subscribed`),r.mutex.unlock(),Promise.reject(_.TRACK_NOT_SUBSCRIBED);t===b.PEOPLE?(e.user.videoTrack&&e.user.videoTrack.stop(),e.user.videoTrack=void 0):(e.user.contentVideoTrack&&e.user.contentVideoTrack.stop(),e.user.contentVideoTrack=void 0),r.enableVideo=[!1,!1],m.report({eventId:B.MUTE_REMOTE_VIDEO_STREAM,param:{uid:e.user.uid,mediaType:i}})}return r.enableAudio[0]||r.enableVideo[0]?r.enableAudio[1]?r.enableVideo[1]||this.sendVideoMuteState(e.user.uid,!0,t):this.sendAudioMuteState(e.user.uid,!0,t):this.sendUnsubscribeSignal(e.user.uid,r,t),r.mutex.unlock(),Promise.resolve()}async enablePublishTrack(e,t){g.info(`[AryaRTCClient] enablePublishTrack type:${e.trackMediaType} id:${e.getTrackId()} sourceType:${e.getSourceType()}`),e._publish=!0;let i=!1;try{t.peer||(t.peer=new v({type:P.PUBLISH,log:g,id:this.localUser.user,sourceType:t.sourceType}),t.peer.on(w.CONNECTION_STATE,this.onconnectionstatechange)),i=!!t.peer.checkIfNeedNegotiate(e.getMediaStreamTrack())||i,i&&t.publish[0]&&!t.publish[1]&&await t.peer.awaitSetAnswer(),await t.peer.addTrack(e.getMediaStreamTrack())}catch(t){throw g.warning(`[AryaRTCClient] enablePublishTrack ${e.trackMediaType} peer add track failed because of error:${t}`),t}if(this.bindTrackEvent(e),e.trackMediaType===x.AUDIO)t.enableAudio=[!0,i],t.audioTrack=e;else if(e.trackMediaType===x.VIDEO){if(t.enableVideo=[!0,i],t.videoConfig=e.config,t.videoTrack=e,this.isDualStreamEnabled&&t.sourceType===b.PEOPLE)try{await this.publishLowVideoStream(t)}catch(t){g.warning(`[AryaRTCClient] enablePublishTrack ${e.trackMediaType} fail to publish low video stream because of error:${t}`)}t.sourceType===b.CONTENT&&m.report({eventId:B.START_SCREEN_CAPTURE})}return i}disablePublishTrack(e,t){g.info(`[AryaRTCClient] disablePublishTrack type:${e.trackMediaType} id:${e.getTrackId()}`),e._publish=!1,e.enable&&t.peer.removeTrack(e.getMediaStreamTrack()),this.unbindTrackEvent(e),e.trackMediaType===x.AUDIO?(t.enableAudio=[!1,!1],t.audioTrack=null,m.report({eventId:B.MUTE_LOCAL_AUDIO_STREAM})):e.trackMediaType===x.VIDEO&&(t.enableVideo=[!1,!1],t.videoTrack=null,this.isDualStreamEnabled&&t.sourceType===b.PEOPLE&&this.sendUnpublishLowVideoStreamSignal(t),m.report({eventId:t.sourceType===b.PEOPLE?B.DISABLE_VIDEO_TX:B.STOP_SCREEN_CAPTURE}))}async publishLowVideoStream(e){if(g.info("[AryaRTCClient] publishLowVideoStream"),null===e.lowStreamPeer){e.lowStreamPeer=new v({type:P.PUBLISH,log:g,id:this.localUser.user,sourceType:b.PEOPLE,simulcastLayer:y.LOWSTREAM});try{e.lowStreamVideoTrack=await e.videoTrack.clone(this.lowStreamParam),await e.lowStreamPeer.addTrack(e.lowStreamVideoTrack)}catch(t){throw g.error(`[AryaRTCClient] publishLowVideoStream fail to add low video track because of error:${t}`),e.lowStreamPeer.close(),e.lowStreamPeer=null,t}this.sendPublishLowVideoStreamSignal(e)}}createMediaPromise(e,t,i){return g.info(`[AryaRTCClient] createMediaPromise user:${e.user.uid}`),i.peer||(i.peer=new v({type:P.SUBSCRIBE,id:e.user.uid,sourceType:i.sourceType}),i.peer.on(w.CONNECTION_STATE,this.onconnectionstatechange)),new Promise((async(r,n)=>{t===x.AUDIO?(i.peer.once(w.AUDIO_TRACK,(t=>{g.debug("[AryaRTCClient] createMediaPromise onAudioTrack"),i.sourceType===b.PEOPLE?(e.user.audioTrack=new u(e.user.uid,t,i.sourceType),r(e.user.audioTrack)):(e.user.contentAudioTrack=new u(e.user.uid,t,i.sourceType),r(e.user.contentAudioTrack))})),i.peer.enableSubscribeAudio()):t===x.VIDEO&&(i.peer.once(w.VIDEO_TRACK,(t=>{g.debug("[AryaRTCClient] createMediaPromise onVideoTrack"),i.sourceType===b.PEOPLE?(e.user.videoTrack=new c(e.user.uid,t,i.sourceType),r(e.user.videoTrack)):(e.user.contentVideoTrack=new c(e.user.uid,t,i.sourceType),r(e.user.contentVideoTrack))})),i.peer.enableSubscribeVideo())}))}async recreateMediaConnection(){if(g.info("[AryaRTCClient] recreateMediaConnection"),this.remoteUsers.forEach((async(e,t)=>{for(let i of e.subscribeInfos.values())if(i.peer&&(g.info(`[AryaRTCClient] recreateMediaConnection recreate subscribe peer for user:${t} audio:${i.enableAudio[0]} video:${i.enableVideo[0]}`),await i.peer.recreatePeerConnection(),i.enableAudio[0]&&(i.peer.once(w.AUDIO_TRACK,(r=>{g.debug("[AryaRTCClient] recreateMediaConnection onAudioTrack"),i.sourceType===b.PEOPLE?e.user.audioTrack?e.user.audioTrack.setMediaTrack(r):e.user.audioTrack=new u(t,r,i.sourceType,this.stats):e.user.contentAudiorack?e.user.contentAudioTrack.setMediaTrack(r):e.user.contentAudioTrack=new u(t,r,i.sourceType,this.stats)})),i.peer.enableSubscribeAudio()),i.enableVideo[0]&&(i.peer.once(w.VIDEO_TRACK,(r=>{g.debug("[AryaRTCClient] recreateMediaConnection onVideoTrack"),i.sourceType===b.PEOPLE?e.user.videoTrack?e.user.videoTrack.setMediaTrack(r):e.user.videoTrack=new c(t,r,i.sourceType,this.stats):e.user.contentVideoTrack?e.user.contentVideoTrack.setMediaTrack(r):e.user.contentVideoTrack=new c(t,r,i.sourceType,this.stats)})),i.peer.enableSubscribeVideo(),i.sourceType===b.PEOPLE)))try{null!==e.streamType&&await this.sendSwitchStreamTypeSignal(t,e.streamType)}catch(e){g.error(`[AryaRTCClient] recreateMediaConnection fail to switch stream for user:${t} error:${e}`)}})),this.localUser)try{for(let e of this.localUser.publishInfos.values())e.peer&&await e.peer.recreatePeerConnection(),e.lowStreamPeer&&await e.lowStreamPeer.recreatePeerConnection()}catch(e){g.error(`[AryaRTCClient] recreateMediaConnection fail to recreate publish peer error:${e}`)}}async reconnectPublishMedia(e){if(g.info(`[AryaRTCClient] reconnectPublishMedia sourceType:${e}`),null!==this.localUser)for(let t of this.localUser.publishInfos.values()){if(t.sourceType!==e)continue;let i=t.peer?t.peer.connectionState:void 0;g.info(`[AryaRTCClient] reconnectPublishMedia enableAudio:${t.enableAudio} enableVideo:${t.enableVideo} publish:${t.publish} connectionState:${i} sourceType:${t.sourceType}`);try{t.mutex.lock(),t.publish[0]&&t.peer?i===R.FAILED||i===R.NEW||i===R.DISCONNECTED?(t.iceRestart=!0,await this.sendPublishSignal(t),await t.videoTrack._beautyCheck()):i===R.CONNECTED&&(t.enableAudio[1]||this.sendAudioMuteState(this.uid,!t.enableAudio[0],t.sourceType),t.enableVideo[1]||this.sendVideoMuteState(this.uid,!t.enableVideo[0],t.sourceType)):t.publish[0]||t.publish[1]||(t.enableAudio[1]=!0,t.enableVideo[1]=!0,this.sendUnpublishSignal(t)),t.sourceType===b.PEOPLE&&this.reconnectLowVideoStreamMedia(t),t.mutex.unlock()}catch(e){g.error(`[AryaRTCClient] reconnectPublishMedia fail to reconnect error:${e}`),t.mutex.unlock()}}else g.warning("[AryaRTCClient] reconnectPublishMedia local user is null")}reconnectLowVideoStreamMedia(e){if(g.info(`[AryaRTCClient] reconnectLowVideoStreamMedia dual stream enabled:${this.isDualStreamEnabled}`),e.publishLowStream[0]&&e.lowStreamPeer){let t=e.lowStreamPeer.connectionState;t!==R.FAILED&&t!==R.NEW&&t!==R.DISCONNECTED||(e.iceRestart=!0,this.sendPublishLowVideoStreamSignal(e))}else e.publishLowStream[0]||e.publishLowStream[1]||this.sendUnpublishLowVideoStreamSignal(e)}async reconnectSubscribeMedia(){g.info("[AryaRTCClient] reconnectSubscribeMedia"),this.remoteUsers.forEach((async(e,t)=>{for(let i of e.subscribeInfos.values())try{let e=i.peer?i.peer.connectionState:void 0;g.info(`[AryaRTCClient] reconnectSubscribeMedia user:${t} enableAudio:${i.enableAudio} enableVideo:${i.enableVideo} subscribe:${i.subscribe} connectionState:${e}`),i.mutex.lock(),i.subscribe[0]&&i.peer?e===R.FAILED||e===R.NEW||e===R.DISCONNECTED?(i.enableAudio[1]=!0,i.enableVideo[1]=!0,i.subscribe=[!0,!1],i.iceRestart=!0,await this.sendSubscribeSignal(t,i)):e===R.CONNECTED&&(i.enableAudio[1]||this.sendAudioMuteState(t,!i.enableAudio[0],i.sourceType),i.enableVideo[1]||this.sendVideoMuteState(t,!i.enableVideo[0],i.sourceType)):i.subscribe[0]||i.subscribe[1]||((i.enableAudio[0]||i.enableVideo[0])&&g.error(`[AryaRTCClient] reconnectSubscribeMedia enableAudio:${i.enableAudio[0]} and enableVideo:${i.enableVideo[0]} are both false when subscribe is false`),this.sendUnsubscribeSignal(t,i,i.sourceType)),i.mutex.unlock()}catch(e){g.error(`[AryaRTCClient] reconnectSubscribeMedia fail to reconnect error:${e}`),i.mutex.unlock()}}))}handleUserOnlineState(e){g.info(`[AryaRTCClient] handleUserOnlineState uid:${e}`);let t=this.remoteUsers.get(e);if(void 0!==t)return void g.warning(`[AryaRTCClient] handleUserOnlineState user ${e} has already exit`);let i=new s(e);t=new j(i),this.remoteUsers.set(e,t),this.emit(C.USER_JOINED,i),m.report({eventId:B.PARTICIPANT_ONLINE,param:{remote_user_id:e}})}handleUserOfflineState(e){g.info(`[AryaRTCClient] handleUserOfflineState uid:${e}`);let t=this.remoteUsers.get(e);if(void 0!==t){for(let e of t.subscribeInfos.values())null!==e.peer&&(e.peer.close(),e.peer.off(w.CONNECTION_STATE,this.onconnectionstatechange),e.peer=null);this.emit(C.USER_LEFT,t.user),this.remoteUsers.delete(e),m.report({eventId:B.PARTICIPANT_OFFLINE,param:{remote_user_id:e}})}else g.warning(`[AryaRTCClient] handleUserOffline user:${e} does not exit`)}async handlePublishAction(e,t,i){if(g.info(`[AryaRTCClient] handlePublishAction sourceType:${e} simulcastLayer:${t}`),void 0===i)return void g.error("[AryaRTCClient] handlePublishAction sdp is error");let r=this.getOrCreatePublishInfo(e,!1);if(!r)return void g.warning("[AryaRTCClient] handlePublishAction publish local user or publishInfo is null");let n=t===y.HIGHSTREAM?r.publish:r.publishLowStream;if(!n[0]||n[1])return void g.warning("[AryaRTCClient] handlePublishAction publish peerconnection has already set remote sdp or invalid response");let s=t===y.HIGHSTREAM?r.peer:r.lowStreamPeer;n[1]=!0;let a=t===y.HIGHSTREAM&&r.enableVideo[0]?r.videoConfig.encoderConfig:this.lowStreamParam;r.enableVideo[0]&&a&&(s.isSenderSupportedSetParam()||(i=T.setVideoSendBitRate(i,{videoSendBitrate:a.bitrateMax})),i=T.setVideoCodecParam(i,{minBitrate:a.bitrateMin,profileLevelId:"42e01f"}));try{await s.setAnswerSdp(i),r.enableVideo[0]&&s.isSenderSupportedSetParam()&&(await s.setVideoEncoderParams({maxBitrate:a.bitrateMax}),r.videoConfig.optimizationMode&&await s.setOptimizationMode(r.videoConfig.optimizationMode))}catch(e){g.error(`[AryaRTCClient] handlePublishAction fail to set answer or param for peer because of error:${e}`)}}handleUnpublishAction(e,t){g.info(`[AryaRTCClient] handleUnpublishAction sourceType:${e} simulcastLayer:${t}`);let i=this.getOrCreatePublishInfo(e,!1);if(void 0===i)return void g.warning("[AryaRTCClient] handleUnpublishAction unpublish publishInfo is undefined");let r=t===y.HIGHSTREAM?i.publish:i.publishLowStream;r[0]||r[1]?g.warning("[AryaRTCClient] handleUnpublishAction action is invalid"):(r[1]=!0,t===y.HIGHSTREAM&&this.localUser.publishInfos.delete(e))}handleSubcribeAction(e,t,i){if(g.info(`[AryaRTCClient] handleSubcribeAction uid:${e} sourceType:${t}`),void 0===i)return void g.error("[AryaRTCClient] handleSubcribeAction sdp is error");let r=this.remoteUsers.get(e),n=this.getOrCreateSubscribeInfo(r,t,!1);if(void 0!==n&&n.peer){if(!n.subscribe[0]||n.subscribe[1])return void g.warning(`[AryaRTCClient] handleSubcribeAction peerconnection of subscribe ${e} has already set remote sdp`);g.info(`[AryaRTCClient] handleSubcribeAction set sdp of user:${e} peerconnection`),n.subscribe[1]=!0,n.peer.setAnswerSdp(i)}else g.warning("[AryaRTCClient] handleSubcribeAction action is invalid")}handleUnsubscribeAction(e,t){g.info(`[AryaRTCClient] handleUnsubscribeAction uid:${e} sourceType:${t}`);let i=this.remoteUsers.get(e),r=this.getOrCreateSubscribeInfo(i,t,!1);if(void 0!==r){if(r.subscribe[0]||r.subscribe[1])return void g.warning(`[AryaRTCClient] handleUnsubscribeAction subscribe:${r.subscribe} action is invalid`);r.subscribe[1]=!0}else g.warning("[AryaRTCClient] handleUnsubscribeAction action is invalid")}handleMuteAction(e,t,i,r){g.info(`[AryaRTCClient] handleMuteAndUnmuteAction uid:${e} sourceType:${t} mediaType:${i} mute:${r}`);let n=null,s=this.remoteUsers.get(e);if(void 0!==s?(n=this.getOrCreateSubscribeInfo(s,t,!1),m.report({eventId:i===x.AUDIO?r?B.MUTE_REMOTE_AUDIO_STREAM:B.UNMUTE_REMOTE_AUDIO_STREAM:r?B.MUTE_REMOTE_VIDEO_STREAM:B.UNMUTE_REMOTE_VIDEO_STREAM,param:{participants:[{user_id:e,source_type:t}]}})):this.localUser&&this.localUser.user===e&&(n=this.getOrCreatePublishInfo(t,!1),m.report({eventId:i===x.AUDIO?r?B.MUTE_LOCAL_AUDIO_STREAM:B.UNMUTE_LOCAL_AUDIO_STREAM:r?B.DISABLE_VIDEO_TX:B.ENABLE_VIDEO_TX}),i===x.AUDIO&&m.report({eventId:B.MUTE_MICROPHONE,param:{mute:r}})),null!==n){let e;if(i===x.AUDIO?e=n.enableAudio:i===x.VIDEO&&(e=n.enableVideo),e[0]===r||e[1])return void g.warning(`[AryaRTCClient] handleMuteAndUnmuteAction action is invalid with mediaType:${i} mute:${r}`);e[1]=!0}else g.warning(`[AryaRTCClient] handleMuteAndUnmuteAction do not find user:${e}`)}handleMuteState(e,t,i,r){g.info(`[AryaRTCClient] handleMuteState uid:${e} mediaType:${t} mute:${i} sourceType:${r}`);let n=this.remoteUsers.get(e);if(void 0!==n)switch(r){case b.PEOPLE:this.handlePeopleTrackMuteState(n,t,i);break;case b.CONTENT:}else g.warning(`[AryaRTCClient] handleMuteState mute_video user ${e} does not exit`)}async handleContentTrackMuteState(e,t){if(g.info(`[AryaRTCClient] handleContentTrackMuteState uid:${e.user.uid} mute:${t} state:${this.publishContentState}`),this._contentMutex.lock(),t||e.user.uid===this.uid||await this.checkIfLocalContentKickedOff(),!this.isValidContentTrackMuteState(e,t))return g.error("[AryaRTCClient] handleContentTrackMuteState track mute state is wrong"),void this._contentMutex.unlock();if(t){try{e.user.hasContent=!1,await this.unsubscribeInternal(e,b.CONTENT,x.VIDEO),await this.unsubscribeInternal(e,b.CONTENT,x.AUDIO)}catch(t){g.error(`[AryaRTCClient] handleContentTrackMuteState fail to unsubscribe content of ${e.user.uid}`)}this.curShareContentUser=null,this.emit(C.CONTENT_UNPUBLISHED,e.user.uid,x.VIDEO),this.emit(C.CONTENT_UNPUBLISHED,e.user.uid,x.AUDIO)}else try{e.user.hasContent=!0,this.curShareContentUser=e;let t=await this.subscribeInternal(e,b.CONTENT,x.VIDEO);this.emit(C.CONTENT_PUBLISH,t,x.VIDEO),t=await this.subscribeInternal(e,b.CONTENT,x.AUDIO),this.emit(C.CONTENT_PUBLISH,t,x.AUDIO)}catch(t){g.error(`[AryaRTCClient] handleContentTrackMuteState fail to subscribe content of ${e.user.uid}`)}this._contentMutex.unlock()}handlePeopleTrackMuteState(e,t,i){if(g.info(`[AryaRTCClient] handlePeopleTrackMuteState uid:${e.user.uid} hasVideo:${e.user.hasVideo} hasAudio:${e.user.hasAudio}`),t===x.VIDEO){if(i&&null===e.user.hasVideo)return void g.warning(`[AryaRTCClient] handlePeopleTrackMuteState user:${e.user.uid} video mute should be notified after the unmute`);if(!e.user.hasVideo===i)return void g.warning(`[AryaRTCClient] handlePeopleTrackMuteState user:${e.user.uid} video mute:${i} has already been notified`);e.user.hasVideo=!i}else if(t===x.AUDIO){if(i&&null===e.user.hasAudio)return void g.warning(`[AryaRTCClient] handlePeopleTrackMuteState user:${e.user.uid} audio mute should be notified after the unmute`);if(!e.user.hasAudio===i)return void g.warning(`[AryaRTCClient] handlePeopleTrackMuteState user:${e.user.uid} audio mute:${i} has already been notified`);e.user.hasAudio=!i}this.emit(i?C.USER_UNPUBLISHED:C.USER_PUBLISHED,e.user,t)}handleRemoteUsersState(e){g.info("[AryaRTCClient] handleRemoteUsersState");let t=[];this.remoteUsers.forEach(((i,r)=>{let n=!1;for(const t of e)if(t.remote_uid===r){g.debug(`[AryaRTCClient] handleRemoteUsersState remoteAudio:${t.audio_mute} remoteVideo:${t.video_mute} curAudio:${i.user.hasAudio} curVideo:${i.user.hasVideo}`),n=!0,t.audio_mute&&i.user.hasAudio&&(g.info(`[AryaRTCClient] handleRemoteUsersState user-unpublished user:${r} mediaType:audio`),i.user.hasAudio=!1,this.emit(C.USER_UNPUBLISHED,i.user,x.AUDIO),m.report({eventId:B.MUTE_REMOTE_AUDIO_STREAM})),t.video_mute&&i.user.hasVideo&&(g.info(`[AryaRTCClient] handleRemoteUsersState user-unpublished user:${r} mediaType:video`),i.user.hasVideo=!1,this.emit(C.USER_UNPUBLISHED,i.user,x.VIDEO));break}n||t.push(r)}));for(const e of t){g.info(`[AryaRTCClient] handleRemoteUsersState remote_users user_offline user:${e}`);let t=this.remoteUsers.get(e);if(void 0!==t){this.remoteUsers.delete(e);for(let e of t.subscribeInfos.values())null!==e.peer&&(e.peer.close(),e.peer.off(w.CONNECTION_STATE,this.onconnectionstatechange),e.peer=null);this.curShareContentUser&&this.curShareContentUser.user.uid===e&&this.handleContentTrackMuteState(this.curShareContentUser,!0),this.emit(C.USER_LEFT,t.user),m.report({eventId:B.PARTICIPANT_OFFLINE,param:{remote_user_id:e}})}else g.error(`[AryaRTCClient] handleRemoteUsersState remote user:${e} is undefined`)}for(let t of e)this.remoteUsers.has(t.remote_uid)||this.handleUserOnlineState(t.remote_uid)}handleKickedOutState(){g.info("[AryaRTCClient] handleKickedOutState"),this.localUser&&(this.connectionStateTransiteToNewState(E.DISCONNECTED,S.UID_BANNED),m.report({eventId:B.LEAVE_CHANNEL_KICKED}),this.close())}async onconnectionstatechange_(e,t,i,r){let n="boolean"==typeof navigator.onLine?navigator.onLine:this.onLine;g.debug(`[AryaRTCClient] onconnectionstatechange id:${e} sourceType:${t} simulcastLayer:${i} state:${r} onLine:${n}`);try{if("failed"===r&&this.curConnectionState===E.CONNECTED&&n&&!this.isReJoin)if(this.localUser&&e===this.localUser.user){let e=this.getOrCreatePublishInfo(t);e&&(i===y.HIGHSTREAM&&e.peer&&e.publish[1]&&(g.info(`[AryaRTCClient] onconnectionstatechange renegotiate sdp of publish for sourceType:${t} simulcastLayer:${i}`),e.iceRestart=!0,await this.sendPublishSignal(e)),i===y.LOWSTREAM&&e.lowStreamPeer&&e.publishLowStream[1]&&(g.info(`[AryaRTCClient] onconnectionstatechange renegotiate sdp of publish for sourceType:${t} simulcastLayer:${i}`),e.iceRestart=!0,await this.sendPublishLowVideoStreamSignal(e)))}else{let i=this.remoteUsers.get(e),r=this.getOrCreateSubscribeInfo(i,t,!1);r&&r.peer&&r.subscribe[1]&&(g.info(`[AryaRTCClient] onconnectionstatechange renegotiate sdp of subcribe for user:${e} sourceType:${t}`),r.subscribe=[!0,!1],r.iceRestart=!0,await this.sendSubscribeSignal(e,r))}}catch(e){g.debug("[AryaRTCClient] onconnectionstatechange send signal failed")}}close(){if(g.info("[AryaRTCClient] close"),this.attemptJoinTimerId&&clearTimeout(this.attemptJoinTimerId),this.attemptJoinTimerId=null,this._audioVolumeIndicationInterval&&window.clearInterval(this._audioVolumeIndicationInterval),this._audioVolumeIndicationInterval=null,this.destroySignalHandler(),this.publishContentState=null,this.remoteUsers.forEach(((e,t)=>{void 0!==e.user.audioTrack&&e.user.audioTrack.stop(),void 0!==e.user.videoTrack&&e.user.videoTrack.stop();for(let t of e.subscribeInfos.values())t.peer&&(t.peer.close(),t.peer.off(w.CONNECTION_STATE,this.onconnectionstatechange),t.peer=null)})),this.localUser)for(let e of this.localUser.publishInfos.values())e.peer&&(e.peer.close(),e.peer.off(w.CONNECTION_STATE,this.onconnectionstatechange),e.peer=null),e.lowStreamPeer&&(e.lowStreamPeer.close(),e.lowStreamPeer.off(w.CONNECTION_STATE,this.onconnectionstatechange),e.lowStreamPeer=null,e.lowStreamVideoTrack&&e.lowStreamVideoTrack.stop(),e.lowStreamVideoTrack=null);if(this.audioUser){for(let e of this.audioUser.subscribeInfos.values())e.peer&&(e.peer.close(),e.peer.off(w.CONNECTION_STATE,this.onconnectionstatechange),e.peer=null);this.audioUser=null}this.remoteActiveAudioTrack=null,this.remoteUsers.clear(),this.localUser=null,this.curShareContentUser=null,m.stop(),g.close()}bindTrackEvent(e){e.on(D.DISABLE_TRACK,this.handleDisableTrackEvent),e.on(D.ENABLE_TRACK,this.handleEnableTrackEvent),e.on(D.REPLACE_TRACK,this.handleReplaceTrackEvent),e.on(D.SET_OPTIMIZATION_MODE,this.handleSetOptimizationMode)}unbindTrackEvent(e){e.off(D.DISABLE_TRACK,this.handleDisableTrackEvent),e.off(D.ENABLE_TRACK,this.handleEnableTrackEvent),e.off(D.REPLACE_TRACK,this.handleReplaceTrackEvent),e.off(D.SET_OPTIMIZATION_MODE,this.handleSetOptimizationMode)}createSignalHandler(){this.signalHandler||(this.signalHandler=new G(this),this.signalHandler.on(O.RECONNECT_FAILED,this.handleSignalReconnectFailedEvent),this.signalHandler.on(O.CONNECTION_STATE,this.handleSignalStateEvent))}destroySignalHandler(){null!==this.signalHandler&&(this.signalHandler.off(O.RECONNECT_FAILED,this.handleSignalReconnectFailedEvent),this.signalHandler.off(O.CONNECTION_STATE,this.handleSignalStateEvent),this.signalHandler.close(!1),this.signalHandler=null)}initEventHandler(){this.onconnectionstatechange=this.onconnectionstatechange_.bind(this),this.handleDisableTrackEvent=this.handleDisableLocalTrackEvent_.bind(this),this.handleEnableTrackEvent=this.handleEnableLocalTrackEvent_.bind(this),this.handleReplaceTrackEvent=this.handleReplaceLocalTrackEvent_.bind(this),this.handleSetOptimizationMode=this.handleSetOptimizationMode_.bind(this),this.handleSignalReconnectFailedEvent=this.handleSignalReconnectFailedEvent_.bind(this),this.handleSignalStateEvent=this.handleSignalStateEvent_.bind(this),this.handleMuteActiveAudioTrackEvent=this.handleMuteActiveAudioTrackEvent_.bind(this)}setDeviceManagerObserver(){z.on(M.CAMERA_CHANGED,(e=>{m.report({eventId:B.SWITCH_CAMERA,param:{device_name:e.device.label,device_id:e.device.deviceId}})})),z.on(M.SPEAKED_CHANGED,(e=>{this.reportDeviceInfo(e)})),z.on(M.MICROPHONE_CHANGED,(e=>{this.reportDeviceInfo(e)})),z.on(M.DEFAULT_SPEAKER_CHANGED,(e=>{this.reportDeviceInfo(e)})),z.on(M.DEFAULT_MICROPHONE_CHANGED,(e=>{this.reportDeviceInfo(e)}))}reportDeviceInfo(e){const{device:t}=e;"ACTIVE"===e.state&&m.report({eventId:"audioinput"===t.kind?B.AUDIO_INTPUT_ROUTE_CHANGE:B.AUDIO_OUTPUT_ROUTE_CHANGE,param:{device_name:t.label,device_id:t.deviceId}})}handleSetOptimizationMode_(e,t,i,r){g.info(`[AryaRTCClient] handleSetOptimizationMode meidaType:${t} sourceType:${i} mode:${r}`);let n=this.getOrCreatePublishInfo(i,!1);void 0!==n&&n.peer&&n.peer.isSenderSupportedSetParam()&&n.peer.isTrackAdded(e)&&n.peer.setOptimizationMode(r)}checkUserId(e){return"string"==typeof e&&/^[1-9]\d*$/.test(e)||"number"==typeof e&&e>0}checkChannelId(e){return"string"==typeof e&&/^[a-zA-Z0-9 \!\#\$\%\&\(\)\+\-\:\;\<\=\.\>\?\@\[\]\^\_\{\}\|\~\,]{1,64}$/.test(e)}checkIfTracksPublished(e,t){for(let i of e){if(i.trackMediaType===x.AUDIO&&t.audioTrack)return!0;if(i.trackMediaType===x.VIDEO&&t.videoTrack)return!0}return!1}checkIfTracksUnpublished(e,t){if(!t.peer)return!0;for(let i of e){if(i.trackMediaType===x.AUDIO&&!t.audioTrack)return!0;if(i.trackMediaType===x.VIDEO&&!t.videoTrack)return!0}return!1}checkIfTracksDisabled(e){for(let t of e)if(!t.enable)return!0;return!1}checkAndGetTracksSourceType(e){let t=e[0].getSourceType();for(let i of e.slice(1))if(t!==i.getSourceType())return null;return t}getOrCreatePublishInfo(e,t){if(null===this.localUser)return;let i=this.localUser.publishInfos.get(e);return void 0===i&&t&&(i=new V(e,this.localUser.user),this.localUser.publishInfos.set(e,i)),i}getOrCreateSubscribeInfo(e,t,i){if(!e)return;let r=e.subscribeInfos.get(t);return void 0===r&&i&&(r=new H(t,e.user.uid),e.subscribeInfos.set(t,r)),r}checkIfPublish(){if(null===this.localUser)return!1;for(let e of this.localUser.publishInfos.values())if(e.publish[0])return!0;return!1}async checkIfLocalContentKickedOff(){if(g.info("[AryaRTCClient] checkIfLocalContentKickedOff"),null===this.localUser)return;let e=this.localUser.publishInfos.get(b.CONTENT);if(void 0!==e&&e.publish[0]){let t=[];e.enableAudio[0]&&t.push(e.audioTrack),e.enableVideo[0]&&t.push(e.videoTrack);try{await this.unpublish(t)}catch(e){g.error(`[AryaRTCClient] checkIfLocalContentKickedOff fail to unpublish error:${e}`)}g.info("[AryaRTCClient] local content is kicked off"),this.emit(C.CONTENT_KICKED_OFF,L.KICKED_OFF)}}closeLocalContent(){if(!this.localUser)return;let e=this.localUser.publishInfos.get(b.CONTENT);void 0!==e&&e.publish[0]&&(g.info("[AryaRTCClient] close local content"),e.peer.close(),e.peer=null,this.localUser.publishInfos.delete(b.CONTENT),this.emit(C.CONTENT_KICKED_OFF,L.REJOIN))}enbleOpenApi(){this.nginxUrl=K,m.setData({env:"prod"}),g.env="prod"}disableOpenApi(){this.nginxUrl="https://test-api-rtc.yximgs.com/task",m.setData({env:"staging"}),g.env="staging"}isLegalTrack(e){for(let t of e)if(!(t instanceof o||t instanceof a))return!1;return!0}isValidContentTrackMuteState(e,t){return(null!==this.curShareContentUser||!t)&&((!this.curShareContentUser||this.curShareContentUser===e)&&!(this.curShareContentUser&&!this.curShareContentUser.user.hasContent&&t))}handleContentState(e){if(g.info(`[AryaRTCClient] handleContentState user:${e} ${this.publishContentState}`),this.publishContentState===k.PENDING_PUBLISH_CONTENT){if(e!==this.localUser.user)return void g.warning("[AryaRTCClient] handleContentState publish content is pending");this.publishContentState=k.PUBLISH_CONTENT_SUCCESS,this.curShareContentUser&&this.handleContentTrackMuteState(this.curShareContentUser,!0)}else{let t=this.remoteUsers.get(e);void 0!==t?(this.curShareContentUser&&t!==this.curShareContentUser&&this.handleContentTrackMuteState(this.curShareContentUser,!0),this.curShareContentUser&&this.curShareContentUser===t||this.handleContentTrackMuteState(t,!1)):this.curShareContentUser?this.handleContentTrackMuteState(this.curShareContentUser,!0):g.warning("[AryaRTCClient] handleContentState invalid content state")}this.waitRemoteUserStateUpdate&&(this.waitRemoteUserStateUpdate=!1,this.reconnectPublishMedia(b.CONTENT))}handleJoinTimeout(e,t,i){this.signalHandler&&this.signalHandler.close(!0),this.attemptJoinTimerId=setTimeout((()=>{this.isLeave?(g.warning("[AryaRTCClient] handleJoinTimeout stop attempting to join because user has leaved"),m.report({eventId:B.SIGNAL_RES,result:U.FAIL,reason:"handleJoinTimeout stop attempting to join because user has leaved"}),e(t)):i()}),1500)}get channelName(){return this.channel}get connectionState(){return this.curConnectionState}get localTracks(){const e=[];if(this.localUser){let t=this.localUser.publishInfos.get(b.PEOPLE);void 0!==t&&t.publish[0]&&(t.enableAudio[0]&&e.push(t.audioTrack),t.enableVideo[0]&&e.push(t.videoTrack))}return e}enableAudioVolumeIndicator(){if(this._audioVolumeIndicationInterval)return g.warning("[AryaRTCClient] you have already enabled audio volume indicator!");this._audioVolumeIndicationInterval=window.setInterval((()=>{const e=[];this.remoteUsers.forEach(((t,i)=>{e.push({level:t.user.audioTrack?100*t.user.audioTrack.getVolumeLevel():0,uid:i})}));let t=this.localUser.publishInfos.get(b.PEOPLE);void 0!==t&&t.publish[0]&&e.push({level:t.audioTrack?100*t.audioTrack.getVolumeLevel():0,uid:this.localUser.user}),e.sort(((e,t)=>e.level-t.level)),this.emit(C.VOLUME_INDICATOR,e)}),2e3)}getLocalAudioStats(){if(!this.localUser)return l;for(let e of this.localUser.publishInfos.values())return e.audioTrack?e.audioTrack.getStats():l}getLocalVideoStats(){if(!this.localUser)return h;for(let e of this.localUser.publishInfos.values())return e.videoTrack?e.videoTrack.getStats():h}getRTCStats(){let e=1,t=0,i=0,r=0,n=0;for(let e of this.localUser.publishInfos.values()){if(e.audioTrack){const r=e.audioTrack.getStats();t+=r.sendBytes,i+=r.sendBitrate}if(e.videoTrack){const r=e.videoTrack.getStats();t+=r.sendBytes,i+=r.sendBitrate}}return this.remoteUsers.forEach(((e,t)=>{const i=e.user.audioTrack;i&&(r+=i.getStats().receiveBytes,n+=i.getStats().receiveBitrate);const s=e.user.audioTrack;s&&(r+=s.getStats().receiveBytes,n+=s.getStats().receiveBitrate);const a=e.user.videoTrack;a&&(r+=a.getStats().receiveBytes,n+=a.getStats().receiveBitrate);const o=e.user.contentVideoTrack;o&&(r+=o.getStats().receiveBytes,n+=o.getStats().receiveBitrate)})),e+=this.remoteUsers.size,{UserCount:e,SendBitrate:i,SendBytes:t,RecvBytes:r,RecvBitrate:n}}getRemoteAudioStats(){const e={};return this.remoteUsers.forEach(((t,i)=>{const r=t.user.audioTrack;r&&(e[i]=r.getStats());const n=t.user.contentAudiorack;n&&(e[`${i}_content`]=n.getStats())})),e}getRemoteVideoStats(){const e={};return this.remoteUsers.forEach(((t,i)=>{const r=t.user.videoTrack;r&&(e[i]=r.getStats());const n=t.user.contentVideoTrack;n&&(e[`${i}_content`]=n.getStats())})),e}async subscribeActiveAudio(){try{let e=new s("any");this.audioUser=new j(e);let t=this.getOrCreateSubscribeInfo(this.audioUser,b.PEOPLE,!0);t.peer=new v({type:P.SUBSCRIBE,id:this.audioUser.user.uid,sourceType:t.sourceType}),t.peer.on(w.CONNECTION_STATE,this.onconnectionstatechange);let i=await t.peer.createOffer({});i=T.writeRtcpFb(i,"rrtr"),await t.peer.setOfferSdp(i);let r=await this.signalHandler.sendSubscribeSignal("any",i,!1,!0,t.sourceType,!1);2e3===r.body.code&&(t.peer.on(w.MEDIA_STREAM,(e=>{g.info(`[AryaRTCClient] subscribeCommonAudio audio track size:${e.getAudioTracks().length}`),this.remoteActiveAudioTrack||(this.remoteActiveAudioTrack=new d),this.remoteActiveAudioTrack.addMediaStream(e),5===this.remoteActiveAudioTrack.mediaStreams.size&&(this.remoteActiveAudioTrack.on(D.MUTE_ACTIVE_AUDIO_TRACK,this.handleMuteActiveAudioTrackEvent),this.emit(C.ACTIVE_TRACK,this.remoteActiveAudioTrack))})),await t.peer.setAnswerSdp(r.body.sdp))}catch(e){g.error(`fail to subscribe common audio error:${e}`)}}handleTrackRelationState(e){g.info(`[AryaRTCClient] trackRelation:${JSON.stringify(e)}`),this.remoteActiveAudioTrack||(this.remoteActiveAudioTrack=new d),this.remoteActiveAudioTrack.updateTrackRelation(e)}handleAryaErrorState(e,t){this.emit(C.ERROR,{code:e,msg:t})}async handleMuteActiveAudioTrackEvent_(e,t){if(g.info(`[AryaRTCClient] handleActiveAudioTrackEvent uid:${e} mute:${t}`),void 0===this.remoteUsers.get(e))throw _.INVALID_REMOTE_USER;if(2e3!==(await this.signalHandler.sendAudioMuteStateSignal(e,t,b.PEOPLE,!0,!1)).body.code)throw _.SEND_SIGNAL_ERROR}async _isSupportH264(){let e=await Y();Array.isArray(e.video)&&e.video.includes("H264")?this.supportH264=!0:this.supportH264=!1}}}},9596:(e,t,i)=>{const{parseJSON:r}=i(4891),n=i(4312),s=i(485),{ClientError:a,ActionEventId:o,ActionEventResult:c}=i(9648),u=i(7247),d=i(2951);class l extends s{constructor(){super(),this.websocket_=null,this.wssUrl_=null,this.lockReconnect=!1,this.pingTimerId=null,this.pongTimerId=null,this.connectTimerId=null,this.reconnectTimerId=null,this.heartTimeout=3e4,this.pindInterval=5e3,this.onSignalConnectionStateChange=null,this.onMessage=null,this.wsStatus=l.WsStatus.WsStausUnknown,this.waitResSignals=[],this.reconnectCnt=0,this.reconnectInterval=0,this.appId="",this.roomId=0,this.uid="",this.sdkVersion="",this.lastReconnectTime=null,this.stats=null,this.isOnceJoined=!1,this.observer=null}init(e,t,i,r,n){this.appId=e,this.roomId=t,this.uid=i,this.sdkVersion=r,this.observer=n,this.stats=this.observer.client.stats}open(e){if(u.info(`[AryaSignal] open url:${e}`),this.wssUrl_=e,this.websocket_){if(this.websocket_.readyState===WebSocket.OPEN)return u.warning("[AryaSignal] open has already opened"),Promise.resolve();this.websocket_=null}return new Promise(((e,t)=>{let i=()=>{let r=()=>{u.info("[AryaSignal] handleWebsocketOpenFail"),this.reconnectCnt++,this.reconnectCnt<5?this.reconnectInterval=0===this.reconnectInterval?200:2*this.reconnectInterval:this.reconnectInterval=3e3,this.lastReconnectTime=this.lastReconnectTime?this.lastReconnectTime:Date.now(),this.reconnectTimerId=setTimeout((async()=>{let e=Date.now();u.warning(`[AryaSignal] handleWebsocketOpenFail interval:${e-this.lastReconnectTime} reconnectInterval:${this.reconnectInterval} reconnectCnt:${this.reconnectCnt}`),e-this.lastReconnectTime>3e4?this.observer.isMediaConnectionActive()?(u.info("[AryaSignal] handleWebsocketOpenFail isActive"),i()):this.isOnceJoined?(this.isOnceJoined=!1,this.onReconnectFail()):t(a.SIGNAL_OPEN_FAILED):i()}),this.reconnectInterval)};try{this.websocket_=new WebSocket(this.wssUrl_),d.report({eventId:o.SIGNAL_REQ}),this.connectTimerId=setTimeout((()=>{this.websocket_&&this.websocket_.readyState===WebSocket.OPEN||(u.error("[AryaSignal] Signaling open timeout"),d.report({eventId:o.SIGNAL_REQ,result:c.FAIL,reason:"[AryaSignal] Signaling open timeout"}),this.onSignalConnectionStateChange(l.WsStatus.WSStatusTimeout),r())}),1e3),this.websocket_.onopen=()=>{u.info(`[AryaSignal] open success uid:${this.uid} channelId:${this.roomId}`),this.isOnceJoined=!0,clearTimeout(this.connectTimerId),clearTimeout(this.reconnectTimerId),this.initEventHandle(),this.lastReconnectTime=null,this.reconnectCnt=0,this.reconnectInterval=0,this.lockReconnect=!1,this.wsStatus=l.WsStatus.WsStatusConnected,this.startHeartBeart(),this.onSignalConnectionStateChange&&this.onSignalConnectionStateChange(l.WsStatus.WsStatusConnected),e()}}catch(e){u.error(`[AryaSignal] Signaling open websocket fail ${e}`),clearTimeout(this.connectTimerId),r()}};i()}))}close(e){u.info("[AryaSignal] close"),e||(this.observer=null),this.closeInternal(l.CloseCode.Normal,"")}closeInternal(e,t){u.info(`[AryaSignal] closeInternal code:${e} reason:${t}`),clearTimeout(this.connectTimerId),clearTimeout(this.reconnectTimerId),this.websocket_&&(this.stopHeartBeart(),this.websocket_.onmessage=null,this.websocket_.onerror=null,this.websocket_.onclose=null,this.websocket_.onopen=null,this.websocket_.readyState==WebSocket.OPEN&&this.websocket_.close(e,t),this.websocket_=null,this.wsStatus=l.WsStatus.WsStausUnknown),this.waitResSignals=[]}initEventHandle(){this.websocket_&&(this.websocket_.onerror=async e=>{u.error(`[AryaSignal] onerror channel error ${JSON.stringify(e)}`),this.wsStatus=l.WsStatus.WsStatusFailed,this.onSignalConnectionStateChange&&this.onSignalConnectionStateChange(this.wsStatus),await this.reconnect()}),this.websocket_&&(this.websocket_.onclose=async e=>{u.error(`[AryaSignal] onclose channel close event:${e.code} reason:${e.reason}`),e.code===l.CloseCode.Nomal&&0===e.reason.length?this.wsStatus=l.WsStatus.WsStatusClosedByUser:e.code===l.CloseCode.Invaild?this.wsStatus=l.WsStatus.WSStatusConnectionRefuse:e.code===l.CloseCode.KickOut||(this.wsStatus=l.WsStatus.WSStatusAbnormal),u.error(`[AryaSignal] onclose ${this.wsStatus}`),this.onSignalConnectionStateChange&&this.onSignalConnectionStateChange(this.wsStatus),this.wsStatus===l.WsStatus.WSStatusAbnormal&&(this.observer.isMediaConnectionActive()?this.reconnect():this.onReconnectFail())}),this.websocket_&&(this.websocket_.onmessage=e=>{var t=r(e.data);if(t){if(t.command===n.Command.kClientResponse||t.command===n.Command.kPong){let e=this.findIndexInWaitResSignals(t);if(-1!==e){let i=this.waitResSignals[e].invoke;if(this.waitResSignals.splice(e,1),t.command===n.Command.kClientResponse){if(i)return void this.emit(t.seq,t)}else if(t.command===n.Command.kPong)return void this.onPong(t)}}this.onMessage&&(u.info(`[AryaSignal] onmessage data:${e.data}`),this.onMessage(t))}else u.error("[AryaSignal] onmessage Failed to parse message")})}async reconnect(){if(u.info("[AryaSignal] reconnect"),this.stopHeartBeart(),!this.lockReconnect){this.lockReconnect=!0,this.closeInternal(l.CloseCode.Normal,"reconnect");try{await this.open(this.wssUrl_),d.report({eventId:o.SIGNAL_RECONNECT_REQ})}catch(e){u.info(`[AryaSignal] reconnect error:${e}`),this.onReconnectFail(),d.report({eventId:o.SIGNAL_RECONNECT_REQ,result:c.FAIL,reason:`[AryaSignal] reconnect error:${e}`})}}}onReconnectFail(){u.warning("[AryaSignal] onReconnectFail"),this.reconnectCnt=0,this.lastReconnectTime=null,this.lockReconnect=!1,this.closeInternal(l.CloseCode.Normal,"reconnectFail"),this.onSignalConnectionStateChange&&(this.wsStatus=l.WsStatus.WSStatusReconnectFail,this.onSignalConnectionStateChange(this.wsStatus))}startHeartBeart(){this.wsStatus===l.WsStatus.WsStatusConnected?this.pingTimerId=setTimeout((()=>{let e=n.GenerateSignalPingData(this.appId,this.roomId,this.uid,this.sdkVersion);this.waitResSignals.push({data:e,invoke:!1});try{this.websocket_.send(e.data),this.pongTimerId=setTimeout((()=>{if(u.error("[AryaSignal] startHeartBeart heart beart timeout"),this.observer.isMediaConnectionActive()&&this.wsStatus===l.WsStatus.WsStatusConnected)return u.info("[AryaSignal] startHeartBeart peer is active"),void this.onPong();this.wsStatus=l.WsStatus.WSStatusTimeout,this.onSignalConnectionStateChange(this.wsStatus),this.reconnect()}),this.heartTimeout)}catch(e){u.error(`[AryaSignal] send heart failed error:${e}`),this.websocket_&&this.reconnect()}}),this.pindInterval):u.warning("[AryaSignal] startHeartBeart websocket is not connected")}stopHeartBeart(){this.pingTimerId&&clearTimeout(this.pingTimerId),this.pongTimerId&&clearTimeout(this.pongTimerId),this.pingTimerId=null,this.pongTimerId=null}onPong(e){this.stopHeartBeart(),this.startHeartBeart()}send(e){if(this.websocket_&&this.wsStatus==l.WsStatus.WsStatusConnected){this.waitResSignals.push({data:e,invoke:!1});try{this.websocket_.send(e.data)}catch(e){u.error("[AryaSignal] Signaling send failed")}}}invoke(e){return null==this.websocket_||this.wsStatus!==l.WsStatus.WsStatusConnected?(u.error("[AryaSignal] inoke websocket is null or has not connected"),Promise.reject(a.SIGNAL_NOT_CONNECTED)):(this.waitResSignals.push({data:e,invoke:!0}),new Promise(((t,i)=>{this.websocket_.send(e.data);let r=setTimeout((()=>{u.error("[AryaSignal] invoke time out"),i(a.SIGNAL_INVOKE_TIMEOUT)}),3e3);this.once(e.seq,(e=>{clearTimeout(r),t(e)}))})))}findIndexInWaitResSignals(e){return void 0===e.seq?-1:this.waitResSignals.findIndex((t=>e.seq===t.data.seq))}}l.WsStatus={WsStausUnknown:0,WsStatusConnected:1,WsStatusFailed:2,WsStatusClosedByServer:3,WsStatusClosedByUser:4,WSStatusTimeout:5,WSStatusAbnormal:6,WSStatusConnectionRefuse:7,WSStatusNoNetWork:8,WSStatusReconnectFail:9},l.CloseCode={Normal:1e3,GoingAway:1001,Abnomal:1006,KickOut:4e3,Invaild:4010},e.exports=l},2951:(e,t,i)=>{const{getLocaltime:r,getNetType:n}=i(4891),s=i(3487),{trackStats:a}=i(220),o=i(2568),{browserInfo:c,isFirefox:u,isAndroid:d,isIOS:l}=i(5237),{version:h}=i(4147),{SourceType:p,SimulcastLayer:f,ActionEventId:A,VCodeC:m,ACodeC:g,AdaptionChangeReason:T}=i(9648),v={staging:"https://report-rtc.staging.kuaishou.com",prod:"https://report-rtc.kuaishou.com"};function C(e){const t=e.filter((e=>!!e)).join("&&");return o(t).toUpperCase()}e.exports=new class{constructor(){this.env="prod",this.STAT_INTERVAL=2e3,this.REPORT_INTERVAL=1e4,this._init(),this.httpRequest=new s,document.addEventListener("visibilitychange",this.reportPageHidden.bind(this))}_init(){this.statsInterval=null,this.reportStatsInterval=null,this.msgs=[],this.localUser=null,this.remoteUsers=null,this.appId=void 0,this.uid=void 0,this.serverList=void 0,this.connectInfo=void 0,this.callId=void 0,this._networkType=void 0,this.clientAddress="",this.lastDecodeVideoReceiverStats=new Map}setData(e){this.reportCilentBaseInfo(e),Object.assign(this,e)}start(){"staging"!==this.env&&(this.statsInterval||(this.statsInterval=setInterval((()=>{this.fetchStats()}),this.STAT_INTERVAL),this.reportStatsInterval=setInterval(this.send.bind(this),this.REPORT_INTERVAL)))}stop(){clearInterval(this.statsInterval),clearInterval(this.reportStatsInterval),this.send(),this._init()}reportPageHidden(){this.statsInterval&&this.report({eventId:A.SWITCH_FRONT_AND_BACK,param:{state:document.hidden?"background":"front"}})}reportNetworkInfo(e,t){this.clientAddress!==e&&(this.clientAddress=e,this.report({eventId:A.CLIENT_ADDRESS,param:{clientAddress:this.clientAddress}})),this.reportNetType(t)}reportNetType(e=n()){e!=this.networkType&&(this.msgs.push({contentType:"NetworkInfo",netType:e,timestamp:Date.now()}),this.networkType&&this.report({eventId:A.NETWORK_TYPE_CHANGED,param:{network_type_info:e}}),this.networkType=e)}reportCilentBaseInfo(e){if(e.callId&&(this.serverList&&e.serverList!=this.serverList&&this.report({eventId:A.SERVER_ADDRESS,param:{serverAddress:e.serverAddress}}),this.clientAddress&&e.clientAddress!=this.clientAddress&&this.report({eventId:A.CLIENT_ADDRESS,param:{clientAddress:e.clientAddress}}),!this.callId)){const{name:t,version:i,os:r}=c,n={contentType:"ClientBaseInfo",sdkVer:h,platform:"WebRTC",deviceInfo:`${r} ${t}/${i}`,osInfo:r,userAgent:navigator.userAgent,serverList:e.serverList,connectInfo:e.connectInfo,ipAddress:e.clientAddress,timestamp:Date.now()};this.report({eventId:A.NONE,param:n})}}fetchStats(){const e=Date.now(),t=[],{name:i,version:r,os:n}=c;t.push({contentType:"ClientBaseInfo",sdkVer:h,platform:"WebRTC",deviceInfo:`${n} ${i}/${r}`,osInfo:n,userAgent:navigator.userAgent,serverList:this.serverList,connectInfo:this.connectInfo,timestamp:e});let s=navigator.connection&&navigator.connection.rtt||0;t.push({contentType:"NetworkQualityInfo",srtt:s,sendUserId:this.uid,timestamp:e}),(l()||d())&&this.reportNetType(),this.msgs.push(...JSON.parse(JSON.stringify(t))),this.fetchUsersStats()}async fetchUsersStats(){const e=Date.now();if(this.localUser)for(const t of this.localUser.publishInfos.values())if(t.sourceType===p.PEOPLE){if(t.peer){const i=await this.fetchLocalUserStats(t,"lastStats");i&&(i.ts=e,t.enableAudio[0]&&this.reportLocalAudioStats(i),t.enableVideo[0]&&this.reportLocalVideoStats(i,0,1),a.setSendMediaTrack(t,i,0,1))}if(t.lowStreamPeer){const i=await this.fetchLocalUserStats(t,"lowLastStats");i&&(i.ts=e,t.enableVideo[0]&&this.reportLocalVideoStats(i,0,0),a.setSendMediaTrack(t,i,0,0))}}else{const i=await this.fetchLocalUserStats(t,"lastStats");i&&(i.ts=e,t.enableAudio[0]&&this.reportLocalAudioStats(i),t.enableVideo[0]&&this.reportLocalVideoStats(i,1,1),a.setSendMediaTrack(t,i,1,1))}this.remoteUsers&&this.remoteUsers.forEach((async t=>{for(let i of t.subscribeInfos.values()){i._isFirstVideoDecoded=!1;const r=await this.fetchRemoteUsersStats(i,t.user.uid);r&&(r.ts=e,i.enableAudio[0]&&this.reportRemoteAudioStats(r),i.enableVideo[0]&&this.reportRemoteVideoStats(r,Number(i.sourceType===p.CONTENT)),a.setRecMediaTrack(t,i,r))}}))}getCodecFromCodecStats(e,t){var i=e&&(e=e.match(/\/(.*)$/))&&e[1]?e[1]:"none";return"video"===t?m[i.toUpperCase()]:g[i.toUpperCase()]}calcLossRate(e,t,i){let r="send"===i?e.packetsSent-t.packetsSent:e.packetsReceived-t.packetsReceived,n=e.packetsLost-t.packetsLost;return Number.isNaN(r)||Number.isNaN(n)||0>=r||0>=n?0:Math.round(1e3*n/(r+n))}calcFreezeRate(e,t,i,r){let n=u()?2950:2250,s=this.lastDecodeVideoReceiverStats.get(e.ssrc);if(s){let e=s.stats;i.framesDecodeFreezeTime=e.framesDecodeFreezeTime,i.framesDecodeCount>0?i.framesDecodeInterval>=n&&(i.framesDecodeFreezeTime+=i.framesDecodeInterval):i.framesDecodeInterval=0}else i.framesDecodeFreezeTime=0;this.lastDecodeVideoReceiverStats.set(e.ssrc,{stats:{...i},lts:e.timeStamp})}calcData(e,t,i){return Math.round((e-t)/i)}reportLocalAudioStats(e){this.msgs.push({contentType:"AtxMetaData",timestamp:e.ts,...e.AtxMetaData}),this.msgs.push({contentType:"AtxMediaInfo",timestamp:e.ts,...e.AtxMediaInfo})}reportLocalVideoStats(e,t,i){this.msgs.push({contentType:"VtxMetaData",timestamp:e.ts,sourceType:t,simulcastId:i,...e.VtxMetaData}),this.msgs.push({contentType:"VtxMediaInfo",timestamp:e.ts,sourceType:t,simulcastId:i,...e.VtxMediaInfo})}reportRemoteAudioStats(e){this.msgs.push({contentType:"ArxMetaData",sendUserId:e.sendUserId,timestamp:e.ts,...e.ArxMetaData}),this.msgs.push({contentType:"ArxMediaInfo",sendUserId:e.sendUserId,timestamp:e.ts,...e.ArxMediaInfo})}reportRemoteVideoStats(e,t){this.msgs.push({contentType:"VrxMetaData",sendUserId:e.sendUserId,timestamp:e.ts,sourceType:t,...e.VrxMetaData}),this.msgs.push({contentType:"VrxMediaInfo",sendUserId:e.sendUserId,timestamp:e.ts,sourceType:t,...e.VrxMediaInfo})}async fetchLocalUserStats(e,t){if(!e.publish[0]&&"lastStats"===t)return void delete e[t];if(!e.publishLowStream[0]&&"lowLastStats"===t)return void delete e[t];let i;if(i="lastStats"===t?await e.peer.pc.getStats():await e.lowStreamPeer.pc.getStats(),!e[t])return e[t]=i,void(e._resolutionList=[]);let r={AtxMetaData:{},AtxMediaInfo:{},VtxMetaData:{},VtxMediaInfo:{}};const{AtxMetaData:n,AtxMediaInfo:s,VtxMetaData:a,VtxMediaInfo:o}=r,c=e[t];return i.forEach((u=>{switch(u.type){case"outbound-rtp":{const d=c.get(u.id);if(!d)return void(e[t]=i);r.timestamp=u.timestamp;const l=(u.timestamp-d.timestamp)/1e3,h=Math.round(8*(u.bytesSent-d.bytesSent)/l/1e3),p=this.calcData(u.packetsSent,d.packetsSent,l),f=u.bytesSent,A=Math.round(8*(u.retransmittedBytesSent-d.retransmittedBytesSent)/l/1e3)||0,m=this.calcData(u.retransmittedPacketsSent,d.retransmittedPacketsSent,l)||0;let g=u.retransmittedPacketsSent,v=m,C=this.calcLossRate(u,d,"send");if(C=Math.round(1e3*m/p),"video"===u.kind){if(e.videoTrack&&e.videoTrack.mediaTrack){const t=e.videoTrack.mediaTrack.getSettings();a.inputHeight=t.height,a.inputWidth=t.width}a.flowId=u.ssrc,a.encHeight=u.frameHeight,a.encWidth=u.frameWidth;const t=Math.round(10*(u.framesSent-d.framesSent)/l);if(o.sendFpsX10=t,o.inputFpsX10=t,u.mediaSourceId){const{height:e,width:t,framesPerSecond:r}=i.get(u.mediaSourceId);r&&void 0!==r&&(a.encHeight=e,a.encWidth=t,o.sendFpsX10=10*r,o.inputFpsX10=10*r)}if(u.framerateMean&&(o.sendFpsX10=Math.round(10*u.framerateMean)),u.codecId){const e=i.get(u.codecId);a.encodingStreamType=this.getCodecFromCodecStats(e.mimeType,"video")}if(o.flowId=u.ssrc,o.sendKbps=h,o.encTargetKbps=e.videoTrack.config.encoderConfig.bitrateMax||0,o.sendPktsCount=p,o.sendPktsLostCount=v,o.totalSendPktsCount=u.packetsSent,o.totalSendPktsLostCount=g,o.totalSendBytes=f,o.pliCnt=u.pliCount-d.pliCount,o.firCnt=u.firCount-d.firCount,o.nackCnt=u.nackCount-d.nackCount,o.pktsLostRate=C,o.duration=Math.round(u.timestamp-d.timestamp),o.retransmittedKbps=A,o.retransmittedPacketsSent=m,o.adaptionChangeReason=u.qualityLimitationReason&&T[u.qualityLimitationReason.toUpperCase()],o.encTs=Math.round(1e3*(u.totalEncodeTime-d.totalEncodeTime)/(u.framesEncoded-d.framesEncoded)),a.inputHeight){const t=`${a.inputWidth}*${a.inputHeight}`;if(e._resolutionList.length){t!==e._resolutionList[e._resolutionList.length-1]&&e._resolutionList.push(t)}else e._resolutionList.push(t);o.resolutionChangeCnt=e._resolutionList.length-1}}if("audio"===u.kind){if(n.flowId=u.ssrc,u.codecId){const e=i.get(u.codecId);n.encodingStreamType=this.getCodecFromCodecStats(e.mimeType,"audio"),n.encChannels=e.channels,n.inputChannels=e.channels,n.encSampleRate=e.clockRate,n.inputSampleRate=e.clockRate}if(u.mediaSourceId){const e=i.get(u.mediaSourceId);n.captureVolume=32767*e.audioLevel||0,n.atxAGCVolume=32767*e.audioLevel||0,n.echoReturnLoss=e.echoReturnLoss||0,n.echoReturnLossEnhancement=e.echoReturnLossEnhancement||0}s.flowId=u.ssrc,s.sendKbps=h,s.sendPktsCount=p,s.totalSendPktsCount=u.packetsSent,s.totalSendBytes=f,s.duration=Math.round(u.timestamp-d.timestamp),s.pktsLostRate=C,s.retransmittedKbps=A,s.retransmittedPacketsSent=m,s.sendPktsLostCount=v}break}case"local-candidate":if("prflx"===u.candidateType){let e=u.networkType?u.networkType.toUpperCase():"";this.reportNetworkInfo(u.ip||u.address,e)}break;case"transport":{const e=i.get(u.selectedCandidatePairId);if(e){o.sendBandwidth=Math.round(e.availableOutgoingBitrate/1e3)||0;const t=1e3*e.currentRoundTripTime;o.rttMs=t,s.rttMs=t}}}})),e[t]=i,r}async fetchRemoteUsersStats(e,t){if(!e.subscribe[0])return void delete e.lastStats;const i=await e.peer.pc.getStats();if(!e.lastStats)return void(e.lastStats=i);const r={ArxMetaData:{},ArxMediaInfo:{},VrxMetaData:{},VrxMediaInfo:{},sendUserId:t},n={};for(const[e,t]of i)n[e]=t;const{ArxMetaData:s,ArxMediaInfo:a,VrxMetaData:o,VrxMediaInfo:c}=r,u=e.lastStats;return i.forEach((t=>{switch(t.type){case"inbound-rtp":{const n=u.get(t.id);if(!n)return void(e.lastStats=i);r.timestamp=t.timestamp;const d=(t.timestamp-n.timestamp)/1e3,l=Math.round(8*(t.bytesReceived-n.bytesReceived)/d/1e3),h=this.calcData(t.packetsReceived,n.packetsReceived,d),p=Math.round(8*t.bytesReceived/1e3),f=this.calcData(t.packetsLost,n.packetsLost,d),A=Math.round(1e3*(t.jitterBufferDelay-n.jitterBufferDelay)/(t.jitterBufferEmittedCount-n.jitterBufferEmittedCount))||0;let m=this.calcLossRate(t,n,"recv");const g=this.calcData(t.nackCount,n.nackCount,d);if("video"===t.kind){if(o.flowId=t.ssrc,t.codecId){const{mimeType:e}=i.get(t.codecId);o.encodingStreamType=this.getCodecFromCodecStats(e,"video")}t.trackId&&(o.decHeight=t.frameHeight,o.decWidth=t.frameWidth,c.recvFpsX10=Math.round(10*(t.framesReceived-n.framesReceived)/d),c.decFpsX10=Math.round(10*(t.framesDecoded-n.framesDecoded)/d),c.renderFpsX10=Math.round(10*(t.framesDecoded-n.framesDecoded)/d)),t.framerateMean&&(c.recvFpsX10=Math.round(10*t.framerateMean)),c.flowId=t.ssrc,c.recvKbps=l,c.compositeIdRFrames=t.keyFramesDecoded,c.recvPktsCount=h,c.recvPktsLostCount=g,c.totalRecvPktsCount=t.packetsReceived,c.totalRecvPktsLostCount=t.nackCount,c.totalRecvBytes=p,c.duration=Math.round(t.timestamp-n.timestamp),c.frameLostCnt=this.calcData(t.framesDropped,n.framesDropped,d),c.pliReqCnt=this.calcData(t.pliCount,n.pliCount,d),c.nackReqCnt=this.calcData(t.nackCount,n.nackCount,d),c.pliReqAllCnt=t.pliCount,c.nackReqAllCnt=t.nackCount,c.pktsLostRate=m,c.jitterBufferMs=A,c.recvDelay=A,c.framesDecodeInterval=Math.round(t.timestamp-n.timestamp),c.decodeMs=Math.round(1e3*(t.totalDecodeTime-n.totalDecodeTime)/d),c.jitterMs=Math.round(1e3*t.jitter),c.framesDecoded=t.framesDecoded,c.framesDecodeCount=this.calcData(t.framesDecoded,n.framesDecoded,d),this.calcFreezeRate(t,n,c,e)}if("audio"===t.kind){if(s.flowId=t.ssrc,t.trackId){const{audioLevel:e=0}=i.get(t.trackId);s.playVolume=32767*e}if(t.codecId){const e=i.get(t.codecId);s.renderChannels=e.channels,s.renderSampleRate=e.clockRate,s.encodingStreamType=this.getCodecFromCodecStats(e.mimeType,"audio"),s.decChannels=e.channels,s.decSampleRate=e.clockRate}a.flowId=t.ssrc,a.recvKbps=l,a.recvPktsCount=h,a.recvPktsLostCount=f,a.totalRecvPktsCount=t.packetsReceived,a.totalRecvPktsLostCount=t.packetsLost,a.totalRecvBytes=p,a.duration=Math.round(t.timestamp-n.timestamp),a.pktsLostRate=m,a.jitterBufferMs=A,a.recvDelay=A,a.accelerateRate=t.removedSamplesForAcceleration/t.totalSamplesReceived,a.jitterMs=1e3*t.jitter,a.concealedSamples=this.calcData(t.concealedSamples,n.concealedSamples,d),a.silentConcealedSamples=this.calcData(t.silentConcealedSamples,n.silentConcealedSamples,d),a.insertedSamplesForDeceleration=this.calcData(t.insertedSamplesForDeceleration,n.insertedSamplesForDeceleration,d),a.removedSamplesForAcceleration=this.calcData(t.removedSamplesForAcceleration,n.removedSamplesForAcceleration,d);let e=1920;t.totalSamplesDuration&&t.totalSamplesReceived&&(e=t.totalSamplesReceived/t.totalSamplesDuration/50,a.receivedFrames=Math.round(t.totalSamplesReceived/e/d)),t.concealedSamples&&(a.droppedFrames=Math.round(t.concealedSamples/e))}}case"local-candidate":if("prflx"===t.candidateType){let e=t.networkType?t.networkType.toUpperCase():"";this.reportNetworkInfo(t.ip||t.address,e)}}})),e.lastStats=i,r}report(e){if("staging"!==this.env){if(e.param){const t=e.param.mediaTrack;if(t){const{contentHint:i,enabled:r,id:n,kind:s,label:a,muted:o}=t,c={contentHint:i,enabled:r,id:n,kind:s,label:a,muted:o};e.param.mediaTrack=c}e.param=JSON.stringify(e.param)}this.msgs.push({contentType:"ActionEvent",result:0,reason:"",timestamp:Date.now(),timeConsuming:0,...e})}}send(){if(!1===navigator.onLine)return;if(!this.callId)return;const e=Date.now(),t=this.msgs.map((t=>(["RuntimeInfo","NetworkInfo","ActionEvent"].includes(t.contentType)&&Object.assign(t,{channelIds:JSON.stringify([this.channelId]),callIds:JSON.stringify([this.callId])}),{clientTime:e,msgId:"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})),msgBody:{channelId:this.channelId,callId:this.callId,...t}}))),i=this.msgs.length,n=C([this.uid,this.channelId]),a=C(["i!believe@kwai#laotie",this.appId,this.uid,n,e,"wefd8g7345kj09dh345r8yn2k3598eu945rh3489"]),o=`${v[this.env]}/report_open?app=${this.appId}&user=${this.uid}&device=${n}&timestamp=${e}&sign=${a}`;this.httpRequest.post(o,{msgs:t},s.ContentType.Json).then((e=>{this.msgs.splice(0,i)})).catch((e=>{console.log(`[${r()} report data fail:${e}`)}))}}},3405:(e,t,i)=>{const r=i(485),n=i(5547),s=i(201),a=i(4982),{AudioSource:o}=i(8567),{isAndroid:c,isIOS:u}=i(5237),d=i(2951),l=i(7247),{sendAudioStats:h,sendVideoStats:p,recAudioStats:f,recVideoStats:A}=i(220),{ClientError:m,SourceType:g,DeviceKind:T,DeviceState:v,DeviceEvent:C,MediaType:E,TrackEvent:S,TrackInternalEvent:x,AudioEvent:b,SourceEvent:y,ActionEventId:_,ActionEventResult:I}=i(9648),R=i(297);function w(e,t){if("default"!==e)return s.deviceInfoMap.has(e)?e:void 0;{let i=`${e}_${t}`,r=s.deviceInfoMap.get(i);if(void 0===r)return;for([key,info]of s.deviceInfoMap.entries())if(key!==i&&info.device.kind===t&&info.device.groupId===r.device.groupId)return key}}const P="ended",D="mute",k="unmute";class O extends r{constructor(e,t){super(),this.readyPlay=!1,this.isPlaying=!1,this.mediaTrack=e,this.trackMediaType=e.kind,this.trackId=this.mediaTrack.id,this.view=null,this.videoElement=null,this.audioElement=null,this.container=null,this.enable=!0,this.playConfig=null,this.handleTrackEvent=this.handleTrackEvent_.bind(this),this.mediaTrack&&this.addTrackEventListener(),this.sourceType=void 0===t?g.PEOPLE:t}getTrackId(){return this.trackId}getMediaStreamTrack(){return this.mediaTrack}getSourceType(){return this.sourceType}getMediaType(){return this.trackMediaType}play(e,t){this.view&&this.stop(),this.playConfig=t,this.container=document.createElement("div"),this.container.style="width: 100%; height: 100%; position: relative; overflow: hidden; background-color: black;",this.videoElement=document.createElement("video"),this.videoElement.style="width: 100%; height: 100%; position: absolute; left: 0px; top: 0px;",this.videoElement.muted=!0,this.videoElement.setAttribute("id",this.mediaTrack.id),this.videoElement.setAttribute("playsinline","playsinline"),this.videoElement.setAttribute("autoplay","autoplay"),this.videoElement.addEventListener("resize",(()=>{this.videoElement&&l.debug(`[Track] video size changed to ${this.videoElement.videoWidth}x${this.videoElement.videoHeight}`)})),t&&(t.mirror&&(this.videoElement.style.transform="rotateY(180deg)"),t.fit?this.videoElement.style.objectFit=t.fit:this.videoElement.style.objectFit="cover",t.controls&&this.videoElement.setAttribute("controls","controls")),this.container.appendChild(this.videoElement),this.view=e,this.view.appendChild(this.container),this.videoElement.addEventListener("canplay",(()=>{if(this.videoElement){let e=this.mediaTrack?this.mediaTrack.kind:void 0;l.debug(`[Track] can start play mediaType:${e} trackId:${this.getTrackId()}`),this.videoElement.play()}})),this.videoElement.srcObject=new MediaStream([this.mediaTrack]),this.readyPlay=!0}stop(){l.debug(`[Track] type:${this.trackMediaType} stop play:${this.readyPlay}`),this.readyPlay?(this.view&&(this.container&&(this.videoElement&&(this.videoElement.pause(),this.container.removeChild(this.videoElement)),this.view.removeChild(this.container)),this.videoElement=null,this.container=null,this.view=null),this.audioElement&&(this.audioElement.pause(),this.audioElement=null),this.isPlaying=!1,this.readyPlay=!1):l.debug(`[Track] ${this.trackMediaType} has been stoped`)}addTrackEventListener(){l.debug(`[Track] addTrackEventListener track:${this.mediaTrack.id} kind:${this.mediaTrack.kind}`),this.mediaTrack.addEventListener(P,this.handleTrackEvent),this.mediaTrack.addEventListener(D,this.handleTrackEvent),this.mediaTrack.addEventListener(k,this.handleTrackEvent)}removeTrackEventListener(){l.debug(`[Track] removeTrackEventListener track:${this.mediaTrack.id} kind:${this.mediaTrack.kind}`),this.mediaTrack.removeEventListener(P,this.handleTrackEvent),this.mediaTrack.removeEventListener(D,this.handleTrackEvent),this.mediaTrack.removeEventListener(k,this.handleTrackEvent)}handleTrackEvent_(e){switch(e.type){case P:l.debug(`[Track] track:${this.mediaTrack.id} kind:${this.mediaTrack.kind} is ended`),this.emit(S.TRACK_ENDED,this.trackMediaType,this.sourceType,this.trackId);break;case D:l.debug(`[Track] track:${this.mediaTrack.id} kind:${this.mediaTrack.kind} is muted`);break;case k:l.debug(`[Track] track:${this.mediaTrack.id} kind:${this.mediaTrack.kind} is unmuted`)}}}class M extends O{constructor(e,t){super(e,t),d.report({eventId:_.CREATE_MEDIA_STREAM,param:{mediaTrack:e}}),this._enableMutex=new R("localTrack")}async setEnabled(e){this._enableMutex.lock();try{if(this.enable!==e){this.enable=e,this.mediaTrack.enabled=e;let t=e?x.ENABLE_TRACK:x.DISABLE_TRACK;await this.emitEvent(t,this.mediaTrack,this.trackMediaType,this.sourceType)}}catch(e){throw e}finally{this._enableMutex.unlock()}}getTrackLabel(){if(this.mediaTrack)return this.mediaTrack.label}close(){l.debug(`[LocalTrack] type:${this.trackMediaType} close play:${this.readyPlay}`),d.report({eventId:_.CLOSE_MEDIA_STREAM,param:{mediaTrack:this.mediaTrack}}),this.mediaTrack||l.warn(`[LocalTrack] type:${this.trackMediaType} has been closed`),this.removeTrackEventListener(),this.mediaTrack.stop(),super.stop()}stop(){d.report({eventId:_.STOP_STREAM,param:{mediaTrack:this.mediaTrack}}),super.stop()}async emitEvent(e,...t){try{await this.asyncEmit(e,...t)}catch(t){throw l.error(`[LocalTrack] emitEvent asyncEmit event:${e} failed because of error:${t}`),t}}getStats(){const e="audio"===this.mediaTrack.kind?h:p;return this._publish&&this._stats||e}}class B extends M{constructor(e,t){super(e,t.sourceType),this._originTrack=e,this.config=t,t.optimizationMode&&this.setOptimizationMode(t.optimizationMode).then((()=>{l.debug(`[LocalVideoTrack] constructor set optimization mode:${t.optimizationMode} success`)})).catch((e=>{l.error(`[LocalVideoTrack] constructor set optimization mode:${t.optimizationMode} failed`)}))}play(e,t){l.debug("[LocalVideoTrack] play"),super.play(e,t)}close(){this._originTrack&&this._originTrack.stop(),super.close()}setOptimizationMode(e){return l.debug(`[LocalVideoTrack] setOptimizationMode mode:${e}`),!this.mediaTrack||"balanced"!==e&&"motion"!==e&&"detail"!==e?(l.debug(`[LocalVideoTrack] setOptimizationMode set optimization mode:${e} failed`),Promise.reject(m.SET_OPTIMIZATION_MODE_FAILED)):"contentHint"in this.mediaTrack?(this.mediaTrack.contentHint=e,this.mediaTrack.contentHint!==e?(l.debug(`[LocalVideoTrack] setOptimizationMode set optimization mode:${e} failed`),Promise.reject(m.SET_OPTIMIZATION_MODE_FAILED)):this.emitEvent(x.SET_OPTIMIZATION_MODE,this.mediaTrack,this.trackMediaType,this.sourceType,e)):(l.debug("[LocalVideoTrack] setOptimizationMode contentHint attribute not supported"),Promise.reject(m.NOT_SUPPORTED))}async clone(e){let t={};(e=e||this.config.encoderConfig).width&&e.height&&(t.width=e.width,t.height=e.height),e.frameRate&&(t.frameRate=e.frameRate);let i={encoderConfig:t};this.config.deviceId&&(i.deviceId=this.config.deviceId);try{if("firefox"===n.browserDetails.browser)return l.debug("[Track] clone track by recreating camera video"),await s.createCameraVideoTrack(i);{let e=this._originTrack.clone();return navigator.mediaDevices.getSupportedConstraints().aspectRatio&&(t=Object.assign(t,{aspectRatio:t.width/t.height})),await e.applyConstraints(t),e}}catch(e){throw l.error(`[Track] fail to clone because of error:${e}`),e}}setMediaTrack(e){l.debug("[LocalVideoTrack] setMediaTrack"),this.mediaTrack!==e&&(this.mediaTrack&&this.removeTrackEventListener(),this.mediaTrack=e,this.mediaTrack&&this.addTrackEventListener(),this.readyPlay&&this.play(this.view,this.playConfig))}async recreateMediaTrack(){try{let e=await s.createCameraVideoTrack(this.config);this.setMediaTrack(e),this._originTrack=e,l.debug("[LocalVideoTrack] recreateMediaTrack success")}catch(e){throw l.error("[LocalVideoTrack] recreateMediaTrack failed"),e}}async setBeautyEffect(e,t){if(!a.isSupported())throw l.warning("[LocalVideoTrack] current browser not support beautyEffect"),new Error("[LocalVideoTrack] current browser not support beautyEffect");if(u()||c())throw new Error("[LocalVideoTrack] can not enable beauty effect on mobile device");if(e){if(this._rtcBeautyPlugin||(this._rtcBeautyPlugin=new a,this._rtcBeautyPlugin.onOverload=()=>{this.emit(y.BEAUTY_EFFECT_OVERLOAD)}),this._rtcBeautyPlugin.setBeautyParam(t),this.mediaTrack==this._originTrack){const e=await this._rtcBeautyPlugin.generateBeautyTrack(this.mediaTrack);this.setMediaTrack(e)}l.debug("[LocalVideoTrack] open beautyEffect")}else this.setMediaTrack(this._originTrack),this._rtcBeautyPlugin.destroy(),this._rtcBeautyPlugin=null,l.debug("[LocalVideoTrack] close beautyEffect");this.emitEvent(x.REPLACE_TRACK,this.mediaTrack,this.trackMediaType,this.sourceType)}async _beautyCheck(){this._rtcBeautyPlugin&&await this.setBeautyEffect(!0)}getCurrentFrameData(){if(!this.videoElement)return new ImageData(2,2);let e=document.createElement("canvas");e.width=this.videoElement.videoWidth,e.height=this.videoElement.videoHeight;var t=e.getContext("2d");if(!t)return l.error("[LocalVideoTrack] create canvas context failed!"),new ImageData(2,2);t.drawImage(this.videoElement,0,0,e.width,e.height);let i=t.getImageData(0,0,e.width,e.height);return e.remove(),i}}class U extends M{constructor(e,t){super(e,t.sourceType),this.config=t,this.speakerDevice=void 0,this.onDefaultSpeakerChanged=this.onDefaultSpeakerChanged_.bind(this),this.onSpeakerChanged=this.onSpeakerChanged_.bind(this),this._source=new o(e)}onDefaultSpeakerChanged_(e){l.debug("[LocalAudioTrack] onDefaultSpeakerChanged deviceInfo:",e,"device:",this.speakerDevice),this.isPlaying&&this.audioElement&&e.device.deviceId===this.speakerDevice&&(this.audioElement.pause(),this.audioElement=null)}onSpeakerChanged_(e){l.debug("[LocalAudioTrack] onSpeakerChanged deviceInfo:",e,"device:",this.speakerDevice),this.isPlaying&&this.audioElement&&e.device.deviceId===this.speakerDevice&&e.state===v.INACTIVE&&(this.audioElement.pause(),this.audioElement=null)}play(){l.debug("[LocalAudioTrack] play"),null===this.audioElement&&(this.audioElement=document.createElement(E.AUDIO),this.audioElement.srcObject=new MediaStream([this.mediaTrack])),this.isPlaying||(s.prependListener(C.DEFAULT_SPEAKER_CHANGED,this.onDefaultSpeakerChanged),s.prependListener(C.SPEAKED_CHANGED,this.onSpeakerChanged)),this.speakerDevice=void 0===this.speakerDevice?"default":this.speakerDevice;let e=this.audioElement.play();void 0!==e&&e.catch((async e=>{l.error("[RemoteAudioTrack] detect webaudio autoplay failed");let t=await navigator.mediaDevices.getUserMedia({audio:!0,video:!1});this.audioElement.play(),t.getTracks().forEach((e=>e.stop()))})).then((()=>{})),this.isPlaying=!0,this.readyPlay=!0}stop(){super.stop(),s.off(C.DEFAULT_SPEAKER_CHANGED,this.onDefaultSpeakerChanged),s.off(C.SPEAKED_CHANGED,this.onSpeakerChanged)}async setPlaybackDevice(e){l.debug(`[LocalAudioTrack] setPlaybackDevice deviceId:${e}`);let t=w(e,T.AUDIO_OUTPUT);if("chrome"!==n.browserDetails.browser)throw m.NOT_SUPPORTED;null===this.audioElement&&(this.audioElement=document.createElement(E.AUDIO),this.audioElement.srcObject=new MediaStream([this.mediaTrack]));try{await this.audioElement.setSinkId(t),this.speakerDevice=e,this.isPlaying&&this.audioElement.paused&&this.audioElement.play(),l.debug(`[LocalAudioTrack] setPlaybackDevice success deviceId:${e}`)}catch(t){throw l.error(`[LocalAudioTrack] setPlaybackDevice failed for deviceId:${e} because of error:${t}`),m.NOT_SUPPORTED}}getVolumeLevel(){return this._source.getAccurateVolumeLevel()}setVolume(e){if(this._source.setVolume(e/100),this.audioElement){let t=Math.max(0,Math.min(100,e));this.audioElement.volume=t/100}else this._source.setVolume(e/100)}setAudioFrameCallback(e,t=4096){e?(this._source.startGetAudioBuffer(t),this._source.removeAllListeners(b.ON_AUDIO_BUFFER),this._source.on(b.ON_AUDIO_BUFFER,e)):(this._source.removeAllListeners(b.ON_AUDIO_BUFFER),this._source.stopGetAudioBuffer())}}class N extends O{constructor(e,t,i){super(t,i),this.uid=e}getUserId(){return this.uid}stop(){d.report({eventId:_.STOP_STREAM,param:{mediaTrack:this.mediaTrack}}),super.stop()}getStats(){const e="audio"===this.mediaTrack.kind?f:A;return this._stats||e}}class L extends N{constructor(e,t,i){super(e,t,i),this.speakerDevice=void 0,this.needResetDevice=!1,this.onDefaultSpeakerChanged=this.onDefaultSpeakerChanged_.bind(this),this.onSpeakerChanged=this.onSpeakerChanged_.bind(this),this._source=new o(t),d.report({eventId:_.REMOTE_CREATE_MEDIA_STREAM,param:{remote_user_id:e,remote_video_simulcast_id:0,remote_video_source_type:Number(i===g.CONTENT),mediaTrack:t}})}onDefaultSpeakerChanged_(e){l.debug("[RemoteAudioTrack] onDefaultSpeakerChanged deviceInfo:",e,"device:",this.speakerDevice),this.isPlaying&&this.audioElement&&e.device.deviceId===this.speakerDevice&&(this.audioElement.pause(),this.audioElement=null,this.needResetDevice=!0)}onSpeakerChanged_(e){l.debug("[RemoteAudioTrack] onSpeakerChanged deviceInfo:",e,"device:",this.speakerDevice),this.isPlaying&&this.audioElement&&e.device.deviceId===this.speakerDevice&&e.state===v.INACTIVE&&(this.audioElement.pause(),this.audioElement=null,this.needResetDevice=!0)}play(){null===this.audioElement&&(this.audioElement=document.createElement(E.AUDIO),this.audioElement.srcObject=new MediaStream([this.mediaTrack])),this.isPlaying||(s.prependListener(C.DEFAULT_SPEAKER_CHANGED,this.onDefaultSpeakerChanged),s.prependListener(C.SPEAKED_CHANGED,this.onSpeakerChanged)),this.speakerDevice=void 0===this.speakerDevice?"default":this.speakerDevice;let e=this.audioElement.play();void 0!==e&&e.catch((async e=>{l.debug("RemoteAudioTrack] detect webaudio autoplay failed");let t=await navigator.mediaDevices.getUserMedia({audio:!0,video:!1});this.audioElement.play(),t.getTracks().forEach((e=>e.stop()))})).then((()=>{})),this.isPlaying=!0,this.readyPlay=!0,this._source.connect(),d.report({eventId:_.UNMUTE_REMOTE_AUDIO_STREAM,param:{participants:[{user_id:this.uid}]}})}stop(){super.stop(),s.off(C.DEFAULT_SPEAKER_CHANGED,this.onDefaultSpeakerChanged),s.off(C.SPEAKED_CHANGED,this.onSpeakerChanged),this._source.disconnect(),d.report({eventId:_.MUTE_REMOTE_AUDIO_STREAM,param:{participants:[{user_id:this.uid}]}})}async setPlaybackDevice(e){let t=w(e,T.AUDIO_OUTPUT);if(l.debug(`[RemoteAudioTrack] setPlaybackDevice deviceId:${e} actualDeviceId:${t}`),void 0===t)throw m.INVALID_DEVICE;if("chrome"!==n.browserDetails.browser)throw m.NOT_SUPPORTED;null===this.audioElement&&(this.audioElement=document.createElement(E.AUDIO),this.audioElement.srcObject=new MediaStream([this.mediaTrack]));try{await this.audioElement.setSinkId(t),this.speakerDevice=e,this.isPlaying&&this.audioElement.paused&&this.audioElement.play(),this.needResetDevice=!1,l.debug(`[RemoteAudioTrack] setPlaybackDevice success deviceId:${e}`)}catch(t){throw l.error(`[RemoteAudioTrack] setPlaybackDevice fail deviceId:${e} error:${t}`),m.NOT_SUPPORTED}}setMediaTrack(e){l.debug("[RemoteAudioTrack] setMediaTrack"),e!=this.mediaTrack&&(this.mediaTrack&&this.removeTrackEventListener(),this.mediaTrack=e,this.mediaTrack&&this.addTrackEventListener(),this.isPlaying&&!this.needResetDevice&&(this.stop(),void 0!==this.speakerDevice&&"chrome"===n.browserDetails.browser&&this.setPlaybackDevice(this.speakerDevice),this._source.updateTrack(e),this.play()))}getVolumeLevel(){return this._source.getAccurateVolumeLevel()}setVolume(e){if(this._source.setVolume(e/100),this.audioElement){let t=Math.max(0,Math.min(100,e));this.audioElement.volume=t/100}else this._source.setVolume(e/100)}setAudioFrameCallback(e,t=4096){e?(this._source.startGetAudioBuffer(t),this._source.removeAllListeners(b.ON_AUDIO_BUFFER),this._source.on(b.ON_AUDIO_BUFFER,e)):(this._source.removeAllListeners(b.ON_AUDIO_BUFFER),this._source.stopGetAudioBuffer())}}class F{constructor(e){this.track=e,this.uid=null}}e.exports={LocalVideoTrack:B,LocalAudioTrack:U,RemoteVideoTrack:class extends N{constructor(e,t,i){super(e,t,i),this.config=null,d.report({eventId:_.REMOTE_CREATE_MEDIA_STREAM,param:{remote_user_id:e,mediaTrack:t}})}play(e,t){super.play(e,t),d.report({eventId:_.START_STREAM,param:{participants:[{user_id:this.uid}]}})}stop(){d.report({eventId:_.STOP_STREAM,param:{participants:[{user_id:this.uid}]}}),super.stop()}setMediaTrack(e){l.debug("[RemoteVideoTrack] setMediaTrack"),this.mediaTrack!==e&&(this.mediaTrack&&this.removeTrackEventListener(),this.mediaTrack=e,this.mediaTrack&&this.addTrackEventListener(),this.play(this.view,this.playConfig))}getCurrentFrameData(){if(!this.videoElement)return new ImageData(2,2);let e=document.createElement("canvas");e.width=this.videoElement.videoWidth,e.height=this.videoElement.videoHeight;var t=e.getContext("2d");if(!t)return l.error("[RemoteVideoTrack] create canvas context failed!"),new ImageData(2,2);t.drawImage(this.videoElement,0,0,e.width,e.height);let i=t.getImageData(0,0,e.width,e.height);return e.remove(),i}},RemoteAudioTrack:L,CameraVideoTrack:class extends B{constructor(e,t){super(e,t)}async setEnabled(e){if(l.debug(`[CameraVideoTrack] setEnabled enable:${e}`),this._enableMutex.lock(),this.enable!==e){if(this.enable=e,e)try{this.mediaTrack.readyState!==P&&l.warn("[CameraVideoTrack] setEnabled media track has not been stoped"),await this.recreateMediaTrack(),await this._beautyCheck()}catch(t){throw l.error(`[CameraVideoTrack] setEnable failed enable:${e}`),this._enableMutex.unlock(),t}else this.mediaTrack.stop(),this._originTrack.stop();try{let t=e?x.ENABLE_TRACK:x.DISABLE_TRACK;await this.emitEvent(t,this.mediaTrack,this.trackMediaType,this.sourceType)}catch(t){throw l.error(`[CameraVideoTrack] setEnable emit event failed enable:${e}`),t}finally{this._enableMutex.unlock()}}}async setDevice(e){try{if(this.config.deviceId=w(e,T.VIDEO_INPUT),void 0===this.config.deviceId)throw m.INVALID_DEVICE;this.enable&&(this.mediaTrack.stop(),await this.recreateMediaTrack(),this._rtcBeautyPlugin?this.setBeautyEffect(!0):await this.emitEvent(x.REPLACE_TRACK,this.mediaTrack,this.trackMediaType,this.sourceType)),l.debug(`[CameraVideoTrack] setDevice set device success deviceId:${e}`)}catch(t){throw l.error(`[CameraVideoTrack] setDevice set device failed deviceId:${e}`),t}}},MicrophoneAudioTrack:class extends U{constructor(e,t){super(e,t),this.speakerDevice=void 0,this.onDefaultSpeakerChanged=this.onDefaultSpeakerChanged_.bind(this),this.onSpeakerChanged=this.onSpeakerChanged_.bind(this)}async setEnabled(e){if(l.debug(`[MicrophoneAudioTrack] setEnabled enable:${e}`),this._enableMutex.lock(),this.enable!==e){if(this.enable=e,e)try{await this.recreateMediaTrack()}catch(t){throw l.error(`[MicrophoneAudioTrack] setEnable failed for enable:${e}`),this._enableMutex.unlock(),t}else this.mediaTrack.stop();try{let t=e?x.ENABLE_TRACK:x.DISABLE_TRACK;await this.emitEvent(t,this.mediaTrack,this.trackMediaType,this.sourceType)}catch(t){throw l.error(`[MicrophoneAudioTrack] emit event failed for enable:${e}`),t}finally{this._enableMutex.unlock()}}}setMediaTrack(e){e!=this.mediaTrack&&(this.mediaTrack&&this.removeTrackEventListener(),this.mediaTrack=e,this.mediaTrack&&this.addTrackEventListener(),this.isPlaying&&(this.stop(),this.play()))}async setDevice(e){try{if(this.config.deviceId=w(e,T.AUDIO_INPUT),void 0===this.config.deviceId)throw m.INVALID_DEVICE;this.enable&&(this.mediaTrack.stop(),await this.recreateMediaTrack(),await this.emitEvent(x.REPLACE_TRACK,this.mediaTrack,this.trackMediaType,this.sourceType)),l.debug(`[MicrophoneAudioTrack] setDevice set device success deviceId:${e}`)}catch(t){throw l.error(`[MicrophoneAudioTrack] setDevice set device fail deviceId:${e}`),t}}async recreateMediaTrack(){try{let e=await s.createMicrophoneAudioTrack(this.config);this.setMediaTrack(e),this._source.updateTrack(this.mediaTrack),l.debug("[MicrophoneAudioTrack] recreateMediaTrack success")}catch(e){throw l.error("[MicrophoneAudioTrack] recreateMediaTrack failed"),e}}},BufferSourceAudioTrack:class extends U{constructor(e,t,i){super(t.createOutputTrack(),i),this.source=e,this._bufferSource=t,this._bufferSource.on(b.AUDIO_SOURCE_STATE_CHANGE,(e=>{this.emit(y.SOURCE_STATE_CHANGE,e)}));try{this._mediaStreamTrack=this._source.createOutputTrack()}catch(e){}}get currentState(){return this._bufferSource.currentState}get duration(){return this._bufferSource.duration}getCurrentTime(){return this._bufferSource.currentTime}startProcessAudioBuffer(e){e&&this._bufferSource.updateOptions(e),this._bufferSource.startProcessAudioBuffer()}pauseProcessAudioBuffer(){this._bufferSource.pauseProcessAudioBuffer()}seekAudioBuffer(e){this._bufferSource.seekAudioBuffer(e)}resumeProcessAudioBuffer(){this._bufferSource.resumeProcessAudioBuffer()}stopProcessAudioBuffer(){this._bufferSource.stopProcessAudioBuffer()}},RemoteActiveAudioTrack:class extends r{constructor(){super(),console.log("[RemoteActiveAudioTrack] constructor"),this.remoteAudioTracks=new Map,this.muteSpeakers=new Set,this.mediaStreams=new Map}setMediaStream(e){this.mediaStream!=e&&(this.mediaStream=e,this.remoteAudioTracks.clear(),this.mediaStream.getAudioTracks().forEach((e=>{let t=new L("any",e,g.PEOPLE);this.remoteAudioTracks.set(e.id,new F(t))})))}addMediaStream(e){if(l.debug(`[RemoteActiveAudioTrack] addMediaStream size:${e.getAudioTracks().length}`),!this.mediaStreams.has(e.id)){this.mediaStreams.set(e.id,e);let t=e.getAudioTracks()[0],i=new L("any",t,g.PEOPLE);this.remoteAudioTracks.set(e.id,new F(i))}}async muteRemoteAudio(e){l.debug(`[RemoteActiveAudioTrack] muteRemoteAudio uid:${e}`);try{await this.asyncEmit(x.MUTE_ACTIVE_AUDIO_TRACK,e,!0)}catch(e){throw e}this.muteSpeakers.add(e)}async unmuteRemoteAudio(e){l.debug(`[RemoteActiveAudioTrack] unmuteRemoteAudio uid:${e}`);try{await this.asyncEmit(x.MUTE_ACTIVE_AUDIO_TRACK,e,!1)}catch(e){throw e}this.muteSpeakers.delete(e)}play(){this.remoteAudioTracks.forEach(((e,t)=>{e.track.play()}))}stop(){this.remoteAudioTracks.forEach(((e,t)=>{e.track.isPlaying&&e.track.stop()}))}getVolumeLevels(){l.debug("[RemoteActiveAudioTrack] getVolumeLevels");let e=new Map;return this.remoteAudioTracks.forEach(((t,i)=>{if(null!==t.uid){let i=t.track.getVolumeLevel();e.set(t.uid,i)}})),e}setVolume(e){l.debug(`[RemoteActiveAudioTrack] setVolume value:${e}`),this.remoteAudioTracks.forEach(((t,i)=>{t.track.setVolume(e)}))}async setPlaybackDevice(e){l.debug(`[RemoteActiveAudioTrack] setPlaybackDevice deviceId:${e}`);for(let t of this.remoteAudioTracks.values())try{await t.track.setPlaybackDevice(e)}catch(e){l.error(`[RemoteActiveAudioTrack] setPlaybackDevice error:${e}`)}}updateTrackRelation(e){l.debug(`[RemoteActiveAudioTrack] updateTrackRelation trackRelation:${JSON.stringify(e)} size:${this.remoteAudioTracks.size}`),this.remoteAudioTracks.forEach(((t,i)=>{t.uid=i in e?e[i]:null}))}}}},220:(e,t,i)=>{const{SourceType:r,ACodeC:n,VCodeC:s}=i(9648);let a={sendVolumeLevel:0,sendBitrate:0,sendBytes:0,sendPackets:0,sendPacketsLost:0,currentPacketLossRate:0,rttMs:0},o={sendBytes:0,sendBitrate:0,sendPackets:0,sendPacketsLost:0,sendResolutionHeight:0,sendResolutionWidth:0,captureResolutionHeight:0,captureResolutionWidth:0,sendFrameRate:0,targetSendBitrate:0,currentPacketLossRate:0,rttMs:0},c={receiveBitrate:0,receiveLevel:0,receiveBytes:0,receivePackets:0,receivePacketsLost:0,packetLossRate:0,currentPacketLossRate:0},u={receiveBitrate:0,receiveBytes:0,receivePackets:0,receivePacketsLost:0,receiveResolutionHeight:0,receiveResolutionWidth:0,packetLossRate:0,currentPacketLossRate:0,receiveFrameRate:0,decodeFrameRate:0,renderFrameRate:0};e.exports={sendAudioStats:a,sendVideoStats:o,recAudioStats:c,recVideoStats:u,trackStats:new class{setSendMediaTrack(e,t,i,r){this.publishInfo=e,1===i?(e.audioTrack&&(e.enableAudio[0]?this.setSendAudioTrackStats(t):e.audioTrack._stats=a),e.videoTrack&&(e.enableVideo[0]?this.setSendVideoTrackStats(t,r):e.videoTrack._stats=o)):(e.audioTrack&&1===r&&(e.enableAudio[0]?this.setSendAudioTrackStats(t):e.audioTrack._stats=a),e.videoTrack&&1===r?e.enableVideo[0]?this.setSendVideoTrackStats(t,r):e.videoTrack._stats=o:e.lowStreamVideoTrack&&0===r&&(e.enableVideo[0]?this.setSendVideoTrackStats(t,r):e.lowStreamVideoTrack._stats=o))}setRecMediaTrack(e,t,i){this.remoteUser=e,this.subscribeInfo=t;const n=e.user;t.enableAudio[0]?this.setRecAudioTrackStats(i):t.sourceType===r.CONTENT?n.contentAudioTrack&&(n.contentAudioTrack._stats=c):n.audioTrack&&(n.audioTrack._stats=c),t.enableVideo[0]?this.setRecVideoTrackStats(i):t.sourceType===r.CONTENT?n.contentVideoTrack&&(n.contentVideoTrack._stats=u):n.videoTrack&&(n.videoTrack._stats=u)}setSendAudioTrackStats({AtxMetaData:e,AtxMediaInfo:t}){if(this.publishInfo.audioTrack){let i;for(const t in n)n[t]===e.encodingStreamType&&(i=t);this.publishInfo.audioTrack._stats={...a,codecType:i,sendVolumeLevel:e.captureVolume,sendBitrate:t.sendKbps,sendBytes:Math.round(t.sendKbps/8),sendPackets:t.sendPktsCount,sendPacketsLost:t.sendPktsLostCount,currentPacketLossRate:t.pktsLostRate/1e3}}}setSendVideoTrackStats({VtxMetaData:e,VtxMediaInfo:t},i){if(this.publishInfo.videoTrack){let r;for(const t in s)s[t]===e.encodingStreamType&&(r=t);const n={...o,codecType:r,sendBytes:Math.round(t.sendKbps/8),sendBitrate:t.sendKbps,sendPackets:t.sendPktsCount,sendPacketsLost:t.sendPktsLostCount,sendResolutionHeight:e.encHeight,sendResolutionWidth:e.encWidth,captureResolutionHeight:e.inputHeight,captureResolutionWidth:e.inputWidth,sendFrameRate:Math.round(t.sendFpsX10/10),targetSendBitrate:Math.round(t.totalSendBytes/8),currentPacketLossRate:t.pktsLostRate/1e3};1===i?this.publishInfo.videoTrack._stats=n:this.publishInfo.lowStreamVideoTrack._stats=n}}setRecAudioTrackStats({ArxMetaData:e,ArxMediaInfo:t}){let i;for(const t in n)n[t]===e.encodingStreamType&&(i=t);const s={...c,codecType:i,receiveLevel:e.playVolume,receiveBitrate:t.recvKbps,receiveBytes:Math.round(t.recvKbps/8),receivePackets:t.recvPktsCount,currentPacketLossRate:t.pktsLostRate/1e3};this.subscribeInfo.sourceType===r.CONTENT?this.remoteUser.user.contentAudioTrack&&(this.remoteUser.user.contentAudioTrack._stats=s):this.remoteUser.user.audioTrack&&(this.remoteUser.user.audioTrack._stats=s)}setRecVideoTrackStats({VrxMetaData:e,VrxMediaInfo:t}){let i;for(const t in s)s[t]===e.encodingStreamType&&(i=t);const n=Math.round(t.recvFpsX10/10),a={...u,codecType:i,receiveBitrate:t.recvKbps,receiveBytes:Math.round(t.recvKbps/8),receivePackets:t.recvPktsCount,currentPacketLossRate:t.pktsLostRate/1e3,receiveResolutionHeight:e.decHeight,receiveResolutionWidth:e.decWidth,receiveFrameRate:n,decodeFrameRate:n,renderFrameRate:n};this.subscribeInfo.sourceType===r.CONTENT?this.remoteUser.user.contentVideoTrack&&(this.remoteUser.user.contentVideoTrack._stats=a):this.remoteUser.user.videoTrack&&(this.remoteUser.user.videoTrack._stats=a)}}}},297:(e,t,i)=>{const r=i(7247);e.exports=class{constructor(e){this.name=e,this.lockQueue=[],this.locked=!1}async lock(){if(r.debug(`[AWaitLock] ${this.name} lock:${this.locked}`),this.locked){let e=this;r.debug(`[AWaitLock] ${this.name} lock queue size:${this.lockQueue.length}`),await new Promise((t=>{e.lockQueue.push(t)}))}return this.locked=!0,!0}unlock(){this.locked=!1;let e=this.lockQueue.shift();r.debug(`[AWaitLock] ${this.name} unlock lock queue size:${this.lockQueue.length}`),e&&e()}}},9516:(e,t,i)=>{"use strict";i.r(t),i.d(t,{ActionInfo:()=>a,RtcAction:()=>o,PublishInfo:()=>c,SubscribeInfo:()=>u,ActiveAudioTrack:()=>d,AryaRTCUser:()=>l});const r=i(485),n=i(297);function s(e,t){return`${e}_${t}`}class a{constructor(e,t,i,r,n){this.seq=e,this.ack=!1,this.actionName=t,this.uid=i,this.sourceType=r,this.simulcastLayer=n,this.event=null}}class o{constructor(){this.actionInfos=new Map}push(e){this.removeActionInternal(e),this.actionInfos.set(s(e.actionName,e.seq),e)}get(e,t){return this.actionInfos.get(s(e,t))}remove(e,t){this.actionInfos.delete(s(e,t))}clear(){this.actionInfos.clear()}removeActionInternal(e){for(let[t,i]of this.actionInfos)e.actionName===i.actionName&&e.uid===i.uid&&e.sourceType===i.sourceType&&e.simulcastLayer===i.simulcastLayer&&this.actionInfos.delete(t)}}class c{constructor(e,t){this.peer=null,this.lowStreamPeer=null,this.sourceType=e,this.enableAudio=[!1,!0],this.enableVideo=[!1,!0],this.publish=[!1,!0],this.publishLowStream=[!1,!0],this.videoConfig=null,this.audioConfig=null,this.audioTrack=null,this.videoTrack=null,this.lowStreamVideoTrack=null,this.iceRestart=!1,this.event=new r,this.mutex=new n(`pub_${t}_${e}`)}}class u{constructor(e,t){this.peer=null,this.sourceType=e,this.enableAudio=[!1,!0],this.enableVideo=[!1,!0],this.subscribe=[!1,!0],this.iceRestart=!1,this.mutex=new n(`sub_${t}_${e}`)}}class d{constructor(e){this.track=e,this.uid=null}}class l{constructor(e){this.user=e,this.publishInfos=new Map,this.subscribeInfos=new Map,this.streamType=null}}},9648:(e,t,i)=>{"use strict";i.r(t),i.d(t,{ClientEvent:()=>r,SignalConnectionState:()=>n,SignalDisconnectedReason:()=>s,ContentKickedOffReason:()=>a,MediaType:()=>o,SourceType:()=>c,SimulcastLayer:()=>u,ClientError:()=>d,ClientRole:()=>l,PeerConnectionState:()=>h,PeerEvent:()=>p,PeerType:()=>f,DeviceKind:()=>A,DeviceState:()=>m,DeviceEvent:()=>g,TrackEvent:()=>T,TrackInternalEvent:()=>v,PublishContentState:()=>C,SignalHandlerEvent:()=>E,AudioEvent:()=>S,SourceEvent:()=>x,ActionEventResult:()=>b,PublishEvent:()=>y,ActionEventId:()=>_,VCodeC:()=>I,ACodeC:()=>R,AdaptionChangeReason:()=>w,DeviceError:()=>P,VideoProfile:()=>D,ScreenProfile:()=>k});const r={USER_JOINED:"user-joined",USER_LEFT:"user-left",USER_PUBLISHED:"user-published",USER_UNPUBLISHED:"user-unpublished",CONTENT_PUBLISH:"content-published",CONTENT_UNPUBLISHED:"content-unpublished",CONTENT_KICKED_OFF:"content-kicked-off",CONNECTION_STATE_CHANGE:"connection-state-change",STREAM_TYPE_CHANGED:"stream-type-changed",VOLUME_INDICATOR:"volume-indicator",ACTIVE_TRACK:"active-track",STREAM_TYPE_CHANGED:"stream-type-changed",EXCEPTION:"exception",ERROR:"error"},n={DISCONNECTED:"disconnected",CONNECTING:"connecting",CONNECTED:"connected",DISCONNECTING:"disconnecting",RECONNECTING:"reconnecting"},s={CHANNEL_BANNED:"channel_banned",LEAVE:"leave",SERVER_ERROR:"server_error",IP_BANNED:"ip_banned",NETWORK_ERROR:"network_error",UID_BANNED:"uid_banned",UNDEFINED:"undefined"},a={REJOIN:"rejoin",KICKED_OFF:"kicked_off"},o={AUDIO:"audio",VIDEO:"video"},c={PEOPLE:"people",CONTENT:"content"},u={LOWSTREAM:0,HIGHSTREAM:1},d={REPEATED_JOIN:"repeated_join",JOIN_FAILED:"join_failed",INVALID_USER:"invalid_user",INVALID_CHANNEL:"invalid_channel",FETCH_SPAWNER_ERROR:"fetch_spawner_error",SEND_SIGNAL_ERROR:"send_signal_error",GATEWAY_JOIN_ERROR:"gateway_join_error",GATEWAY_LEAVE_ERROR:"gateway_leave_error",INVALID_OPERATION:"invalid_operation",INVALID_PARAMS:"invalid_params",INVALID_LOCAL_TRACK:"invalid_local_track",TRACK_DISABLED:"track_disabled",TRACK_SOURCE_TYPE_CONFLICT:"tracks_source_type_conflict",TRACK_ALREADY_PUBLISHED:"track_already_published",SEND_OFFER_FAILED:"send_offer_failed",TRACK_NOT_PUBLISHED:"track_not_published",LOCAL_USER_NOT_IN_CHANNEL:"local_user_not_in_channel",REMOTE_USER_NOT_IN_CHANNEL:"remote_user_not_in_channel",INVALID_REMOTE_USER:"invalid_remote_user",INVALID_RESPONSE:"invalid_response",AUDIENCE_NOT_ALLOW_PUBLISH:"audience_not_allow_publish",SET_ROLE_FALIED:"set_role_failed",TRACK_ALREADY_SUBSCRIBED:"track_already_published",SWITCH_STREADM_TYPE_FAILED:"switch_stream_type_failed",SET_OFFER_FAILED:"set_offer_failed",TRACK_NOT_SUBSCRIBED:"track_not_subscribed",NOT_SUPPORTED:"not_supported",INVALID_DEVICE:"invalid_device",PERMISSION_DENIED:"permission_denied",NOT_SUPPORT_AUDIO:"not_supported_audio",CREATE_SOURCE_TRACK_FAILED:"create_source_track_failed",HTTP_POST_FALIED:"http_post_failed",SIGNAL_OPEN_FAILED:"signal_open_failed",SIGNAL_INVOKE_TIMEOUT:"signal_invoke_timeout",SIGNAL_NOT_CONNECTED:"signal_not_connected",SENDER_NOT_FOUND:"sender_not_found",TRACK_NOT_EXIST:"track_not_exist",TRACk_ALREADY_ADDED:"track_already_added",SET_OPTIMIZATION_MODE_FAILED:"set_optimization_mode_failed",ENABLE_TRACK_FAILED:"enable_track_failed",PUBLISH_LOW_STREAM_FAILED:"publish_low_stream_failed"},l={ANCHOR:"anchor",AUDIENCE:"audience"},h={NEW:"new",CONNECTING:"connecting",CONNECTED:"connected",DISCONNECTED:"disconnected",FAILED:"failed",CLOSED:"closed"},p={AUDIO_TRACK:"audio-track",VIDEO_TRACK:"video-track",MEDIA_STREAM:"media-stream",CONNECTION_STATE:"connection-state",SET_ANSWER_SUCCESS:"set-answer-success"},f={PUBLISH:"publish",SUBSCRIBE:"subscribe"},A={AUDIO_INPUT:"audioinput",VIDEO_INPUT:"videoinput",AUDIO_OUTPUT:"audiooutput"},m={ACTIVE:"ACTIVE",INACTIVE:"INACTIVE"},g={CAMERA_CHANGED:"camera-changed",SPEAKED_CHANGED:"speaker-changed",MICROPHONE_CHANGED:"microphone-changed",DEFAULT_SPEAKER_CHANGED:"default-speaker-changed",DEFAULT_MICROPHONE_CHANGED:"default-microphone-changed",COMMUNICATION_SPEAKER_CHANGED:"communication-speaker-changed",COMMUNICATION_MIROPHONE_CHANGED:"communication-microphone-changed"},T={FIRST_FRAME_DECODED:"first-frame-decoded",TRACK_ENDED:"track-ended"},v={ENABLE_TRACK:"enable_track",DISABLE_TRACK:"disable_track",REPLACE_TRACK:"replace_track",SET_OPTIMIZATION_MODE:"set_optimization_mode",MUTE_ACTIVE_AUDIO_TRACK:"mute_active_audio_track"},C={WAIT_PUBLISH_RESPONSE:0,PENDING_PUBLISH_CONTENT:1,PUBLISH_CONTENT_SUCCESS:2},E={RECONNECT_FAILED:"signal-reconnect-failed",CONNECTION_STATE:"signal-state"},S={AUDIO_SOURCE_STATE_CHANGE:"audio_source_state_change",RECEIVE_TRACK_BUFFER:"receive_track_buffer",ON_AUDIO_BUFFER:"on_audio_buffer"},x={SOURCE_STATE_CHANGE:"source-state-change",TRACK_ENDED:"track-ended",BEAUTY_EFFECT_OVERLOAD:"beauty-effect-overload"},b={OK:0,FAIL:1},y={OK:0,FAIL:1,CANCLE:2},_={NONE:0,INIT_SDK:101,SECHEDU_SERVICE_REQ:102,SECHEDU_SERVICE_RES:103,SIGNAL_REQ:104,SIGNAL_RES:105,SIGNAL_RECONNECT_REQ:107,SIGNAL_RECONNECT_RES:108,NETWORK_TYPE_CHANGED:109,KRTC_MEDIA_CONNECTED:110,KRTC_MEDIA_DISCONNECTED:111,SWITCH_FRONT_AND_BACK:113,KLIVE_MEDIA_CONNECTED:114,KLIVE_MEDIA_DISCONNECTED:115,CLIENT_ADDRESS:116,SERVER_ADDRESS:117,JOIN_CHANNEL:200,JOIN_CHANNEL_CALLBACK:201,LEAVE_CHANNEL:202,LEAVE_CHANNEL_CALLBACK:203,REJOIN_CHANNEL:204,SWITCH_CLIENT_ROLE:205,PARTICIPANT_ONLINE:206,PARTICIPANT_OFFLINE:207,LEAVE_CHANNEL_KICKED:208,MUTE_LOCAL_AUDIO_STREAM:300,UNMUTE_LOCAL_AUDIO_STREAM:301,MUTE_REMOTE_AUDIO_STREAM:302,UNMUTE_REMOTE_AUDIO_STREAM:303,MUTE_ALL_REMOTE_AUDIO_STREAM:304,UNMUTE_ALL_REMOTE_AUDIO_STREAM:305,DEFAULT_MUTE_ALL_REMOTE_AUDIO_STREAMS:306,DISABLE_VIDEO_TX:307,ENABLE_VIDEO_TX:308,MUTE_REMOTE_VIDEO_STREAM:309,UNMUTE_REMOTE_VIDEO_STREAM:310,PAUSE_ALL_REMOTE_VIDEO_STREAMS:311,RESUME_ALL_REMOTE_VIDEO_STREAMS:312,DEFAULT_UNSUBSCRIBE_REMOTE_VIDEO_STREAMS:313,DEFAULT_SUBSCRIBE_REMOTE_VIDEO_STREAMS:314,CREATE_MEDIA_STREAM:315,REMOTE_CREATE_MEDIA_STREAM:316,START_STREAM:317,STOP_STREAM:318,CLOSE_MEDIA_STREAM:319,CLOSE_REMOTE_MEDIA_STREAM:320,ENABLE_DUAL_STREAM_MODE:321,DISABLE_DUAL_STREAM_MODE:322,UNPUBLISH_VIDEO_STREAM:323,REPLACE_TRACK:324,FIRST_LOCAL_AUDIO_FRAME_PUBLISHED:325,FIRST_LOCAL_VIDEO_FRAME_PUBLISHED:326,FIRST_REMOTE_VIDEO_FRAME_DECODED:327,FIRST_REMOTE_VIDEO_FRAME_RENDERED:328,PUBLISH_VIDEO_STREAM:329,FIRST_REMOTE_AUDIO_FRAME_DECODED:330,FIRST_REMOTE_AUDIO_FRAME_RENDERED:331,RECEIVE_FIRST_AUDIO_PACKET:333,RECEIVE_FIRST_VIDEO_PACKET:334,ENABLE_AUDIO_RX:335,DISABLE_AUDIO_RX:336,SET_REMOTE_USER_STREAM_TYPE:337,DEFAULT_SUBSCRIBE_CHANNEL_STREAM_TYPE:338,MUTE_MICROPHONE:400,MUTE_SPEAKER:401,SET_AUDIO_INPUT_VOLUME:402,SET_SPEAKER_VOLUME:403,SET_AUDIO_RX_VOLUME:404,ENABLE_NOISE_SUPPRESSION:405,REMOTE_AUDIO_STATE_CHANGED_NOTIFY:406,REMOTE_MIC_MUTE:407,REMOTE_MIC_UNMUTE:408,AUDIO_OUTPUT_ROUTE_CHANGE:409,AUDIO_DEVICE_ERROR:410,AUDIO_INTPUT_ROUTE_CHANGE:411,INIT_AUDIO:413,UPDATE_VIDEO_ENCODER_CONFIG:501,REMOTE_VIDEO_STATE_CHANGED_NOTIFY:502,INIT_CAMERA:503,START_PREVIEW:504,STOP_PREVIEW:505,SWITCH_CAMERA:506,SETUP_LOCAL_VIDEO:507,SETUP_REMOTE_VIDEO:508,SETUP_LOCAL_RENDER_MODE:509,SETUP_REMOTE_RENDER_MODE:510,REMOTE_VIDEO_MUTE:511,REMOTE_VIDEO_UNMUTE:512,START_SCREEN_CAPTURE:513,STOP_SCREEN_CAPTURE:514,VIDEO_DEVICE_ERROR:515,SCREEN_STATE:700,SCREEN_INIT:701,SCREEN_MIX:702},I={H264:0,H265:1,NONE:2,VP8:3,VP9:4},R={ACC:0,OPUS:1,NONE:2},w={NONE:0,CPU:1,BANDWIDTH:2},P={MEDIA_OPTION_INVALID:"MEDIA_OPTION_INVALID",DEVICE_NOT_FOUND:"DEVICE_NOT_FOUND",NOT_SUPPORTED:"NOT_SUPPORTED",NOT_READABLE:"NOT_READABLE",PERMISSION_DENIED:"PERMISSION_DENIED",CONSTRAINT_NOT_SATISFIED:"CONSTRAINT_NOT_SATISFIED",UNEXPECTED_ERROR:"UNEXPECTED_ERROR"},D={"180p":{width:320,height:180,frameRate:10,bitrateMax:120,bitrateMin:100},"180p_1":{width:320,height:180,frameRate:8,bitrateMax:100,bitrateMin:80},"180p_2":{width:160,height:120,frameRate:5,bitrateMax:80,bitrateMin:0},"360p":{width:640,height:360,frameRate:20,bitrateMax:600,bitrateMin:400},"360p_1":{width:640,height:360,frameRate:15,bitrateMax:400,bitrateMin:200},"360p_2":{width:640,height:360,frameRate:8,bitrateMax:120,bitrateMin:100},"540p":{width:960,height:540,frameRate:30,bitrateMax:1200,bitrateMin:1e3},"540p_1":{width:960,height:540,frameRate:25,bitrateMax:1e3,bitrateMin:800},"540p_2":{width:960,height:540,frameRate:20,bitrateMax:800,bitrateMin:600},"540p_3":{width:960,height:540,frameRate:15,bitrateMax:600,bitrateMin:400},"720p":{width:1280,height:720,frameRate:30,bitrateMax:2e3,bitrateMin:1500},"720p_1":{width:1280,height:720,frameRate:25,bitrateMax:1500,bitrateMin:1200},"720p_2":{width:1280,height:720,frameRate:20,bitrateMax:1200,bitrateMin:1e3}},k={"1080p":{width:1920,height:1080,frameRate:15,bitrateMax:2e3,bitrateMin:0},"1080p_1":{width:1920,height:1080,frameRate:10,bitrateMax:1500,bitrateMin:0},"1080p_2":{width:1920,height:1080,frameRate:5,bitrateMax:1200,bitrateMin:0}}},5237:(e,t,i)=>{"use strict";i.r(t),i.d(t,{BrowserDetect:()=>a,checkSystem:()=>x,browserInfo:()=>b,isIOS:()=>y,isAndroid:()=>_,isFirefox:()=>I,isSafari:()=>R,isWECHAT:()=>w,isSafariAndMT:()=>P,isAppleNotSafari:()=>D,isChrome:()=>O});const r=new(i(2238)),n=r.getResult(),s=i(7247),a={getDisplayMedia:!1,getStreamFromExtension:!1,supportUnifiedPlan:!1,supportMinBitrate:!1,supportSetRtpSenderParameters:!1,webAudioMediaStreamDest:!1,supportReplaceTrack:!1,supportWebGL:!1,supportRequestFrame:!1,webAudioWithAEC:!1,supportShareAudio:!1},o="Chrome",c="Safari",u="Edge",d="Firefox",l="OPR",h="QQBrowser",p="MicroMessenger",f="Windows 10",A="Windows 8.1",m="Windows 7",g="Android",T="Linux",v="iOS",C="Mac OS";function E(e){e&&r.setUA(e);let t=r.getResult();e=function(e){switch(e.browser.name){case"Chrome Headless":case"Chrome":case"Chromium":return o;case"Safari":case"Mobile Safari":return c;case"Edge":return u;case"Firefox":return d;case"QQBrowser":return h;case"Opera":return l;case"WeChat":return p;default:return e.browser.name||""}}(t);var i=t.browser.version&&t.browser.version.split(".")[0]||"";let n="";switch(t.os.name){case"Windows":n=t.os.version?t.os.name+" "+t.os.version:t.os.name;break;default:n=t.os.name||""}return{name:e,version:i,os:n}}function S(){var e=E();return!(!function(){let e=E();return!!("WebKit"===mb.engine.name&&e.os===C&&navigator.maxTouchPoints&&0<navigator.maxTouchPoints&&e.name!==c||e.os===v&&e.name!==c)}()||!(e.os===C||e.os===v&&((e=n.os.version&&n.os.version.split("."))&&14===Number(e[0])&&e[1]&&3<=Number(e[1])||e&&14<Number(e[0]))))}function x(){let e=!1;try{void 0===navigator.mediaDevices&&(navigator.mediaDevices={}),void 0===navigator.mediaDevices.getUserMedia&&(navigator.mediaDevices.getUserMedia=function(e){var t=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia;return t?new Promise((function(i,r){t.call(navigator,e,i,r)})):Promise.reject(new Error("getUserMedia is not implemented in this browser"))});const t=navigator.mediaDevices&&navigator.mediaDevices.getUserMedia,i=window.WebSocket;e=!!(window.RTCPeerConnection&&t&&i)}catch(e){return s.error(`[DetectBrowser] check system requirement failed: ${e}`),!1}let t=!1,i=E();return i.name===o&&58<=Number(i.version)&&("WebKit"!==n.engine.name||S())&&(t=!0),i.name===d&&56<=Number(i.version)&&(t=!0),i.name===l&&45<=Number(i.version)&&(t=!0),i.name===c&&11<=Number(i.version)&&(t=!0),i.name===u&&80<=Number(i.version)&&(t=!0),i.name!==p&&i.name!==h||(t=!0),s.debug(`[DetectBrowser] checkSystemRequirements api:${e} browser:${t}`),e=e&&t,e}const b=E();function y(){return b.os===v}function _(){return b.os===g}function I(){return b.name===d}function R(){return b.name===c}function w(){return b.name===p}function P(){return R()&&0<navigator.maxTouchPoints}function D(){return!!("WebKit"===r.getResult().engine.name&&b.os===C&&navigator.maxTouchPoints&&0<navigator.maxTouchPoints&&b.name!==c||b.os===v&&b.name!==c)}function k(){return b.name!==u&&b.name!==c&&!!navigator.userAgent.toLocaleLowerCase().match(/chrome\/[\d]./i)}function O(){return b.name===o}var M;M=!(!navigator.mediaDevices||!navigator.mediaDevices.getDisplayMedia),a.getDisplayMedia=M,a.getStreamFromExtension=b.name===o&&34<Number(b.version),a.supportUnifiedPlan=function(){if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;let e=new RTCPeerConnection,t=!1;try{e.addTransceiver("audio"),t=!0}catch(e){}return e.close(),t}(),a.supportMinBitrate=b.name===o||b.name===u,a.supportSetRtpSenderParameters=!!(window.RTCRtpSender&&window.RTCRtpSender.prototype.setParameters&&window.RTCRtpSender.prototype.getParameters)&&(!!k()||!(!R()&&!D())||b.name===d&&64<=Number(b.version)),a.webAudioMediaStreamDest=!(b.name===c&&12>Number(b.version)),a.supportReplaceTrack=!!window.RTCRtpSender&&"function"==typeof RTCRtpSender.prototype.replaceTrack,a.supportWebGL="undefined"!=typeof WebGLRenderingContext,a.supportRequestFrame=!!window.CanvasCaptureMediaStreamTrack,k()||(a.webAudioWithAEC=!0),a.supportShareAudio=(b.os===f||b.os===A||b.os===m||b.os===T||b.os===C)&&b.name===o&&74<=Number(b.version),s.info("[DetectBrowser] browser compatibility",JSON.stringify(a),JSON.stringify(b))},201:(e,t,i)=>{const r=i(485),{ClientError:n,DeviceKind:s,DeviceState:a,DeviceEvent:o,DeviceError:c,ActionEventId:u,ActionEventResult:d}=i(9648),{audioTrackInitConfig:l}=i(8902),h=i(2951),p=i(7247),{isWECHAT:f}=i(5237);function A(e,t){return"default"===e?`${e}_${t}`:e}const m={audio:u.AUDIO_DEVICE_ERROR,video:u.VIDEO_DEVICE_ERROR,screen:u.SCREEN_INIT};function g(e,t="video",i){const r=e.name||e.code||e,n={eventId:m[t],result:d.FAIL,param:i};switch(r){case"Starting video failed":case"OverconstrainedError":case"TrackStartError":return h.report({...n,reason:c.MEDIA_OPTION_INVALID}),c.MEDIA_OPTION_INVALID;case"NotFoundError":case"DevicesNotFoundError":return h.report({...n,reason:c.DEVICE_NOT_FOUND}),c.DEVICE_NOT_FOUND;case"NotSupportedError":return h.report({...n,reason:c.NOT_SUPPORTED}),c.NOT_SUPPORTED;case"NotReadableError":return h.report({...n,reason:c.NOT_READABLE,errorcode:"video"===t?-1502:-1402}),c.NOT_READABLE;case"InvalidStateError":case"NotAllowedError":case"PERMISSION_DENIED":case"PermissionDeniedError":{let e={audio:-1403,video:-1501,screen:-1701};return h.report({...n,reason:c.PERMISSION_DENIED,errorcode:e[t]}),c.PERMISSION_DENIED}case"ConstraintNotSatisfiedError":{let e={audio:-1404,video:-1504,screen:-1704};return h.report({...n,reason:c.CONSTRAINT_NOT_SATISFIED,errorcode:e[t]}),c.CONSTRAINT_NOT_SATISFIED}default:return h.report({...n,reason:c.UNEXPECTED_ERROR}),c.UNEXPECTED_ERROR}}e.exports=new class extends r{constructor(){super(),this.inited=!1,this.deviceInfoMap=new Map,this.isAccessCameraPermission=!1,this.isAccessMicrophonePermission=!1,this.init().then((()=>{"ondevicechange"in navigator.mediaDevices&&(navigator.mediaDevices.ondevicechange=this.onDevicechange.bind(this)),!f()&&window.setInterval((()=>this.updateDevices()),6e4)})).catch((e=>{p.error("[DeviceManager] constructor init fail error",e)}))}async init(){try{await this.updateDevices(),this.inited=!0}catch(e){throw p.error("[DeviceManager] init updateDevice fail"),e}}createCameraVideoTrack(e){return new Promise(((t,i)=>{let r={audio:!1,video:{frameRate:e.encoderConfig.frameRate,width:e.encoderConfig.width,height:e.encoderConfig.height}};e.deviceId&&(r.video=Object.assign(r.video,{deviceId:{exact:e.deviceId}})),navigator.mediaDevices.getSupportedConstraints().aspectRatio&&(r.video=Object.assign(r.video,{aspectRatio:e.encoderConfig.width/e.encoderConfig.height})),navigator.mediaDevices.getUserMedia(r).then((e=>{let i=e.getVideoTracks()[0];t(i),h.report({eventId:u.INIT_CAMERA,param:{video:r.video,device:i.label}})})).catch((e=>{g(e,"video",r.video),i(e)}))}))}createMicrophoneAudioTrack(e){let t={video:!1,audio:l(e)};return new Promise(((e,i)=>{navigator.mediaDevices.getUserMedia(t).then((i=>{let r=i.getAudioTracks()[0];e(r),h.report({eventId:u.INIT_AUDIO,param:{audio:t.audio,device:r.label}})})).catch((e=>{g(e,"audio",t.audio),i(e)}))}))}createMicrophoneAndCameraTracks(e,t){let i={audio:l(e),video:{frameRate:t.encoderConfig.frameRate,width:t.encoderConfig.width,height:t.encoderConfig.height}};return t.deviceId&&(i.video=Object.assign(i.video,{deviceId:{exact:t.deviceId}})),navigator.mediaDevices.getSupportedConstraints().aspectRatio&&(i.video=Object.assign(i.video,{aspectRatio:t.encoderConfig.width/t.encoderConfig.height})),new Promise(((e,t)=>{navigator.mediaDevices.getUserMedia(i).then((t=>{let r=t.getVideoTracks()[0],n=t.getAudioTracks()[0];e([n,r]),h.report({eventId:u.INIT_AUDIO,param:{audio:i.audio,device:n.label}}),h.report({eventId:u.INIT_CAMERA,param:{video:i.video,device:r.label}})})).catch((e=>{g(e,"video",i),t(e)}))}))}async createScreenVideoTrack(e,t){let i={};e.encoderConfig.width&&e.encoderConfig.height&&(i.width=e.encoderConfig.width,i.height=e.encoderConfig.height),e.encoderConfig.frameRate&&(i.frameRate=e.encoderConfig.frameRate),e.displaySurface&&(i.displaySurface=e.displaySurface),Object.keys(i).length||(i=!0);let r={video:i,audio:t};try{let e=await navigator.mediaDevices.getDisplayMedia(r),i=[];return e.getAudioTracks().length&&t&&i.push(e.getAudioTracks()[0]),e.getVideoTracks().length&&i.push(e.getVideoTracks()[0]),h.report({eventId:u.SCREEN_INIT,param:{constraints:r,device:e.getVideoTracks()[0].label}}),i}catch(e){throw g(e,"screen",r),e}}async enumerateDevices(e,t,i){if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)throw n.NOT_SUPPORTED;let r={audio:!0,video:!0};(!this.isAccessCameraPermission&&t||!this.isAccessMicrophonePermission&&t)&&(r=await this.checkDevicePermission(),r.audio&&(this.isAccessMicrophonePermission=!0),r.video&&(this.isAccessCameraPermission=!0));let s=t&&!r.video,a=e&&!r.audio;if((s||a)&&!i){try{(await navigator.mediaDevices.getUserMedia({audio:a,video:s})).getTracks().forEach((e=>e.stop()))}catch(e){throw n.PERMISSION_DENIED}s&&(this.isAccessCameraPermission=!0),a&&(this.isAccessMicrophonePermission=!0)}try{return await navigator.mediaDevices.enumerateDevices()}catch(e){throw p.error("[DeviceManager] enumerate device fail"),e}}getDevices(e){return e="boolean"==typeof e&&e,this.enumerateDevices(!0,!0,e)}async getCameras(e){e="boolean"==typeof e&&e;try{return(await this.enumerateDevices(!1,!0,e)).filter((e=>e.kind===s.VIDEO_INPUT))}catch(e){throw e}}async getMicrophones(e){e="boolean"==typeof e&&e;try{return(await this.enumerateDevices(!0,!1,e)).filter((e=>e.kind===s.AUDIO_INPUT))}catch(e){throw e}}async getPlaybackDevices(e){e="boolean"==typeof e&&e;try{return(await this.enumerateDevices(!0,!1,e)).filter((e=>e.kind===s.AUDIO_OUTPUT))}catch(e){throw e}}async checkDevicePermission(){let e={audio:!1,video:!1};try{let t=await navigator.mediaDevices.enumerateDevices();for(let i of t)if(i.kind===s.AUDIO_INPUT&&i.label&&(e.audio=!0),i.kind===s.VIDEO_INPUT&&i.label&&(e.video=!0),e.audio&&e.video)break}catch(e){p.error("[DeviceManager] checkDevicePermission fail")}return e}onDevicechange(e){try{this.updateDevices()}catch(e){p.error("[DeviceManager] onDevicechange update device error")}}async updateDevices(){try{let e=(new Date).getTime(),t=await this.getDevices(!0),i=new Array;t.forEach((t=>{let r=this.deviceInfoMap.get(A(t.deviceId,t.kind));if(a.ACTIVE!==(r?r.state:a.INACTIVE)){let r={device:t,initAt:e,updateAt:e,state:a.ACTIVE};this.deviceInfoMap.set(A(t.deviceId,t.kind),r),i.push(r)}r&&(r.updateAt=e)})),this.deviceInfoMap.forEach(((t,r)=>{t.state===a.ACTIVE&&t.updateAt!==e&&(t.state=a.INACTIVE,i.push(t))})),this.inited&&i.length&&i.forEach((e=>{switch(e.device.kind){case s.AUDIO_INPUT:p.debug("[DeviceManager] updateDevices audio input device state is changed device:",e),this.isAccessMicrophonePermission&&this.emit(o.MICROPHONE_CHANGED,e);break;case s.VIDEO_INPUT:p.debug("[DeviceManager] updateDevices video input device state is changed device:",e),this.isAccessCameraPermission&&this.emit(o.CAMERA_CHANGED,e);break;case s.AUDIO_OUTPUT:p.debug("[DeviceManager] updateDevices audio output device state is changed device:",e),this.isAccessMicrophonePermission&&this.emit(o.SPEAKED_CHANGED,e)}})),this.inited&&(this.checkIfDefaultDeviceChanged(t,e),this.checkIfCommunicationsDeviceChanged(t,e))}catch(e){throw p.error("[DeviceManager] updateDevices fail error:",e),e}}checkIfDefaultDeviceChanged(e,t){e.forEach((e=>{if("default"===e.deviceId){let i=this.deviceInfoMap.get(A(e.deviceId,e.kind));if(void 0!==i&&i.device.label!==e.label){let i={device:e,initAt:t,updateAt:t,state:a.ACTIVE};switch(this.deviceInfoMap.set(A(e.deviceId,e.kind),i),e.kind){case s.AUDIO_INPUT:p.debug("[DeviceManager] checkIfDefaultDeviceChanged audio input device state is changed device:",i),this.isAccessMicrophonePermission&&this.emit(o.DEFAULT_MICROPHONE_CHANGED,i);break;case s.AUDIO_OUTPUT:p.debug("[DeviceManager] checkIfDefaultDeviceChanged audio output device state is changed device:",i),this.isAccessMicrophonePermission&&this.emit(o.DEFAULT_SPEAKER_CHANGED,i)}}}}))}checkIfCommunicationsDeviceChanged(e,t){e.forEach((e=>{if("communications"===e.deviceId){let i=this.deviceInfoMap.get(A(e.deviceId,e.kind));if(void 0!==i&&i.device.label!==e.label){let i={device:e,initAt:t,updateAt:t,state:a.ACTIVE};switch(this.deviceInfoMap.set(A(e.deviceId,e.kind),i),e.kind){case s.AUDIO_INPUT:p.debug("[DeviceManager] checkIfCommunicationsDeviceChanged audio input device state is changed device:",i),this.isAccessMicrophonePermission&&this.emit(o.COMMUNICATION_MIROPHONE_CHANGED,i);break;case s.AUDIO_OUTPUT:p.debug("[DeviceManager] checkIfCommunicationsDeviceChanged audio output device state is changed device:",i),this.isAccessMicrophonePermission&&this.emit(o.COMMUNICATION_SPEAKER_CHANGED,i)}}}}))}}},1749:(e,t,i)=>{const r=i(9669),{waitTime:n}=i(4891),s=window.AudioContext||window.webkitAudioContext,a={timeout:500,timeoutFactor:1.5,maxRetryCount:1/0,maxRetryTimeout:1e4};const o=new Map;e.exports=async function(e,t){var i=null;if("string"==typeof e){let t=o.get(e);if(t)return Log.debug("[download] use cached audio resource: ",t),t;try{i=(await function(e,t,i,r){let s=Object.assign({},a,r),o=s.timeout,c=async()=>{await n(o),o*=s.timeoutFactor,o=Math.min(s.maxRetryTimeout,o)},u=!1,d=new Promise((async(r,n)=>{t=t||(()=>!1),i=i||(()=>!0);for(let a=0;a<s.maxRetryCount;a+=1){if(u)return n(new Error("[download] OPERATION_ABORTED"));try{const i=await e();if(!t(i,a)||a+1===s.maxRetryCount)return r(i);await c()}catch(e){if(!i(e,a)||a+1===s.maxRetryCount)return n(e);await c()}}}));return d.cancel=()=>{u=!0},d}((()=>r.get(e,{responseType:"arraybuffer"})),void 0,void 0,{maxRetryCount:3})).data}catch(e){throw new Error("[download] FETCH_AUDIO_FILE_FAILED")}}else i=await new Promise(((t,i)=>{const r=new FileReader;r.onload=e=>{e.target?t(e.target.result):i(new Error("[download] READ_LOCAL_AUDIO_FILE_ERROR"))},r.onerror=()=>{i(new Error("[download] READ_LOCAL_AUDIO_FILE_ERROR"))},r.readAsArrayBuffer(e)}));let c=await function(e){const t=new s;return new Promise(((i,r)=>{t.decodeAudioData(e,(e=>{i(e)}),(e=>{r(new Error("[download] DECODE_AUDIO_FILE_FAILED"))}))}))}(i);return"string"==typeof e&&t&&o.set(e,c),c}},485:e=>{e.exports=class{on(e,t){return this.addListenerInternal(e,t,!1)}addListener(e,t){return this.addListenerInternal(e,t,!1)}prependListener(e,t){return this.addListenerInternal(e,t,!0)}removeListener(e,t){return this.off(e,t)}once(e,t){const i=(...r)=>{this.off(e,i),t.apply(this,r)};return i.listener=t,this.on(e,i),this}off(e,t){let i;return this.eventCollection&&(i=this.eventCollection[e])?(i.forEach(((e,r)=>{e!==t&&e.listener!==t||i.splice(r,1)})),0===i.length&&delete this.eventCollection[e],this):this}offAll(e){if(!this.eventCollection)return this;if(void 0===this.eventCollection[e]){Object.keys(this.eventCollection).forEach(((e,t)=>{this.eventCollection[e].length=0}))}else this.eventCollection[e].length=0;return this}removeAllListeners(){this.eventCollection={}}listeners(e){return this.eventCollection[e]?this.eventCollection[e]:[]}getListeners(e){return this.eventCollection[e]?this.eventCollection[e]:[]}emit(e,...t){let i;return this.eventCollection&&(i=this.eventCollection[e])?(i=i.slice(0),i.forEach((e=>e.apply(this,t))),this):this}async asyncEmit(e,...t){let i;if(this.eventCollection&&(i=this.eventCollection[e])){i=i.slice(0);for(let e of i)try{await e.apply(this,t)}catch(e){throw e}}}addListenerInternal(e,t,i){return this.eventCollection=this.eventCollection||{},this.eventCollection[e]=this.eventCollection[e]||[],i?this.eventCollection[e].unshift(t):this.eventCollection[e].push(t),this}}},3487:(e,t,i)=>{const{ClientError:r}=i(9648);class n{constructor(){this.requestCnt=0}async post(e,t,i){return new Promise(((n,s)=>{let a=this;!function o(){fetch(e,{method:"POST",mode:"cors",headers:{"Content-Type":`${i};charset=utf-8`},body:JSON.stringify(t)}).then((async e=>{let t=await e.json();a.requestCnt=0,n(t)})).catch((e=>{a.requestCnt>=3?(a.requestCnt=0,s(r.HTTP_POST_FALIED)):(a.requestCnt++,setTimeout((()=>{o()}),1500))}))}()}))}}n.ContentType={Plain:"text/plain",Json:"application/json"},e.exports=n},1584:(e,t,i)=>{const r=i(5547),n=i(485),{MediaType:s,SourceType:a,PeerConnectionState:o,PeerEvent:c,PeerType:u,ClientError:d}=i(9648),l=i(7247),h=i(297),p={offerToReceiveAudio:0,offerToReceiveVideo:0,voiceActivityDetection:!0},f={offerToReceiveAudio:1,offerToReceiveVideo:1,voiceActivityDetection:!0},A="offer",m="answer",g="sendonly",T="recvonly",v="inactive";e.exports={PeerConnectionClient:class extends n{constructor(e){super(),this.audioTrack=null,this.videoTrack=null,this.mediaStream=null,this.config=e,this.audioTransceiver=null,this.videoTransceiver=null,this.audioSender=null,this.videoSender=null,this.subscribeOption={audio:!1,video:!1},this.id=e.id,this.sourceType=e.sourceType?e.sourceType:a.PEOPLE,this.simulcastLayer=void 0!==e.simulcastLayer?e.simulcastLayer:1,this.createTime=Date.now().toString().slice(-6),this.logPrefix=`[${e.type.slice(0,3)}_peer_${this.id}_${this.sourceType}_${this.simulcastLayer}_${this.createTime}]`,this.checkIfSupportUnifiedPlan(),this.checkIfSupportReplaceTrack(),this.createPeerConnection(),this._mutex=new h(`${e.type.slice(0,3)}_peer_${this.id}_${this.sourceType}_${this.simulcastLayer}`)}checkIfSupportUnifiedPlan(){this.supportUnifiedPlan=window.RTCRtpTransceiver&&"addTransceiver"in RTCPeerConnection.prototype,l.info(`${this.logPrefix} checkIfSupportUnifiedPlan supportUnifiedPlan:${this.supportUnifiedPlan}`)}checkIfSupportReplaceTrack(){this.supportReplaceTrack=window.RTCRtpSender&&"replaceTrack"in RTCRtpSender.prototype,l.info(`${this.logPrefix} checkIfSupportReplaceTrack supportReplaceTrack:${this.supportReplaceTrack}`)}createPeerConnection(){l.info(`${this.logPrefix} createPeerConnection`);let e={bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"};e.sdpSemantics=this.supportUnifiedPlan?"unified-plan":"plan-b",this.pc=new RTCPeerConnection(e),this.pc.oniceconnectionstatechange=e=>{},this.pc.onconnectionstatechange=e=>{l.info(`${this.logPrefix} onconnectionstatechange state:${this.pc.connectionState}`),this.emit(c.CONNECTION_STATE,this.id,this.sourceType,this.simulcastLayer,this.pc.connectionState)},this.pc.onsignalingstatechange=e=>{},this.pc.onicecandidate=e=>{},this.pc.ontrack=e=>{l.info(`${this.logPrefix} ontrack audio:${this.subscribeOption.audio} video:${this.subscribeOption.video}`),this.mediaStream!==e.streams[0]&&(this.mediaStream=e.streams[0],"any"===this.id&&(l.info(`${this.logPrefix} ontrack add media stream`),this.emit(c.MEDIA_STREAM,this.mediaStream))),"any"!==this.id&&(this.subscribeOption.audio&&this.mediaStream.getAudioTracks().length>0&&(this.emit(c.AUDIO_TRACK,this.mediaStream.getAudioTracks()[0]),this.subscribeOption.audio=!1),this.subscribeOption.video&&this.mediaStream.getVideoTracks().length>0&&(this.emit(c.VIDEO_TRACK,this.mediaStream.getVideoTracks()[0]),this.subscribeOption.video=!1))},this.mediaStream=new MediaStream}enableSubscribeAudio(){l.info(`${this.logPrefix} enableSubscribeAudio`),this.mediaStream&&0!==this.mediaStream.getAudioTracks().length?this.emit(c.AUDIO_TRACK,this.mediaStream.getAudioTracks()[0]):this.subscribeOption.audio=!0}disableSubscribeAudio(){l.info(`${this.logPrefix} disableSubscribeAudio`),this.subscribeOption.audio=!1}enableSubscribeVideo(){l.info(`${this.logPrefix} enableSubscribeVideo`),this.mediaStream&&0!==this.mediaStream.getVideoTracks().length?this.emit(c.VIDEO_TRACK,this.mediaStream.getVideoTracks()[0]):this.subscribeOption.video=!0}disableSubscribeVideo(){l.info(`${this.logPrefix} disableSubscribeVideo`),this.subscribeOption.video=!0}async createOffer(e){l.info(`${this.logPrefix} createOffer`);try{await this._mutex.lock();let t={};if(this.config.type===u.PUBLISH)t=e?Object.assign(e,p):p;else if(this.config.type===u.SUBSCRIBE)if("any"!==this.id)t=e?Object.assign(e,f):f;else{for(let e=0;e<5;e++)this.pc.addTransceiver("audio",{direction:T});this.channel=this.pc.createDataChannel("trackRelation"),this.channel.onopen=e=>{l.info(`${this.logPrefix} onopen:${JSON.stringify(e)}`)},this.channel.onmessage=e=>{l.info(`${this.logPrefix} onmessage:${JSON.stringify(e.data)}`)}}return(await this.pc.createOffer(t)).sdp}catch(e){throw this._mutex.unlock(),`create offer fail error:${e}`}}async setOfferSdp(e){l.info(`${this.logPrefix} setOfferSdp`);try{await this.pc.setLocalDescription({type:A,sdp:e})}catch(e){throw`set local offer fail error:${e}`}}async setAnswerSdp(e){l.info(`${this.logPrefix} setAnswerSdp`);try{this._mutex.locked&&this._mutex.unlock(),await this.pc.setRemoteDescription({type:m,sdp:e}),this.emit(c.SET_ANSWER_SUCCESS,0)}catch(e){throw`set remote answer fail error:${e}`}}getAnswerSdp(){return this.pc.currentRemoteDescription?this.pc.currentRemoteDescription.sdp:void 0}getLocalSdp(){return this.pc.currentLocalDescription?this.pc.currentLocalDescription.sdp:void 0}close(){l.info(`${this.logPrefix} close`);try{this.emit(c.SET_ANSWER_SUCCESS,1),this.pc.close(),this.pc.ontrack=null,this.pc.oniceconnectionstatechange=null,this.pc.onconnectionstatechange=null,this.pc.onsignalingstatechange=null,this.pc.onicecandidate=null,this.pc=null,this.audioSender=null,this.audioTransceiver=null,this.videoSender=null,this.videoTransceiver=null,this.mediaStream=null,this.audioTrack=null,this.videoTrack=null}catch(e){}}checkIfNeedNegotiate(e){return!this.supportUnifiedPlan||(e.kind===s.AUDIO&&!this.audioTransceiver||e.kind===s.VIDEO&&!this.videoTransceiver)}async addTrack(e){if(l.info(`${this.logPrefix} addTrack kind:${e.kind}`),e.kind===s.AUDIO&&this.audioTrack||e.kind===s.VIDEO&&this.videoTrack)throw l.warning(`${this.logPrefix} addTrack error kind:${e.kind}`),d.TRACk_ALREADY_ADDED;this.mediaStream.addTrack(e),this.supportUnifiedPlan?await this.addUnifedPlanTrack(e):this.addPlanBTrack(e),e.kind===s.AUDIO?this.audioTrack=e:this.videoTrack=e}removeTrack(e){l.info(`${this.logPrefix} removeTrack kind:${e.kind}`);let t=e.kind===s.AUDIO?this.audioSender:this.videoSender;if(null===t)throw d.SENDER_NOT_FOUND;this.pc.removeTrack(t),this.mediaStream.removeTrack(e),e.kind===s.AUDIO?(this.audioSender=null,this.audioTrack=null,this.audioTransceiver&&(this.audioTransceiver.direction=v)):(this.videoSender=null,this.videoTrack=null,this.videoTransceiver&&(this.videoTransceiver.direction=v))}async replaceTrack(e){if(l.info(`${this.logPrefix} replaceTrack kind:${e.kind}`),this.supportReplaceTrack){let t=e.kind===s.AUDIO?this.audioSender:this.videoSender;if(null===t)throw d.SENDER_NOT_FOUND;t.replaceTrack(e),e.kind===s.AUDIO?this.audioTrack=e:this.videoTrack=e}else{let t=e.kind===s.AUDIO?this.audioTrack:this.videoTrack;if(null===t)throw d.TRACK_NOT_EXIST;this.removeTrack(t),await this.addTrack(e)}}async setVideoEncoderParams(e){if(l.info(`${this.logPrefix} setVideoEncoderParams`),this.videoSender){let t=this.videoSender.getParameters();0===t.encodings.length&&(t.encodings=[{}]),e.maxBitrate&&(t.encodings[0].maxBitrate=1e3*e.maxBitrate),e.maxFramerate&&(t.encodings[0].maxFramerate=e.maxFramerate);try{return await this.videoSender.setParameters(t),!0}catch(e){return l.error(`${this.logPrefix} setVideoEncoderParams sender set param error:error`),!1}}return!1}async setOptimizationMode(e){if(l.info(`${this.logPrefix} setOptimizationMode mode:${e}`),this.videoSender){let t=this.videoSender.getParameters();if("degradationPreference"in t){let i="balanced";"motion"===e?i="maintain-framerate":"detail"===e&&(i="maintain-resolution"),t.degradationPreference=i;try{await this.videoSender.setParameters(t),t=this.videoSender.getParameters()}catch(e){l.error(`${this.logPrefix} setOptimizationMode set mode because of error:${e}`)}}}}isSenderSupportedSetParam(){return("chrome"===r.browserDetails.browser||"safari"===r.browserDetails.browser||"firefox"===r.browserDetails.browser&&r.browserDetails.version>=64)&&"RTCRtpSender"in window&&"setParameters"in window.RTCRtpSender.prototype}get connectionState(){return this.pc?this.pc.connectionState:void 0}isTrackAdded(e){return this.mediaStream&&this.mediaStream.getTracks().includes(e)}async addUnifedPlanTrack(e){l.info(`${this.logPrefix} addUnifedPlanTrack`);let t=e.kind===s.AUDIO?this.audioTransceiver:this.videoTransceiver;t?(await t.sender.replaceTrack(e),t.direction=g):t=this.pc.addTransceiver(e,{direction:g}),e.kind===s.AUDIO?(this.audioTransceiver=this.audioTransceiver?this.audioTransceiver:t,this.audioSender=t.sender):(this.videoTransceiver=this.videoTransceiver?this.videoTransceiver:t,this.videoSender=t.sender)}addPlanBTrack(e){l.info(`${this.logPrefix} addPlanBTrack`);let t=this.pc.addTrack(e,this.mediaStream);e.kind===s.AUDIO?this.audioSender=t:this.videoSender=t}async recreatePeerConnection(){l.info(`${this.logPrefix} recreatePeerConnection`),this.createTime=Date.now().toString().slice(-6),this.logPrefix=`[${this.config.type.slice(0,3)}_peer_${this.id}_${this.sourceType}_${this.simulcastLayer}_${this.createTime}]`;let e=this.mediaStream.getTracks();this.close(),this.createPeerConnection(),this.config.type===u.PUBLISH&&e.forEach((async e=>{try{await this.addTrack(e)}catch(t){l.info(`${this.logPrefix} recreatePeerConnection fail to add track of ${e.kind}`)}}))}isAddedTrack(e){return e.kind===s.AUDIO&&this.audioTrack&&e===this.audioTrack||e.kind===s.VIDEO&&this.videoTrack&&e===this.videoTrack}async awaitSetAnswer(){l.debug(`${this.logPrefix} awaitSetAnswer`),await new Promise(((e,t)=>{this.once(c.SET_ANSWER_SUCCESS,(i=>{l.debug(`${this.logPrefix} awaitSetAnswer resolve code:${i}`),0===i?e():t("await set answer failed")}))}))}}}},417:(e,t,i)=>{const r=i(5547),n=i(7247);function s(e,t,i,r){var n=e.split("\r\n"),s=d(n,t),a={};if(null===s){var u=l(n,"a=rtpmap",t);if(null===u)return e;var h=p(n[u]);a.pt=h.toString(),a.params={},a.params[i]=r,n.splice(u+1,0,c(a))}else(a=o(n[s])).params[i]=r,n[s]=c(a);return e=n.join("\r\n")}function a(e,t,i,r){let n=e.split("\r\n"),s=0;for(;s<n.length;){let e=h(n,s,-1,"a=rtpmap",t);if(null===e)break;var a=p(n[e]);let d=h(n,e+1,-1,"a=fmtp:"+a.toString());var u={};null===d?(u.pt=a.toString(),u.params={},u.params[i]=r,n.splice(e+1,0,c(u)),d=e+1):((u=o(n[d])).params[i]=r,n[d]=c(u)),s=d+1}return e=n.join("\r\n")}function o(e){var t={},i=e.indexOf(" "),r=e.substring(i+1).split(";"),n=new RegExp("a=fmtp:(\\d+)"),s=e.match(n);if(!s||2!==s.length)return null;t.pt=s[1];for(var a={},o=0;o<r.length;++o){var c=r[o].split("=");2===c.length&&(a[c[0]]=c[1])}return t.params=a,t}function c(e){if(!e.hasOwnProperty("pt")||!e.hasOwnProperty("params"))return null;var t=e.pt,i=e.params,r=[],n=0;for(var s in i)r[n]=s+"="+i[s],++n;return 0===n?null:"a=fmtp:"+t.toString()+" "+r.join(";")}function u(e,t,i){var r=e.split("\r\n"),n=d(r,t);if(null===n)return e;var s=o(r[n]);delete s.params[i];var a=c(s);return null===a?r.splice(n,1):r[n]=a,e=r.join("\r\n")}function d(e,t){var i=function(e,t){var i=l(e,"a=rtpmap",t);return i?p(e[i]):null}(e,t);return i?l(e,"a=fmtp:"+i.toString()):null}function l(e,t,i){return h(e,0,-1,t,i)}function h(e,t,i,r,n,s){if(void 0===s&&(s="asc"),"asc"===(s=s||"asc")){for(var a=-1!==i?i:e.length,o=t;o<a;++o)if(0===e[o].indexOf(r)&&(!n||-1!==e[o].toLowerCase().indexOf(n.toLowerCase())))return o}else for(var c=-1!==t?t:e.length-1;c>=0;--c)if(0===e[c].indexOf(r)&&(!n||-1!==e[c].toLowerCase().indexOf(n.toLowerCase())))return c;return null}function p(e){var t=new RegExp("a=rtpmap:(\\d+) [a-zA-Z0-9-]+\\/\\d+"),i=e.match(t);return i&&2===i.length?i[1]:null}function f(e,t){var i=e.split(" "),r=i.slice(0,3);r.push(t);for(var n=3;n<i.length;n++)i[n]!==t&&r.push(i[n]);return r.join(" ")}function A(e,t,i,r){var s=t+" "+i+" codec";if(!r)return n.debug("No preference on "+s+"."),e;n.debug("Prefer "+s+": "+r);var a=e.split("\r\n"),o=l(a,"m=",t);if(null===o)return e;for(var c=null,u=a.length-1;u>=0;--u){var d=h(a,u,0,"a=rtpmap",r,"desc");if(null===d)break;u=d,(c=p(a[d]))&&(a[o]=f(a[o],c))}return e=a.join("\r\n")}function m(e,t,i){var s=e.split("\r\n"),a=l(s,"m=",i);if(null===a)return n.debug("Failed to add bandwidth line to sdp, as no m-line found"),e;var o=h(s,a+1,-1,"m=");null===o&&(o=s.length);var c=h(s,a+1,o,"c=");if(null===c)return n.debug("Failed to add bandwidth line to sdp, as no c-line found"),e;let u="AS";"firefox"===r.browserDetails.browser&&(t=1e3*(t>>>0),u="TIAS");var d=h(s,c+1,o,`b=${u}`);d&&s.splice(d,1);var p=`b=${u}:`+t;return s.splice(c+1,0,p),e=s.join("\r\n")}function g(e,t){e=e.split(" ");for(var i=0;i<e.length;++i)e[i]===t.toString()&&e.splice(i,1);return e.join(" ")}function T(e,t){var i=l(e,"a=rtpmap",t.toString());if(null===i)return e;e.splice(i,1);var r=l(e,"m=","video");return null===r||(e[r]=g(e[r],t)),e}class v{static mergeConstraints(e,t){if(!e||!t)return e||t;var i=e;for(var r in t)i[r]=t[r];return i}static iceCandidateType(e){return e.split(" ")[7]}static setOpusParam(e,t){return"true"===t.opusStereo?e=s(e,"opus/48000","stereo","1"):"false"===t.opusStereo&&(e=u(e,"opus/48000","stereo")),"true"===t.opusFec?e=s(e,"opus/48000","useinbandfec","1"):"false"===t.opusFec&&(e=u(e,"opus/48000","useinbandfec")),"true"===t.opusDtx?e=s(e,"opus/48000","usedtx","1"):"false"===t.opusDtx&&(e=u(e,"opus/48000","usedtx")),t.opusMaxPbr&&(e=s(e,"opus/48000","maxplaybackrate",t.opusMaxPbr)),t.spropMaxCapturerate&&(e=s(e,"opus/48000","sprop-maxcapturerate",t.opusMaxPbr)),e}static setAudioSendBitRate(e,t){return t.audioSendBitrate?(n.debug(`[SdpUtil] setAudioSendBitRate bitrate:${t.audioSendBitrate}`),m(e,t.audioSendBitrate,"audio")):e}static setAudioReceiveBitRate(e,t){return t.audioRecvBitrate?(n.debug(`[SdpUtil] setAudioReceiveBitRate Prefer audio receive bitrate:${t.audioRecvBitrate}`),m(e,t.audioRecvBitrate,"audio")):e}static setVideoSendBitRate(e,t){return t.videoSendBitrate?(n.debug(`[SdpUtil] setVideoSendBitRate bitrate:${t.videoSendBitrate}`),m(e,t.videoSendBitrate,"video")):e}static setVideoReceiveBitRate(e,t){return t.videoRecvBitrate?(n.debug(`[SdpUtil] setVideoReceiveBitRate bitrate:${t.videoRecvBitrate}`),m(e,t.videoRecvBitrate,"video")):e}static setVideoCodecParam(e,t){var i=e.split("\r\n"),r=l(i,"m=","video");if(null===r)return n.debug("[SdpUtil] setVideoCodecParam failed to find video m-line"),e;var a=i[r],o=new RegExp("m=video\\s\\d+\\s[A-Z/]+\\s");a.split(o);var c=a.split(o)[1].split(" ")[0],u=i[l(i,"a=rtpmap",c)].split("a=rtpmap:"+c)[1].split("/")[0],d=t.videoSendCodec||u;return t.minBitrate&&(e=s(e,d,"x-google-min-bitrate",t.minBitrate.toString())),t.maxBitrate&&(e=s(e,d,"x-google-max-bitrate",t.maxBitrate.toString())),t.startBitrate&&(e=s(e,d,"x-google-start-bitrate",t.startBitrate.toString())),t.profileLevelId&&(e=s(e,d,"profile-level-id",t.profileLevelId)),t.maxFrameRate&&(e=s(e,d,"max-fr",t.maxFrameRate)),e}static setSpsPpsIdrInkeyFrame(e,t){if(!e||0===e.length)return e;var i=e.split("\r\n"),r=l(i,"m=","video");if(null===r)return n.debug("[SdpUtil] setSpsPpsIdrInkeyFrame failed to find video m-line"),e;var s=i[r],o=new RegExp("m=video\\s\\d+\\s[A-Z/]+\\s"),c=s.split(o)[1].split(" ")[0],u=i[l(i,"a=rtpmap",c)].split("a=rtpmap:"+c)[1].split("/")[0];return e=a(e,t.codec||u,"sps-pps-idr-in-keyframe",1)}static setPacketizationMode(e,t){if(!e||0===e.length)return e;var i=e.split("\r\n"),r=l(i,"m=","video");if(null===r)return n.debug("[SdpUtil] setPacketizationMode failed to find video m-line"),e;var s=i[r],o=new RegExp("m=video\\s\\d+\\s[A-Z/]+\\s"),c=s.split(o)[1].split(" ")[0],u=i[l(i,"a=rtpmap",c)].split("a=rtpmap:"+c)[1].split("/")[0];return e=a(e,t.codec||u,"packetization-mode",t.packetizationMode)}static modifyOrRecoverySsrc(e,t,i){if(!e||0===e.length)return e;var r=e.split("\r\n"),s=l(r,"m=",t);if(null===s)return n.debug("[SdpUtil] modifyOrRecoverySscr failed to find video m-line"),e;let a=h(r,s+1,-1,"a=ssrc");for(let e=0;e<4;e++){var o=r[a+e].split(" "),c=o[0].split(":");c[1]=i?parseInt(c[1])+1:parseInt(c[1])-1,r[a+e]=c.join(":")+" "+o[1]}return e=r.join("\r\n")}static readSsrc(e,t){if(!e||0===e.length)return;let i=e.split("\r\n"),r=new Map;if("video"===t||"av"===t){let e=l(i,"m=","video");if(null===e)n.debug("[SdpUtil] readSsrc failed to find video m-line");else{let t=i[h(i,e+1,-1,"a=ssrc")].split(" ");r.set("video",t.slice(1))}}if("audio"===t||"av"===t){let e=l(i,"m=","audio");if(null===e)n.debug("[SdpUtil] readSsrc failed to find audio m-line");else{let t=i[h(i,e+1,-1,"a=ssrc:")].split(" ");r.set("audio",[t[0].split(":")[1]])}}return r}static replaceSSrcWithLastSdp(e,t){let i=v.readSsrc(e,"av"),r=v.readSsrc(t,"av");return i.forEach(((e,i)=>{let n=r.get(i);void 0!==n&&n.forEach(((i,r)=>{t=t.replace(new RegExp(i,"gm"),e[r])}))})),t}static removeTransportCC(e){if(!e||0===e.length)return e;var t=e.split("\r\n");return e=t.filter(((e,t)=>!e.includes("transport-cc")&&!e.includes("http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"))).join("\r\n")}static writeRtcpFb(e,t){if(!e||0===e.length)return e;let i=e.split("\r\n");for(let e=0;e<i.length;){if(i[e].includes("a=rtpmap")&&(i[e].includes("opus")||i[e].includes("H264"))){let r=`a=rtcp-fb:${p(i[e])} ${t}`;i.splice(e+1,0,r),++e}++e}return e=i.join("\r\n")}static removeVideoFec(e,t){if("false"!==t.videoFec)return e;var i=e.split("\r\n"),r=l(i,"a=rtpmap","red");if(null===r)return e;var n=p(i[r]);if(i=function(e,t){var i=l(e,"a=rtpmap",t);if(null===i)return e;var r=p(e[i]);e.splice(i,1);var n=l(e,"m=","video");return null===n||(e[n]=g(e[n],r)),e}(i=T(i,n),"ulpfec"),null===(r=l(i,"a=fmtp",n.toString())))return e;var s=o(i[r]).pt;return null===s?e:(i.splice(r,1),(i=T(i,s)).join("\r\n"))}static setPreferAudioSendCodec(e,t){return A(e,"audio","send",t.audioSendCodec)}static setPreferAudioReceiveCodec(e,t){return A(e,"audio","receive",t.audioRecvCodec)}static setPreferVideoSendCodec(e,t){return A(e,"video","send",t.videoSendCodec)}static setVideoReceiveCodec(e,t){return A(e,"video","receive",t.videoRecvCodec)}static getSupportedCodec(e){if(!e||0===e.length)return{video:[],audio:[]};let t=e.split("\r\n"),i=0,r=[],n=[];for(;i<t.length;){let e=h(t,i,t.length,"a=rtpmap");if(null===e)break;let s=t[e].split(" ")[1].split("/")[0];switch(s){case"opus":!n.includes(s)&&n.push(s);break;case"H264":case"VP8":case"VP9":!r.includes(s)&&r.push(s)}i=e+1}return{video:r,audio:n}}static setVideoCodec(e,t){let i=t.split("\r\n");var r=l(i,"m=","video");if(null===r)return t;let n=i[r],s=r+1,a=[];const o=new RegExp("rtpmap:\\d+ VP8|VP9|H264|AV1X|red/\\d+"),c=new RegExp("a=fmtp:(\\d+) apt=\\d+");for(;s<i.length&&!i[s].startsWith("m=audio");){let t=i[s];if(o.test(t))if(t.includes(e))s++;else{n=g(n,p(t));let e=s;for(;++e<i.length;){let t=i[e].match(c);if(t&&2===t.length){a.push([s,e]),n=g(n,t[1]);break}}s=e+1}else s++}i[r]=n;let u=[];for(s=0;s<i.length;){let e=!1;for(let t of a)if(s>=t[0]&&s<=t[1]){e=!0;break}e||u.push(i[s]),s++}return u.join("\r\n")}}e.exports=v},4312:e=>{class t{static GenerateJoinBody(e,i,r,n,s){return{action:t.Action.kJoin,roomId:e,role:i,token:r,deviceId:n,supportH264:s}}static GenerateLeaveBody(e){return{action:t.Action.kLeave,roomId:e}}static GeneratePublishBody(e,i,r,n,s){let a=0===s?"low":"high";return{action:t.Action.kPublish,video:e,audio:i,sdp:r,sourceType:n,simulcastLayer:a}}static GenerateUnpublishBody(e,i,r,n){let s=0===n?"low":"high";return{action:t.Action.kUnpublish,video:e,audio:i,sourceType:r,simulcastLayer:s}}static GenerateSubscibeBody(e,i,r,n,s){return{action:t.Action.kSubscribe,uid:e,sdp:i,video:r,audio:n,sourceType:s}}static GenerateUnsubscribeBody(e,i){return{action:t.Action.kUnsubscribe,uid:e,sourceType:i}}static GenerateMuteAudioBody(e,i,r){return{action:t.Action.kMuteAudio,uid:e,sourceType:i,public:r}}static GenerateUnmuteAudioBody(e,i,r){return{action:t.Action.kUnmuteAudio,uid:e,sourceType:i,public:r}}static GenerateMuteVideoBody(e,i,r){return{action:t.Action.kMuteVideo,uid:e,sourceType:i,public:r}}static GenerateUnmuteVideoBody(e,i,r){return{action:t.Action.kUnmuteVideo,uid:e,sourceType:i,public:r}}static GenerateSetRoleBody(e){return{action:t.Action.kSetRole,role:e}}static GenerateSwitchStreamType(e,i){return{action:t.Action.kSwitchStreamType,uid:e,simulcastLayer:i}}static GenerateSetLiveTranscodingBody(e){return{action:t.Action.kSetLiveTranscoding,liveTranscoding:e}}static GenerateStartLiveStreamingBody(e,i){return{action:t.Action.kStartLiveStreaming,url:e,transcodingEnabled:i}}static GenerateStopLiveStreamingBody(e){return{action:t.Action.kStopLiveStreaming,url:e}}static GenerateSignalRequestData(e,i,r,n,s){let a=t.seq++;return{seq:a,data:JSON.stringify({appId:e,roomId:i,uid:r,sdkVersion:n,seq:a,ts:window.performance.now(),command:t.Command.kClientRequest,body:s})}}static GenerateSignalPingData(e,i,r,n){let s=t.seq++;return{seq:s,data:JSON.stringify({command:t.Command.kPing,seq:s,appId:e,roomId:i,uid:r,sdkVersion:n,ts:window.performance.now(),body:{action:t.Command.kPing}})}}}t.Action={kJoin:"join",kLeave:"leave",kPublish:"publish",kUnpublish:"unpublish",kSubscribe:"subscribe",kUnsubscribe:"unsubscribe",kMuteAudio:"mute_audio",kUnmuteAudio:"unmute_audio",kMuteVideo:"mute_video",kUnmuteVideo:"unmute_video",kVideoMuteState:"video_mute",kVideoUnmuteState:"video_unmute",kAudioMuteState:"audio_mute",kAudioUnmuteState:"audio_unmute",kSetRole:"set_role",kStreamAdded:"stream_added",kStreamRemoved:"stream_remove",kUserOnline:"user_online",kUserOffline:"user_offline",kRemoteUsersState:"remote_users",kKickedOutState:"kicked_out",kSwitchStreamType:"switch_stream_type",kSetLiveTranscoding:"set_live_transcoding",kStartLiveStreaming:"start_live_streaming",kStopLiveStreaming:"stop_live_streaming",kTrackRelationState:"track_relation",kAryaErrorState:"arya_error"},t.Command={kClientRequest:"clientRequest",kClientResponse:"clientResponse",kServerStatus:"serverStatus",kPing:"ping",kPong:"pong"},t.seq=0,e.exports=t},9036:(e,t,i)=>{const r=i(485),n=i(9596),s=i(4312),{ActionInfo:a,RtcAction:o}=i(9516),{MediaType:c,SignalHandlerEvent:u,SignalConnectionState:d,SignalDisconnectedReason:l,PeerConnectionState:h}=i(9648),p=i(7247);e.exports=class extends r{constructor(e){super(),this.appId=e.appId,this.channel=e.channel,this.uid=e.uid,this.sdkVersion=e.sdkVersion,this.client=e,this.aryaSignal=new n,this.aryaSignal.init(this.appId,this.channel,this.uid,this.sdkVersion,this),this.aryaSignal.onMessage=this.onMessage.bind(this),this.aryaSignal.onSignalConnectionStateChange=this.onSignalConnectionStateChange.bind(this),this.rtcAction=new o,this.deviceId=e.deviceId?e.deviceId:""}connnect(e){return this.aryaSignal.open(e)}close(e){this.aryaSignal.close(e),e||(this.client=null,this.aryaSignal=null)}async sendSetRoleSignal(e,t){let i=s.GenerateSetRoleBody(e);return this.sendSignal(i,t)}async sendJoinSignal(e,t,i,r,n){let a=s.GenerateJoinBody(e,t,i,this.deviceId,r);return this.sendSignal(a,n)}async sendLeaveSignal(e,t){let i=s.GenerateLeaveBody(e);return this.sendSignal(i,t)}async sendPublishSignal(e,t,i,r,n,o){let c=s.GeneratePublishBody(e,t,i,r,n);return this.rtcAction.push(new a(s.seq,s.Action.kPublish,this.uid,r,n)),this.sendSignal(c,o)}async sendUnpublishSignal(e,t,i,r,n){let o=s.GenerateUnpublishBody(e,t,i,r);return this.rtcAction.push(new a(s.seq,s.Action.kUnpublish,this.uid,i,r)),this.sendSignal(o,n)}async sendAudioMuteStateSignal(e,t,i,r,n){let o=t?s.GenerateMuteAudioBody(e,i,r):s.GenerateUnmuteAudioBody(e,i,r),c=t?s.Action.kMuteAudio:s.Action.kUnmuteAudio;return this.rtcAction.push(new a(s.seq,c,e,i)),this.sendSignal(o,n)}async sendVideoMuteStateSignal(e,t,i,r,n){let o=t?s.GenerateMuteVideoBody(e,i,r):s.GenerateUnmuteVideoBody(e,i,r),c=t?s.Action.kMuteVideo:s.Action.kUnmuteVideo;return this.rtcAction.push(new a(s.seq,c,e,i)),this.sendSignal(o,n)}async sendSubscribeSignal(e,t,i,r,n,o){let c=s.GenerateSubscibeBody(e,t,i,r,n);return this.rtcAction.push(new a(s.seq,s.Action.kSubscribe,e,n)),this.sendSignal(c,o)}async sendUnsubscribeSignal(e,t,i){let r=s.GenerateUnsubscribeBody(e,t);return this.rtcAction.push(new a(s.seq,s.Action.kUnsubscribe,e,t)),this.sendSignal(r,i)}async sendSubscribeChangedSignal(e,t,i,r){let n=t.enableVideo[0],o=t.enableAudio[0],c=s.GenerateSubscibeBody(e,"",n,o,t.sourceType),u=new a(s.seq,s.Action.kSubscribe,e,t.sourceType);return u.event=i,this.rtcAction.push(u),this.sendSignal(c,r)}async sendSwitchStreamTypeSignal(e,t,i){let r=s.GenerateSwitchStreamType(e,t);return this.sendSignal(r,i)}async sendSetLiveTranscodingSignal(e,t){let i=s.GenerateSetLiveTranscodingBody(e);return this.sendSignal(i,t)}async sendStartLiveStreamingSignal(e,t,i){let r=s.GenerateStartLiveStreamingBody(e,t);return this.sendSignal(r,i)}async sendStopLiveStreamingSignal(e,t){let i=s.GenerateStopLiveStreamingBody(e);return this.sendSignal(i,t)}async sendSignal(e,t){let i=s.GenerateSignalRequestData(this.appId,this.channel,this.uid,this.sdkVersion,e);if(t)this.aryaSignal.send(i);else try{return await this.aryaSignal.invoke(i)}catch(e){throw e}}onSignalConnectionStateChange(e){if(p.info(`[SignalHandler] onSignalConnectionStateChange state:${e}`),e===n.WsStatus.WSStatusReconnectFail||e===n.WsStatus.WSStatusConnectionRefuse)this.emit(u.RECONNECT_FAILED);else{let t=e===n.WsStatus.WsStatusConnected?d.CONNECTED:d.RECONNECTING;this.emit(u.CONNECTION_STATE,t)}}isMediaConnectionActive(){if(this.client.localUser)for(let e of this.client.localUser.publishInfos.values())if(e.peer&&(e.peer.connectionState===h.DISCONNECTED||e.peer.connectionState===h.CONNECTED))return!0;for(let e of this.client.remoteUsers.values())for(let t of e.subscribeInfos.values())if(t.peer&&(t.peer.connectionState===h.DISCONNECTED||t.peer.connectionState===h.CONNECTED))return!0;return!1}onMessage(e){if(!this.isVaildMessage(e))return void p.warning("[SignalHandler] onMessage message is invalid");let t;if(e.command!==s.Command.kClientResponse||(t=this.getAndRemoveActionInfo(e.body.action,e.seq),void 0!==t))switch(e.body.action){case s.Action.kUserOnline:this.client.handleUserOnlineState(e.body.uid);break;case s.Action.kUserOffline:this.client.handleUserOfflineState(e.body.uid);break;case s.Action.kAudioMuteState:this.client.handleMuteState(e.body.uid,c.AUDIO,!0,e.body.sourceType);break;case s.Action.kAudioUnmuteState:this.client.handleMuteState(e.body.uid,c.AUDIO,!1,e.body.sourceType);break;case s.Action.kVideoMuteState:this.client.handleMuteState(e.body.uid,c.VIDEO,!0,e.body.sourceType);break;case s.Action.kVideoUnmuteState:this.client.handleMuteState(e.body.uid,c.VIDEO,!1,e.body.sourceType);break;case s.Action.kRemoteUsersState:this.client.handleRemoteUsersState(e.body.remote_users),this.client.handleContentState(e.body.content_user);break;case s.Action.kKickedOutState:this.client.handleKickedOutState();break;case s.Action.kPublish:this.client.handlePublishAction(t.sourceType,t.simulcastLayer,e.body.sdp);break;case s.Action.kUnpublish:this.client.handleUnpublishAction(t.sourceType,t.simulcastLayer);break;case s.Action.kSubscribe:this.handleSubscribeResponse(t,e);break;case s.Action.kUnsubscribe:this.client.handleUnsubscribeAction(t.uid,t.sourceType);break;case s.Action.kMuteAudio:this.client.handleMuteAction(t.uid,t.sourceType,c.AUDIO,!0);break;case s.Action.kUnmuteAudio:this.client.handleMuteAction(t.uid,t.sourceType,c.AUDIO,!1);break;case s.Action.kMuteVideo:this.client.handleMuteAction(t.uid,t.sourceType,c.VIDEO,!0);break;case s.Action.kUnmuteVideo:this.client.handleMuteAction(t.uid,t.sourceType,c.VIDEO,!1);break;case s.Action.kTrackRelationState:this.client.handleTrackRelationState(e.body.relation);break;case s.Action.kAryaErrorState:this.client.handleAryaErrorState(e.body.code,e.body.msg)}else p.warning("[SignalHandler] onMessage client response is invalid")}isVaildMessage(e){return void 0!==e.body&&void 0!==e.body.action}getAndRemoveActionInfo(e,t){p.info(`[SignalHandler] getAndRemoveActionInfo actionName:${e} seq:${t}`);let i=this.rtcAction.get(e,t);if(void 0!==i)return this.rtcAction.remove(e,t),i;p.warning(`[SignalHandler] getAndRemoveActionInfo action:${e} seq:${t} is invalid`)}handleSubscribeResponse(e,t){if(null===e.event)this.client.handleSubcribeAction(e.uid,e.sourceType,t.body.sdp);else switch(e.event){case s.Action.kMuteAudio:this.client.handleMuteAction(e.uid,e.sourceType,c.AUDIO,!0);break;case s.Action.kUnmuteAudio:this.client.handleMuteAction(e.uid,e.sourceType,c.AUDIO,!1);break;case s.Action.kMuteVideo:this.client.handleMuteAction(e.uid,e.sourceType,c.VIDEO,!0);break;case s.Action.kUnmuteVideo:this.client.handleMuteAction(e.uid,e.sourceType,c.VIDEO,!1)}}}},4891:e=>{Date.prototype.Format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var i in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),t)new RegExp("("+i+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[i]:("00"+t[i]).substr((""+t[i]).length)));return e},e.exports={parseJSON:function(e){try{return JSON.parse(e)}catch(e){}return null},removeArrayItem:function(e,t){let i=e.indexOf(t);-1!==i&&e.splice(i,1)},getRandomIntInclusive:function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e},getLocaltime:function(){return(new Date).Format("yyyy-MM-dd hh:mm:ss.S")},waitTime:function(e){return new Promise((t=>{window.setTimeout(t,e)}))},generateId:function e(t=7,i){let r=Math.random().toString(16).substr(2,t).toLowerCase();return r.length===t?i.concat(r):i.concat(r)+e(t-r.length,"")},getNetType:function(){let e=navigator.userAgent,t=navigator.connection,i=e.match(/NetType\/\w+/)?e.match(/NetType\/\w+/)[0]:"";"3gnet"===(i=i.toLowerCase().replace("nettype/",""))&&(i="3g");let r=t&&t.type&&t.type.toLowerCase(),n=t&&t.effectiveType&&t.effectiveType.toLowerCase();"slow-2"===n&&(n="2g");let s=i||"unknown";if(r)switch(r){case"cellular":case"wimax":s=n||"unknown";break;case"wifi":s="wifi";break;case"ethernet":s="wired";break;case"none":case"other":case"unknown":s="unknown"}return s.toUpperCase()},getSupportedCodec:async function(e){if(void 0===window.RTCRtpSender||!("getCapabilities"in RTCRtpSender)){let e=new RTCPeerConnection;try{let t=await e.createOffer({offerToReceiveAudio:1,offerToReceiveVideo:1});return e.close(),e=null,SdpUtil.getSupportedCodec(t.sdp)}catch(e){return{video:[],audio:[]}}}let t=RTCRtpSender.getCapabilities("video"),i=RTCRtpSender.getCapabilities("audio"),r=[];t&&t.codecs.forEach((e=>{let t=e.mimeType.replace(/^video\//,"").toLocaleUpperCase();"H264"!==t||r.includes("H264")||r.push(t),"VP8"===t&&r.push(t)}));let n=[];return i&&i.codecs.forEach((e=>{let t=e.mimeType.replace(/^audio\//,"").toLocaleUpperCase();"OPUS"===t&&n.push(t)})),{video:r,audio:n}}}},4147:e=>{"use strict";e.exports=JSON.parse('{"name":"krtc-js-sdk","version":"1.2.0","description":"","main":"arya_rtc.js","scripts":{"test":"echo \\"Error: no test specified\\" && exit 1","dev":"NODE_ENV=development webpack serve ","build":"NODE_ENV=production webpack --config ./webpack.config.js","deploy":"sh deploy.sh rtc"},"author":"","license":"ISC","dependencies":{"@ks/kwai-video-post-processor":"^1.1.6-alpha-6","axios":"^0.24.0","md5":"^2.3.0","ua-parser-js":"^0.7.28"},"devDependencies":{"copy-webpack-plugin":"^9.0.1","css-loader":"^5.1.3","html-webpack-plugin":"5.3.2","style-loader":"^2.0.0","terser-webpack-plugin":"5.1.4","webpack":"^5.53.0","webpack-cli":"^4.8.0","webpack-dev-server":"^4.2.1"}}')}},t={};function i(r){var n=t[r];if(void 0!==n)return n.exports;var s=t[r]={exports:{}};return e[r].call(s.exports,s,s.exports,i),s.exports}return i.d=(e,t)=>{for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i(1719)})()}));
//# sourceMappingURL=krtc-js-sdk.js.map